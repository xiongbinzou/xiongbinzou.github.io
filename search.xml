<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Docker进阶教程学习笔记</title>
      <link href="/posts/47611.html"/>
      <url>/posts/47611.html</url>
      
        <content type="html"><![CDATA[<h2 id="容器数据卷">容器数据卷</h2><h2 id="DockerFile">DockerFile</h2><h2 id="Docker网络原理">Docker网络原理</h2><h2 id="IDEA整合Docker">IDEA整合Docker</h2><h2 id="Docker-Compose">Docker Compose</h2><h2 id="Docker-Swarm">Docker Swarm</h2><h2 id="CI-CD-Jenkins">CI/CD Jenkins</h2><h2 id="参考文章">参考文章</h2><p>本文是笔者通过下列视频教程进行Docker进阶学习的记录，有部分修改和补充，转载请注明出处，并附带下面链接。</p><p>1.<a href="https://www.bilibili.com/video/BV1og4y1q7M4/">【B站up主-遇见狂神说】</a></p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
            <tag> Docker技术 </tag>
            
            <tag> 虚拟化 </tag>
            
            <tag> 进阶教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker入门教程学习笔记</title>
      <link href="/posts/38460.html"/>
      <url>/posts/38460.html</url>
      
        <content type="html"><![CDATA[<h2 id="Docker概述">Docker概述</h2><h3 id="Docker为什么会出现？">Docker为什么会出现？</h3><p>一款应用从开发到上线，一般会有开发环境、测试环境和生产环境。</p><p>Docker的出现是为了解决不同环境配置重复且繁琐，环境不同引发应用出现崩溃的问题，Docker通过隔离机制，将应用运行的必要环境和应用打包在一起，可以让应用轻松成功部署。</p><h3 id="Docker历史">Docker历史</h3><p>2010年，dotCloud公司创始人Solomon Hykes发起了Docker项目，2013年，Docker项目开源。Docker使用Go语言进行开发实现，对进程进行封装隔离，是属于操作系统层面的虚拟化技术。</p><p>由于隔离的进程独立于宿主和其他的隔离的进行，因此也称其为容器。</p><h3 id="Docker为什么会流行？">Docker为什么会流行？</h3><p>Docker是一个开源的引擎，可以轻松的为任何应用创建一个<strong>轻量级、可移植的、自给自足</strong>的容器。开发者在笔记本上编译测试通过的容器可以批量地在生产环境中部署，包括VMs（虚拟机）、bare metal、OpenStack集群和其他的基础应用平台。</p><p><strong>Docker常用于如下场景：</strong></p><ul><li>Web应用的自动打包和发布；</li><li>自动化测试的持续集成、发布；</li><li>在服务型环境中部署和调整数据库或其他的后台应用；</li><li>从头编译或扩展现有的OpenShift或Cloud Foundry平台来搭建自己的PaaS服务。</li></ul><p>Docker官网：<a href="https://www.docker.com/">https://www.docker.com/</a><br>Docker文档：<a href="https://docs.docker.com/">https://docs.docker.com/</a><br>Docker仓库：<a href="https://hub.docker.com/">https://hub.docker.com/</a></p><h3 id="Devops的含义">Devops的含义</h3><ul><li><p><strong>应用更快速交付和部署</strong></p></li><li><p><strong>更便捷的升级和扩缩容</strong></p></li><li><p><strong>更简单的系统运维</strong></p></li><li><p><strong>更高效的计算资源利用</strong></p></li></ul><h3 id="虚拟机VS容器">虚拟机VS容器</h3><p>传统虚拟机：虚拟出一套硬件后，在其上运行一个完整的操作系统，然后在这个系统安装和运行软件。</p><p><img src="/posts/38460/virtualization.png" alt="传统虚拟化"></p><p>Docker：应用直接运行在宿主机的内核，容器没有自己的内核，也没有虚拟硬件，所以更轻量，每个容器间是互相隔离，每个容器内都有一个属于自己的文件系统，互不影响。</p><p><img src="/posts/38460/docker.png" alt="Docker"></p><p>所以说，新建一个容器的时候，Docker不需要像虚拟机一样需要重新加载一个操作系统的内核，避免引导。虚拟机是加载Guest OS，而Docker是利用宿主机的操作系统，省略了这个过程。</p><table><thead><tr><th></th><th>Docker容器</th><th>传统虚拟机VM</th></tr></thead><tbody><tr><td>虚拟化类型</td><td>操作系统虚拟化</td><td>硬件虚拟化</td></tr><tr><td>性能</td><td>=物理机性能</td><td>5%-20%损耗</td></tr><tr><td>隔离性</td><td>NS隔离</td><td>强</td></tr><tr><td>QoS</td><td>Cgroup弱</td><td>强</td></tr><tr><td>安全性</td><td>中</td><td>强</td></tr></tbody></table><h3 id="Docker基本组成">Docker基本组成</h3><p><img src="/posts/38460/image-20200603212031036.png" alt="Docker的基本组成"></p><h3 id="Docker名词">Docker名词</h3><p><strong>镜像 image</strong>：Docker镜像好比一个模板，可以通过这个模板来创建容器服务，如：tomcat镜像=&gt;run=&gt;tomcat01容器，通过这个镜像可以创建多个容器。</p><p><strong>容器 container</strong>：Docker利用容器技术，以镜像为模板来创建独立运行的一个或一组应用，容器有启动、停止、删除等基本命令。</p><p><strong>仓库 repository</strong>：Docker仓库是存放镜像的地方，仓库分为公有仓库和私有仓库，公有仓库有：Docker Hub（默认放在国外），阿里云代理（配置镜像加速）。</p><h2 id="Docker安装">Docker安装</h2><blockquote><p>环境准备</p></blockquote><p>1、需要会Linux基本指令</p><p>2、一台服务器（本文使用的主机操作系统是CentOS 7）</p><p>3、连接远程服务器进行操作（本文使用的远程连接软件是SecureCRT）</p><blockquote><p>环境查看</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 系统内核是 3.10 以上的[root@xizou /]# uname -r3.10.0-1160.76.1.el7.x86_64# 系统版本[root@xizou ~]# cat /etc/os-releaseNAME="CentOS Linux"VERSION="7 (Core)"ID="centos"ID_LIKE="rhel fedora"VERSION_ID="7"PRETTY_NAME="CentOS Linux 7 (Core)"ANSI_COLOR="0;31"CPE_NAME="cpe:/o:centos:centos:7"HOME_URL="https://www.centos.org/"BUG_REPORT_URL="https://bugs.centos.org/"CENTOS_MANTISBT_PROJECT="CentOS-7"CENTOS_MANTISBT_PROJECT_VERSION="7"REDHAT_SUPPORT_PRODUCT="centos"REDHAT_SUPPORT_PRODUCT_VERSION="7"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>安装Docker</p></blockquote><p>帮助文档 <a href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 1.卸载旧的版本yum remove docker \                docker-client \                docker-client-latest \                docker-common \                docker-latest \                docker-latest-logrotate \                docker-logrotate \                docker-engine          # 2.需要的安装包yum install -y yum-utils# 3.设置镜像的仓库yum-config-manager \    --add-repo \    https://download.docker.com/linux/centos/docker-ce.repo # 默认是国外的    # 推荐设置阿里云的镜像仓库yum-config-manager \    --add-repo \    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo    # 更新软件包索引yum makecache fast# 4.安装docker docker-ce指社区版 docker-ee指企业版yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin# 5.启动dockersystemctl start docker# 6.使用docker version查看是否安装成功[root@xizou /]# docker versionClient: Docker Engine - Community Version:           20.10.21 API version:       1.41 Go version:        go1.18.7 Git commit:        baeda1f Built:             Tue Oct 25 18:04:24 2022 OS/Arch:           linux/amd64 Context:           default Experimental:      trueServer: Docker Engine - Community Engine:  Version:          20.10.21  API version:      1.41 (minimum version 1.12)  Go version:       go1.18.7  Git commit:       3056208  Built:            Tue Oct 25 18:02:38 2022  OS/Arch:          linux/amd64  Experimental:     false containerd:  Version:          1.6.9  GitCommit:        1c90a442489720eec95342e1789ee8a5e1b9536f runc:  Version:          1.1.4  GitCommit:        v1.1.4-0-g5fd4c4d docker-init:  Version:          0.19.0  GitCommit:        de40ad0  # 7.测试[root@xizou /]# docker run hello-worldUnable to find image 'hello-world:latest' locallylatest: Pulling from library/hello-world2db29710123e: Pull complete Digest: sha256:e18f0a777aefabe047a671ab3ec3eed05414477c951ab1a6f352a06974245fe7Status: Downloaded newer image for hello-world:latestHello from Docker!This message shows that your installation appears to be working correctly.To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.    (amd64) 3. The Docker daemon created a new container from that image which runs the    executable that produces the output you are currently reading. 4. The Docker daemon streamed that output to the Docker client, which sent it    to your terminal.To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bashShare images, automate workflows, and more with a free Docker ID: https://hub.docker.com/For more examples and ideas, visit: https://docs.docker.com/get-started/# 8.查看镜像[root@xizou /]# docker imagesREPOSITORY    TAG       IMAGE ID       CREATED         SIZEhello-world   latest    feb5d9fea6a5   13 months ago   13.3kB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/posts/38460/image-20221029005556639.png" alt="run的运行流程图"></p><blockquote><p>卸载Docker</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 1.卸载依赖yum remove docker-ce docker-ce-cli containerd.io docker-compose-plugin# 2.删除资源rm -rf /var/lib/dockerrm -rf /var/lib/containerd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>配置阿里云镜像加速（前提是购买了阿里云服务器）</p></blockquote><p>登陆阿里云==&gt;阿里云控制台==&gt;搜索容器镜像服务==&gt;点击容器镜像服务==&gt;点击镜像工具的镜像加速器==&gt;按照CentOS页签下的教程在服务器里配置容器镜像加速</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'{  "registry-mirrors": ["https://2tq3dbmj.mirror.aliyuncs.com"]}EOFsudo systemctl daemon-reloadsudo systemctl restart docker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>底层原理</p></blockquote><p><strong>Docker是怎么工作的？</strong></p><p>Docker是一个C/S结构的系统，Docker的守护进程运行在主机上，通过Socket从客户端访问，</p><p>Docker Server接收到Docker Client的指令，就会执行这个指令。</p><p><img src="/posts/38460/image-20221029010008163.png" alt="image-20221029010008163"></p><h2 id="Docker命令">Docker命令</h2><h3 id="帮助命令">帮助命令</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker version# 显示docker的版本信息docker info# 显示docker的系统信息，包括镜像和容器的数量docker &lt;command&gt; --help    # 帮助命令<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>帮助文档地址：<a href="https://docs.docker.com/engine/reference/commandline/">https://docs.docker.com/engine/reference/commandline/</a></p></blockquote><h3 id="镜像命令">镜像命令</h3><p><strong>docker images</strong> 查看所有本地的主机上的镜像</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@xizou /]# docker imagesREPOSITORY    TAG       IMAGE ID       CREATED         SIZEhello-world   latest    feb5d9fea6a5   13 months ago   13.3kB# 解释REPOSITORY 镜像的仓库源TAG        镜像的标签IMAGE ID   镜像的idCREATED   镜像的创建时间SIZE   镜像的大小# 可选项  -a, --all             # 显示所有的镜像  -q, --quiet           # 只显示镜像的ID<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>docker search</strong> 搜索镜像</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@xizou /]# docker search mysqlNAME                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATEDmysql                           MySQL is a widely used, open-source relation…   13400     [OK]       mariadb                         MariaDB Server is a high performing open sou…   5113      [OK]   # 可选项  -f, --filter filter   Filter output based on conditions provided      --format string   Pretty-print search using a Go template      --limit int       Max number of search results (default 25)      --no-trunc        Don't truncate output# 如，通过收藏来过滤[root@xizou /]# docker search mysql --filter=STARS=300NAME         DESCRIPTION                                     STARS     OFFICIAL   AUTOMATEDmysql        MySQL is a widely used, open-source relation…   13400     [OK]       mariadb      MariaDB Server is a high performing open sou…   5113      [OK]       phpmyadmin   phpMyAdmin - A web interface for MySQL and M…   669       [OK]       percona      Percona Server is a fork of the MySQL relati…   592       [OK] <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>docker pull 镜像名[:tag]</strong> 下载镜像</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@xizou /]# docker pull mysqlUsing default tag: latest  # 不写tag，默认是latestlatest: Pulling from library/mysql72a69066d2fe: Pull complete  # 分层下载，docker image的核心 联合文件系统93619dbc5b36: Pull complete 99da31dd6142: Pull complete 626033c43d70: Pull complete 37d5d7efb64e: Pull complete ac563158d721: Pull complete d2ba16033dad: Pull complete 688ba7d5c01a: Pull complete 00e060b6d11d: Pull complete 1c04857f594f: Pull complete 4d7cfa90e6ea: Pull complete e0431212d27d: Pull complete Digest: sha256:e9027fe4d91c0153429607251656806cc784e914937271037f7738bd5b8e7709 # 签名Status: Downloaded newer image for mysql:latestdocker.io/library/mysql:latest  # 真实地址# 等价于docker pull docker.io/library/mysql:latest# 指定版本下载[root@xizou /]# docker pull mysql:5.75.7: Pulling from library/mysql72a69066d2fe: Already exists  # 分层下载，已经存在的layers不会重复下载93619dbc5b36: Already exists 99da31dd6142: Already exists 626033c43d70: Already exists 37d5d7efb64e: Already exists ac563158d721: Already exists d2ba16033dad: Already exists 0ceb82207cd7: Pull complete 37f2405cae96: Pull complete e2482e017e53: Pull complete 70deed891d42: Pull complete Digest: sha256:f2ad209efe9c67104167fc609cca6973c8422939491c9345270175a300419f94Status: Downloaded newer image for mysql:5.7docker.io/library/mysql:5.7# 查看所有镜像[root@xizou /]# docker images -aREPOSITORY    TAG       IMAGE ID       CREATED         SIZEmysql         5.7       c20987f18b13   10 months ago   448MBmysql         latest    3218b38490ce   10 months ago   516MBhello-world   latest    feb5d9fea6a5   13 months ago   13.3kB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>docker rmi</strong>  删除镜像</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@xizou /]# docker rmi -f 镜像id    # 删除指定的镜像[root@xizou /]# docker rmi -f 镜像id 镜像id 镜像id    # 删除指多个指定的镜像[root@xizou /]# docker rmi -f $(docker images -aq)  # 删除所有的镜像<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="容器命令">容器命令</h3><p><strong>说明</strong>：有了镜像才能够创建容器，linux下载一个centos镜像来学习</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker pull centos<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>docker run</strong> 新建容器并启动</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker run [可选参数] image# 参数说明--name="Name"  容器名字，用来区分容器-d   后台方式运行-it   使用交互方式运行，进入容器查看内容-p   指定容器的端口 -p 8080:8080-p 主机端口:容器端口 (常用)-p ip:主机端口:容器端口-p 容器端口容器端口-P   随机指定端口# 测试，启动并进入容器[root@xizou /]# docker run -it centos /bin/bash[root@c2fc79886fec /]# ls# 查看容器内的centos，基础版本，很多命令不完善bin  etc   lib    lost+found  mnt  proc  run   srv  tmp  vardev  home  lib64  media       opt  root  sbin  sys  usr[root@c2fc79886fec /]# exit     # 从容器中退回主机[root@xizou /]# lsbin   dev  home  lib64       media  opt   root  sbin  sys  usrboot  etc  lib   lost+found  mnt    proc  run   srv   tmp  var<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>docker ps</strong> 列出所有运行的容器</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># docker ps命令# 列出当前正在运行的容器-a  # 列出当前正在运行的容器+历史运行过的容器-n=? # 显示最近创建的容器-q  # 只显示容器的ID[root@xizou /]# docker psCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES[root@xizou /]# docker ps -aCONTAINER ID   IMAGE          COMMAND       CREATED             STATUS                         PORTS     NAMESc2fc79886fec   centos         "/bin/bash"   5 minutes ago       Exited (130) 3 minutes ago               competent_gagarin3c84dcf43e4e   feb5d9fea6a5   "/hello"      About an hour ago   Exited (0) About an hour ago             peaceful_pare<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>退出容器</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">exit  # 直接容器停止并退出Ctrl + P + Q  # 容器不停止退出<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>dockers rm</strong> 删除容器</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker rm 容器id  # 删除指定的容器，不能删除正在运行的容器，强制删除为docker rm -f 容器iddocker rm -f $(docker ps -aq)  # 删除所有的容器docker ps -a -q|xargs docker rm -f  # 删除所有的容器<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>启动和停止容器的操作</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker start 容器id    # 启动容器docker restart 容器id  # 重启容器docker stop 容器id # 停止当前正在进行的容器docker kill 容器id # 强制停止当前容器<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="常用其他命令">常用其他命令</h3><p><strong>docker run -d 镜像名</strong> 后台启动容器</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 测试[root@xizou /]# docker run -d centosc2b6244be6c43e1bd6f1e54c1cc7b5b6d0f8c5183c335bf40befafaa4319179c# 问题：输入docker ps, 发现刚刚后台运行的容器停止了# 常见的坑：docker 容器使用后台运行，就必须要有一个前台进程，docker发现没有应用，就会自动停止# 如启动nginx，容器启动后，发现自己没有提供服务，就会立即停止，就是没有程序了<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>docker logs</strong> 查看日志</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 命令docker logs -tf --tail number 容器id[root@xizou /]# docker logs -tf --tail 10 d839  # 容器没有日志# 自己编写一个Shell脚本：每隔1秒打印一个xizou"while true;do echo xizou;sleep 1;done"[root@xizou /]# docker run -d centos /bin/sh -c "while true;do echo xizou;sleep 1;done"817124ceef29bb3d5a06e6c713de0266d83cd46bd2acdbd49c98c5009559f5cc[root@xizou /]# docker psCONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES817124ceef29   centos    "/bin/sh -c 'while t…"   12 minutes ago   Up 12 minutes             amazing_panini# 显示日志-tf   # 显示日志--tail number # 要显示日志条数[root@xizou /]# docker logs -tf --tail 10 817124ceef292022-10-29T06:33:43.399390864Z xizou2022-10-29T06:33:44.401304775Z xizou2022-10-29T06:33:45.403554366Z xizou2022-10-29T06:33:46.405484682Z xizou2022-10-29T06:33:47.407427195Z xizou2022-10-29T06:33:48.409551746Z xizou2022-10-29T06:33:49.411679644Z xizou2022-10-29T06:33:50.413887957Z xizou2022-10-29T06:33:51.415868562Z xizou2022-10-29T06:33:52.417886027Z xizou<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>docker top 容器id</strong> 查看容器中的进程</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 命令 docker top 容器id# 测试[root@xizou /]# docker top 817124ceef29UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMDroot                16181               16163               0                   14:18               ?                   00:00:00            /bin/sh -c while true;do echo xizou;sleep 1;doneroot                17492               16181               0                   14:38               ?                   00:00:00            /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>docker inspect 容器id</strong> 查看容器的元数据</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 测试[root@xizou /]# docker ps -aCONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES817124ceef29   centos    "/bin/sh -c 'while t…"   22 minutes ago   Up 22 minutes             amazing_panini[root@xizou /]# docker inspect 817124ceef29[    {        "Id": "817124ceef29bb3d5a06e6c713de0266d83cd46bd2acdbd49c98c5009559f5cc",        "Created": "2022-10-29T06:18:50.373286723Z",        "Path": "/bin/sh",        "Args": [            "-c",            "while true;do echo xizou;sleep 1;done"        ],        "State": {            "Status": "running",            "Running": true,            "Paused": false,            "Restarting": false,            "OOMKilled": false,            "Dead": false,            "Pid": 16181,            "ExitCode": 0,            "Error": "",            "StartedAt": "2022-10-29T06:18:50.580743276Z",            "FinishedAt": "0001-01-01T00:00:00Z"        },        "Image": "sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6",        "ResolvConfPath": "/var/lib/docker/containers/817124ceef29bb3d5a06e6c713de0266d83cd46bd2acdbd49c98c5009559f5cc/resolv.conf",        "HostnamePath": "/var/lib/docker/containers/817124ceef29bb3d5a06e6c713de0266d83cd46bd2acdbd49c98c5009559f5cc/hostname",        "HostsPath": "/var/lib/docker/containers/817124ceef29bb3d5a06e6c713de0266d83cd46bd2acdbd49c98c5009559f5cc/hosts",        "LogPath": "/var/lib/docker/containers/817124ceef29bb3d5a06e6c713de0266d83cd46bd2acdbd49c98c5009559f5cc/817124ceef29bb3d5a06e6c713de0266d83cd46bd2acdbd49c98c5009559f5cc-json.log",        "Name": "/amazing_panini",        "RestartCount": 0,        "Driver": "overlay2",        "Platform": "linux",        "MountLabel": "",        "ProcessLabel": "",        "AppArmorProfile": "",        "ExecIDs": null,        "HostConfig": {            "Binds": null,            "ContainerIDFile": "",            "LogConfig": {                "Type": "json-file",                "Config": {}            },            "NetworkMode": "default",            "PortBindings": {},            "RestartPolicy": {                "Name": "no",                "MaximumRetryCount": 0            },            "AutoRemove": false,            "VolumeDriver": "",            "VolumesFrom": null,            "CapAdd": null,            "CapDrop": null,            "CgroupnsMode": "host",            "Dns": [],            "DnsOptions": [],            "DnsSearch": [],            "ExtraHosts": null,            "GroupAdd": null,            "IpcMode": "private",            "Cgroup": "",            "Links": null,            "OomScoreAdj": 0,            "PidMode": "",            "Privileged": false,            "PublishAllPorts": false,            "ReadonlyRootfs": false,            "SecurityOpt": null,            "UTSMode": "",            "UsernsMode": "",            "ShmSize": 67108864,            "Runtime": "runc",            "ConsoleSize": [                0,                0            ],            "Isolation": "",            "CpuShares": 0,            "Memory": 0,            "NanoCpus": 0,            "CgroupParent": "",            "BlkioWeight": 0,            "BlkioWeightDevice": [],            "BlkioDeviceReadBps": null,            "BlkioDeviceWriteBps": null,            "BlkioDeviceReadIOps": null,            "BlkioDeviceWriteIOps": null,            "CpuPeriod": 0,            "CpuQuota": 0,            "CpuRealtimePeriod": 0,            "CpuRealtimeRuntime": 0,            "CpusetCpus": "",            "CpusetMems": "",            "Devices": [],            "DeviceCgroupRules": null,            "DeviceRequests": null,            "KernelMemory": 0,            "KernelMemoryTCP": 0,            "MemoryReservation": 0,            "MemorySwap": 0,            "MemorySwappiness": null,            "OomKillDisable": false,            "PidsLimit": null,            "Ulimits": null,            "CpuCount": 0,            "CpuPercent": 0,            "IOMaximumIOps": 0,            "IOMaximumBandwidth": 0,            "MaskedPaths": [                "/proc/asound",                "/proc/acpi",                "/proc/kcore",                "/proc/keys",                "/proc/latency_stats",                "/proc/timer_list",                "/proc/timer_stats",                "/proc/sched_debug",                "/proc/scsi",                "/sys/firmware"            ],            "ReadonlyPaths": [                "/proc/bus",                "/proc/fs",                "/proc/irq",                "/proc/sys",                "/proc/sysrq-trigger"            ]        },        "GraphDriver": {            "Data": {                "LowerDir": "/var/lib/docker/overlay2/7956a7380425fad866c0faca3fbc9c1f5cd3612322621295eb37dbedd3fd9501-init/diff:/var/lib/docker/overlay2/01b2cb186859ddce9e097143c46cc783da485186a234c8ef6c0827b83b7c389a/diff",                "MergedDir": "/var/lib/docker/overlay2/7956a7380425fad866c0faca3fbc9c1f5cd3612322621295eb37dbedd3fd9501/merged",                "UpperDir": "/var/lib/docker/overlay2/7956a7380425fad866c0faca3fbc9c1f5cd3612322621295eb37dbedd3fd9501/diff",                "WorkDir": "/var/lib/docker/overlay2/7956a7380425fad866c0faca3fbc9c1f5cd3612322621295eb37dbedd3fd9501/work"            },            "Name": "overlay2"        },        "Mounts": [],        "Config": {            "Hostname": "817124ceef29",            "Domainname": "",            "User": "",            "AttachStdin": false,            "AttachStdout": false,            "AttachStderr": false,            "Tty": false,            "OpenStdin": false,            "StdinOnce": false,            "Env": [                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"            ],            "Cmd": [                "/bin/sh",                "-c",                "while true;do echo xizou;sleep 1;done"            ],            "Image": "centos",            "Volumes": null,            "WorkingDir": "",            "Entrypoint": null,            "OnBuild": null,            "Labels": {                "org.label-schema.build-date": "20210915",                "org.label-schema.license": "GPLv2",                "org.label-schema.name": "CentOS Base Image",                "org.label-schema.schema-version": "1.0",                "org.label-schema.vendor": "CentOS"            }        },        "NetworkSettings": {            "Bridge": "",            "SandboxID": "06aa425cd028f11073bf21ac726cd4490fa5eaee627aa9fadc7aedea8ca2644e",            "HairpinMode": false,            "LinkLocalIPv6Address": "",            "LinkLocalIPv6PrefixLen": 0,            "Ports": {},            "SandboxKey": "/var/run/docker/netns/06aa425cd028",            "SecondaryIPAddresses": null,            "SecondaryIPv6Addresses": null,            "EndpointID": "6add7586334f9a3e87d60eb62da7145029d5977a07c61cf63ba409b7407e060d",            "Gateway": "172.17.0.1",            "GlobalIPv6Address": "",            "GlobalIPv6PrefixLen": 0,            "IPAddress": "172.17.0.2",            "IPPrefixLen": 16,            "IPv6Gateway": "",            "MacAddress": "02:42:ac:11:00:02",            "Networks": {                "bridge": {                    "IPAMConfig": null,                    "Links": null,                    "Aliases": null,                    "NetworkID": "8f02c5589dd1b4b73a11b84188936b90056ca5a1d18676ffb55935132312468f",                    "EndpointID": "6add7586334f9a3e87d60eb62da7145029d5977a07c61cf63ba409b7407e060d",                    "Gateway": "172.17.0.1",                    "IPAddress": "172.17.0.2",                    "IPPrefixLen": 16,                    "IPv6Gateway": "",                    "GlobalIPv6Address": "",                    "GlobalIPv6PrefixLen": 0,                    "MacAddress": "02:42:ac:11:00:02",                    "DriverOpts": null                }            }        }    }]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>进入当前正在运行的容器</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 通常容器都是使用后台方式运行的，需要进入容器，修改一些配置时# 命令1docker exec -it 容器id /bin/bash  # 进入正在运行的容器# 测试[root@xizou /]# docker exec -it 817124ceef29 /bin/bash[root@817124ceef29 /]# ps -efUID        PID  PPID  C STIME TTY          TIME CMDroot         1     0  0 06:18 ?        00:00:00 /bin/sh -c while true;do echo xiroot      1859     0  0 06:49 pts/0    00:00:00 /bin/bashroot      1916     1  0 06:50 ?        00:00:00 /usr/bin/coreutils --coreutils-proot      1917  1859  0 06:50 pts/0    00:00:00 ps -ef# 命令2docker attach 容器id # 进入正在运行的容器# 测试[root@xizou /]# docker attach 817124ceef29xizouxizouxizouxizou# 如果是死循环导致停不掉容器，新开一个连接后执行 docker stop 容器id# docker exec    进入容器后开启一个新的终端，可以在里面操作# docker attach  进入容器正在执行的终端，不会启用新的进程<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>docker cp</strong> 从容器内拷贝文件到主机上</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 命令docker cp# 测试[root@xizou /]# docker ps -aq | xargs docker rm -f817124ceef29[root@xizou /]# docker ps -aCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES# 进入到容器内(重新创建一个容器，或者使用docker attach)[root@xizou /]# docker run -it centos /bin/bash# 在容器内创建一个文件[root@736731cb9072 /]# cd /home[root@736731cb9072 home]# ls[root@736731cb9072 home]# touch test.py[root@736731cb9072 home]# exitexit[root@xizou /]# docker psCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES[root@xizou /]# docker ps -aCONTAINER ID   IMAGE     COMMAND       CREATED              STATUS                     PORTS     NAMES736731cb9072   centos    "/bin/bash"   About a minute ago   Exited (0) 7 seconds ago             recursing_chatelet# 将文件拷贝到主机上[root@xizou /]# docker cp 736731cb9072:/home/test.py /home[root@xizou /]# cd /home[root@xizou home]# lstest.py[root@xizou home]## 拷贝是一个手动过程，未来我们使用 -v 卷的技术可以实现自动同步/home目录<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="小结"><strong>小结</strong></h3><p><img src="/posts/38460/image-20221029151114773.png" alt="image-20221029151114773"></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@xizou /]# docker --help# 解释指令attachAttach to a running container# 在当前shell下attach连接指定运行的容器buildBuild an image from a Dockerfile# 通过Dockerifle定制镜像commitCreate a new image from a container changes  # 提交当前容器为新的镜像cpCopy files/folders from the container filesystem to the host path# 从容器中拷贝指定文件或目录到宿主机中createCreate a new container# 创建一个新的容器，同run，但不启动容器diffInspect changes on a container's filesystem# 查看docker容器变化eventsGet real time events from the server# 从docker服务获取容器实时事件execRun a command in an existing container# 在已存在的容器上运行命令exportStream the contents of a container as a star archive# 导出容器的内容流作为一个tar归档文件[对应import]historyShow the history of an image# 展示一个镜像形成历史imagesList images# 列出系统当前镜像importCreate a new filesystem image from the contents of a barball# 从tar包中的内容创建一个新的文件系统映像[对应export]infoDisplay system-wide information# 显示系统相关信息inspectReturn low-level information on a container# 查看容器详细信息killKill a running container# kill指定docker容器loadLoad an image from a tar archive# 从一个tar包中加载一个镜像[对应save]loginRegister or login to the docker registry server# 注册或登陆一个docker源服务器logoutLog out from a docker registry server# 从当前docker源服务器退出logsFetch the logs of a container# 输出当前容器日志信息portLookup the public-facing port with is NAT-ed to PRIVATE_PORT# 查看映像端口对应的容器内部源端口pausePause all processes within a container# 暂停容器psList container# 列出容器列表pull        Pull an image or a repository from a registry# 从docker镜像源拉取指定镜像或库镜像push        Push an image or a repository to a registry# 推送指定镜像或库镜像到docker源服务器rename      Rename a container# 重命名一个容器restart     Restart one or more containers# 重启一个或多个运行的容器rm          Remove one or more containers# 移除一个或多个容器rmi         Remove one or more images# 移除一个或多个镜像run         Run a command in a new container# 创建一个新的容器并运行一个命令save        Save one or more images to a tar archive (streamed to STDOUT by default)# 保存一个镜像为一个tar包[对应load]search      Search the Docker Hub for images# 在docker hub中搜索镜像start       Start one or more stopped containers# 启动容器stats       Display a live stream of container(s) resource usage statistics# 展示活动的容器资源使用统计stop        Stop one or more running containers# 停止容器tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE# 给源中镜像打标签top         Display the running processes of a container# 查看容器中运行的进程信息unpause     Unpause all processes within one or more containers# 取消暂停容器update      Update configuration of one or more containers# 更新一个或多个容器配置version     Show the Docker version information# 查看docker版本号wait        Block until one or more containers stop, then print their exit codes# 截取容器停止时的退出状态值<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="作业练习"><strong>作业练习</strong></h3><blockquote><p>部署Nginx</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 1.搜索nginx镜像文件, 建议去docker hub网站搜索，可以看到详细信息[root@xizou /]# docker search nginxNAME                                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATEDnginx                                             Official build of Nginx.                        17590     [OK]       linuxserver/nginx                                 An Nginx container, brought to you by LinuxS…   179                  bitnami/nginx                                     Bitnami nginx Docker Image                      141                  [OK]ubuntu/nginx                                      Nginx, a high-performance reverse proxy &amp; we…   64                   bitnami/nginx-ingress-controller                  Bitnami Docker Image for NGINX Ingress Contr…   20                   [OK]# 2.拉取nginx镜像到主机[root@xizou /]# docker pull nginxUsing default tag: latestlatest: Pulling from library/nginxa2abf6c4d29d: Pull complete a9edb18cadd1: Pull complete 589b7251471a: Pull complete 186b1aaa4aa6: Pull complete b4df32aa5a72: Pull complete a0bcbecc962e: Pull complete Digest: sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31Status: Downloaded newer image for nginx:latestdocker.io/library/nginx:latest[root@xizou /]# docker imagesREPOSITORY   TAG       IMAGE ID       CREATED         SIZEnginx        latest    605c77e624dd   10 months ago   141MBcentos       latest    5d0da3dc9764   13 months ago   231MB# 3.启动后台启动，以nginx01命名容器，容器内部80端口映射到主机3344端口，使用nginx镜像文件[root@xizou /]# docker run -d --name nginx01 -p 3344:80 nginx6bbf807ce91f70a496f31850538b3f77076841195330575288e32efd225b56b0[root@xizou /]# docker psCONTAINER ID   IMAGE     COMMAND                  CREATED              STATUS              PORTS                                   NAMES6bbf807ce91f   nginx     "/docker-entrypoint.…"   About a minute ago   Up About a minute   0.0.0.0:3344-&gt;80/tcp, :::3344-&gt;80/tcp   nginx01# 4.本机自测[root@xizou /]# curl localhost:3344&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to nginx!&lt;/title&gt;&lt;style&gt;html { color-scheme: light dark; }body { width: 35em; margin: 0 auto;font-family: Tahoma, Verdana, Arial, sans-serif; }&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;&lt;p&gt;If you see this page, the nginx web server is successfully installed andworking. Further configuration is required.&lt;/p&gt;&lt;p&gt;For online documentation and support please refer to&lt;a href="http://nginx.org/"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;Commercial support is available at&lt;a href="http://nginx.com/"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;# 5.远程测试打开浏览器，输入127.77.233.13:3344测试，（注：需要配置服务器的安全组策略，放行3344端口）会看到nginx欢迎界面。# 6.进入容器[root@xizou /]# docker exec -it nginx01 /bin/bashroot@6bbf807ce91f:/# whereis nginxnginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginxroot@6bbf807ce91f:/# cd /etc/nginxroot@6bbf807ce91f:/etc/nginx# lsconf.d          mime.types  nginx.conf   uwsgi_paramsfastcgi_params  modules     scgi_paramsroot@6bbf807ce91f:/etc/nginx# exit[root@xizou /]# docker stop nginx01<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/posts/38460/image-20221029160632606.png" alt="端口暴露的概念"></p><p>思考问题：每次改动nginx配置文件都需要进入容器内部，十分的麻烦，如果在容器外部提供一个映射路径，达到在容器外部修改文件，容器内部就可以自动修改  -V 数据卷技术</p><blockquote><p>部署tomcat</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 官方的使用docker run -it --rm tomcat:9.0# 之前的启动都是后台，停止了容器之后，容器还可以查看，而 docker run -it --rm，一般用来测试，用完即删除# 1.下载[root@xizou /]# docker imagesREPOSITORY   TAG       IMAGE ID       CREATED         SIZEnginx        latest    605c77e624dd   10 months ago   141MBcentos       latest    5d0da3dc9764   13 months ago   231MB[root@xizou /]# docker pull tomcatUsing default tag: latestlatest: Pulling from library/tomcat0e29546d541c: Pull complete 9b829c73b52b: Pull complete cb5b7ae36172: Pull complete 6494e4811622: Pull complete 668f6fcc5fa5: Pull complete dc120c3e0290: Pull complete 8f7c0eebb7b1: Pull complete 77b694f83996: Pull complete 0f611256ec3a: Pull complete 4f25def12f23: Pull complete Digest: sha256:9dee185c3b161cdfede1f5e35e8b56ebc9de88ed3a79526939701f3537a52324Status: Downloaded newer image for tomcat:latestdocker.io/library/tomcat:latest[root@xizou /]# docker imagesREPOSITORY   TAG       IMAGE ID       CREATED         SIZEnginx        latest    605c77e624dd   10 months ago   141MBtomcat       latest    fb5657adc892   10 months ago   680MBcentos       latest    5d0da3dc9764   13 months ago   231MB# 2.启动运行[root@xizou /]# docker run -d -p 3355:8080 --name tomcat01 tomcat4f66acd6a158a84bfc0793e9b1c72e9a8a4f7439b2bcf3ea70e330a2dbc2afde# 3.测试访问没有问题，但是会有404错误[root@xizou /]# curl localhost:3355&lt;!doctype html&gt;&lt;html lang="en"&gt;&lt;head&gt;&lt;title&gt;HTTP Status 404 – Not Found&lt;/title&gt;&lt;style type="text/css"&gt;body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;HTTP Status 404 – Not Found&lt;/h1&gt;&lt;hr class="line" /&gt;&lt;p&gt;&lt;b&gt;Type&lt;/b&gt; Status Report&lt;/p&gt;&lt;p&gt;&lt;b&gt;Description&lt;/b&gt; The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.&lt;/p&gt;&lt;hr class="line" /&gt;&lt;h3&gt;Apache Tomcat/10.0.14&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;# 4.进入容器[root@xizou /]# docker exec -it tomcat01 /bin/bashroot@4f66acd6a158:/usr/local/tomcat# llbash: ll: command not found# 发现问题：1) linux命令变少了，2) 没有webapps，因为默认是最小的镜像，所有不必要的都剔除了，保证了最小可运行的环境。# 解决方法：将webapps.dist所有文件拷贝到 webapps即可root@4f66acd6a158:/usr/local/tomcat# lsBUILDING.txt     NOTICE         RUNNING.txt  lib             temp          workCONTRIBUTING.md  README.md      bin          logs            webappsLICENSE          RELEASE-NOTES  conf         native-jni-lib  webapps.distroot@4f66acd6a158:/usr/local/tomcat# cd webapps.dist/root@4f66acd6a158:/usr/local/tomcat/webapps.dist# lsROOT  docs  examples  host-manager  managerroot@4f66acd6a158:/usr/local/tomcat/webapps.dist# cd ..root@4f66acd6a158:/usr/local/tomcat# cp -r webapps.dist/* webappsroot@4f66acd6a158:/usr/local/tomcat# cd webappsroot@4f66acd6a158:/usr/local/tomcat/webapps# lsROOT  docs  examples  host-manager  manager<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>思考问题：每次部署项目，都需要进入容器内部，十分的麻烦，如果在容器外部提供一个映射路径，webapps，在容器外部放置项目，就自动同步到内部就好了  -V数据卷技术</p><blockquote><p>部署ElasticSearch + Kibana</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># es 暴露的端口很多、十分的耗内存、数据一般需要放置到安全目录# --net somenetwork 网络配置# 下载启动elesticsearchdocker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" elasticsearch:8.4.3# 启动之后发现linux服务器非常卡  1核1G，建议1核4G# 查看docker状态  docker stats# 测试一下es启动成功了# 关闭后，给es增加内存限制，修改配置文件 -e 环境配置修改docker run -d --name elasticsearch02 -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" -e ES_JAVA_OPTS="-Xms64m -Xmx256m" elasticsearch:8.4.3# 查看stats[root@xizou ~]# docker statsCONTAINER ID   NAME              CPU %     MEM USAGE / LIMIT     MEM %     NET I/O     BLOCK I/O     PIDSe66569515371   elasticsearch02   0.16%     79.62MiB / 941.5MiB   8.46%     586B / 0B   78.4MB / 0B   15CONTAINER ID   NAME              CPU %     MEM USAGE / LIMIT     MEM %     NET I/O     BLOCK I/O     PIDSe66569515371   elasticsearch02   99.94%    83.38MiB / 941.5MiB   8.86%     586B / 0B   78.9MB / 0B   15CONTAINER ID   NAME              CPU %     MEM USAGE / LIMIT     MEM %     NET I/O     BLOCK I/O     PIDSe66569515371   elasticsearch02   99.94%    83.38MiB / 941.5MiB   8.86%     586B / 0B   78.9MB / 0B   15CONTAINER ID   NAME              CPU %     MEM USAGE / LIMIT     MEM %     NET I/O     BLOCK I/O     PIDSe66569515371   elasticsearch02   99.94%    83.38MiB / 941.5MiB   8.86%     586B / 0B   78.9MB / 0B   15<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>使用Kibana访问ES</p></blockquote><p><img src="/posts/38460/image-20221029173040102.png" alt="使用Kibana访问ES"></p><h3 id="可视化">可视化</h3><ul><li>portainer</li><li>Rancher (CI/CD)</li></ul><p><strong>什么是portainer</strong></p><p>Docker图像化界面管理工具，提供一个后台面板供我们操作</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 下载运行docker run -d -p 8088:9000 \--restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer# 访问测试（如果访问失败，记得进入阿里云配置设置安全组策略，开放8088端口访问）http://120.77.223.13:8088/# 通过它来访问使用教程 https://www.cnblogs.com/JerryMouseLi/p/15571897.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>portainer是Docker的图形化管理工具，提供状态显示面板、应用模板快速部署、容器镜像网络数据卷的基本操作(包括上传下载镜像，创建容器等操作)、事件日志显示、容器控制台操作、Swarm集群和服务等集中管理和操作、登录用户管理和控制等功能。功能十分全面，基本能满足中小型单位对容器管理的全部需求。</p><p><img src="/posts/38460/image-20221029174910162.png" alt="Portainer操作面板"></p><h2 id="Docker镜像">Docker镜像</h2><h3 id="镜像是什么">镜像是什么</h3><p>docker镜像是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需的所有内容，包括代码、运行时、库、环境变量和配置文件。</p><p>所有的应用，直接打包成docker镜像，可以在docker中运行起来。</p><p>如何获得镜像：</p><ul><li>从远程仓库下载</li><li>别人分享拷贝</li><li>自己制作一个镜像DockerFile</li></ul><h3 id="Docker镜像加载原理">Docker镜像加载原理</h3><blockquote><p>UnionFS（联合文件系统）</p></blockquote><p>UnionFS（联合文件系统）：Union文件系统是一种分层、轻量级并且高性能的文件系统，它支持对文件系统的修改，作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下（unite serveral directories into a single virtual filesystem)。Union文件系统是Docker镜像的基础，镜像可以通过分成来进行继承，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像。</p><p>特型：一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录。</p><blockquote><p>Docker镜像加载原理</p></blockquote><p>docker的镜像实际上是由一层一层的文件组成，这种层级的文件系统就是UnionFS</p><p>bootfs(boot file system)主要包含bootloader和kernel，bootloader主要是引导加载kernel，linux刚启动时会加载bootfs文件系统，在Docker镜像的最底层就是bootfs。这一层与典型的Linux/Unix系统是一样的，包含boot加载器和内核。当boot加载完成之后整个内核就都在内核中了，此时内存的使用权已由bootfs转交给内核，此时系统也会卸载bootfs。</p><p>rootfs(root file system)在bootfs之上，包含的就是典型Linux系统中的/dev、/proc、/bin、/etc等标准目录和文件。rootfs就是各种不同的操作系统发行版，比如Ubuntu、Centos等待。</p><blockquote><p><img src="/posts/38460/image-20221029180804154.png" alt="Docker镜像加载"></p></blockquote><p>平时我们按照进虚拟机的CentOS都是好几个G、为什么Docker才200M？</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@xizou /]# docker imagesREPOSITORY            TAG       IMAGE ID       CREATED         SIZEcentos                latest    5d0da3dc9764   13 months ago   231MB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>对于一个精简的OS，rootfs可以很小，只包含最基本的命令、工具和程序库就可以了，因为底层直接用宿主机的内核，自己只要提供rootfs即可，因此可见对于不同的linux发行版，bootfs基本是一致的，rootfs会有差别。因此不同的发行版可以共用bootfs。</p><p>虚拟机是分钟级别的，容器是秒级的。</p><blockquote><p>分层的镜像</p></blockquote><p>可以去下载一个镜像，观察下载的日志输出，可以发现是一层一层在下载。</p><p>比如：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 下载redis[root@xizou /]# docker pull redisUsing default tag: latestlatest: Pulling from library/redisa2abf6c4d29d: Already exists c7a4e4382001: Pull complete4044b9ba67c9: Pull complete c8388a79482f: Pull complete 413c8bb60be2: Pull complete 1abfd3011519: Pull complete Digest: sha256:db485f2e245b5b3329fdc7eff4eb00f913e09d8feb9ca720788059fdc2ed8339Status: Downloaded newer image for redis:latestdocker.io/library/redis:latest# 查看镜像的元数据[root@xizou /]# docker image inspect redis:latest[    {        "Id": "sha256:7614ae9453d1d87e740a2056257a6de7135c84037c367e1fffa92ae922784631",        "RepoTags": [            "redis:latest"        ],        "RepoDigests": [            "redis@sha256:db485f2e245b5b3329fdc7eff4eb00f913e09d8feb9ca720788059fdc2ed8339"        ],        "Parent": "",        "Comment": "",        "Created": "2021-12-21T12:42:49.755107412Z",        "Container": "13d25f53410417c5220c8dfe8bd49f06abdbcd69faa62a9b877de02464bb04a3",        "ContainerConfig": {            "Hostname": "13d25f534104",            "Domainname": "",            "User": "",            "AttachStdin": false,            "AttachStdout": false,            "AttachStderr": false,            "ExposedPorts": {                "6379/tcp": {}            },            "Tty": false,            "OpenStdin": false,            "StdinOnce": false,            "Env": [                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",                "GOSU_VERSION=1.12",                "REDIS_VERSION=6.2.6",                "REDIS_DOWNLOAD_URL=http://download.redis.io/releases/redis-6.2.6.tar.gz",                "REDIS_DOWNLOAD_SHA=5b2b8b7a50111ef395bf1c1d5be11e6e167ac018125055daa8b5c2317ae131ab"            ],            "Cmd": [                "/bin/sh",                "-c",                "#(nop) ",                "CMD [\"redis-server\"]"            ],            "Image": "sha256:e093f59d716c95cfce82c676f099b960cc700432ab531388fcedf79932fc81ec",            "Volumes": {                "/data": {}            },            "WorkingDir": "/data",            "Entrypoint": [                "docker-entrypoint.sh"            ],            "OnBuild": null,            "Labels": {}        },        "DockerVersion": "20.10.7",        "Author": "",        "Config": {            "Hostname": "",            "Domainname": "",            "User": "",            "AttachStdin": false,            "AttachStdout": false,            "AttachStderr": false,            "ExposedPorts": {                "6379/tcp": {}            },            "Tty": false,            "OpenStdin": false,            "StdinOnce": false,            "Env": [                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",                "GOSU_VERSION=1.12",                "REDIS_VERSION=6.2.6",                "REDIS_DOWNLOAD_URL=http://download.redis.io/releases/redis-6.2.6.tar.gz",                "REDIS_DOWNLOAD_SHA=5b2b8b7a50111ef395bf1c1d5be11e6e167ac018125055daa8b5c2317ae131ab"            ],            "Cmd": [                "redis-server"            ],            "Image": "sha256:e093f59d716c95cfce82c676f099b960cc700432ab531388fcedf79932fc81ec",            "Volumes": {                "/data": {}            },            "WorkingDir": "/data",            "Entrypoint": [                "docker-entrypoint.sh"            ],            "OnBuild": null,            "Labels": null        },        "Architecture": "amd64",        "Os": "linux",        "Size": 112691373,        "VirtualSize": 112691373,        "GraphDriver": {            "Data": {                "LowerDir": "/var/lib/docker/overlay2/c972eb0db5fc093c31e9cc9313a6f37ae4c14b41d9d54c44b624efb95eea9348/diff:/var/lib/docker/overlay2/85907f4146eae6f77b7a36316676b53e254038e243a893a9d0b8804fdbfb7499/diff:/var/lib/docker/overlay2/1d2a6a063a36c936689bb84b800821d8a9d154b7cd35f950892b4dafc2286c4d/diff:/var/lib/docker/overlay2/2425fa0f80b5ebeb0675c4938fb4aa32a0073c38d36184989ca39e7bd3aa4556/diff:/var/lib/docker/overlay2/0eb7de4be3f166f2f05d9894a151610ee2952e5cf43175faf1ee2f9e1d0ff737/diff",                "MergedDir": "/var/lib/docker/overlay2/e4a684ba8173df23ed7622b4989678e85ed756b3cc7130ac7f643b1c6cc3db48/merged",                "UpperDir": "/var/lib/docker/overlay2/e4a684ba8173df23ed7622b4989678e85ed756b3cc7130ac7f643b1c6cc3db48/diff",                "WorkDir": "/var/lib/docker/overlay2/e4a684ba8173df23ed7622b4989678e85ed756b3cc7130ac7f643b1c6cc3db48/work"            },            "Name": "overlay2"        },        "RootFS": {            "Type": "layers",            "Layers": [                "sha256:2edcec3590a4ec7f40cf0743c15d78fb39d8326bc029073b41ef9727da6c851f",                "sha256:9b24afeb7c2f21e50a686ead025823cd2c6e9730c013ca77ad5f115c079b57cb",                "sha256:4b8e2801e0f956a4220c32e2c8b0a590e6f9bd2420ec65453685246b82766ea1",                "sha256:529cdb636f61e95ab91a62a51526a84fd7314d6aab0d414040796150b4522372",                "sha256:9975392591f2777d6bf4d9919ad1b2c9afa12f9a9b4d260f45025ec3cc9b18ed",                "sha256:8e5669d8329116b8444b9bbb1663dda568ede12d3dbcce950199b582f6e94952"            ]        },        "Metadata": {            "LastTagTime": "0001-01-01T00:00:00Z"        }    }]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以发现在RootFS的Layers有分层。</p><p>分层最大的好处在于<strong>资源共享</strong>，比如有多个镜像都从相同的Base镜像构建而来，那么宿主机只需要在磁盘上保留一份base镜像，同时内存中也只需要加载一份base镜像，这样就可以为所有的容器服务了，而且镜像的每一层都可以被共享。</p><p><strong>理解</strong>：</p><p>所有的Docker的镜像都起始于一个基础镜像层，当进行修改或增加新的内容时，就会在当前镜像层之上，创建新的镜像层。</p><p>举一个简单的例子，例如基于Ubuntu Linux 16.04创建一个新的镜像，这就是新镜像的第一层，如果在该镜像中添加Python包，就会在基础镜像层上创建第二个镜像层；如果继续添加一个安全补丁，就会创建第三个镜像层。</p><p>如下图所示，该镜像当前已经包含3个镜像层。</p><p><img src="/posts/38460/image-20221029183753214.png" alt="镜像分层01"></p><p>在添加额外的镜像层的同时，镜像始终保持是当前所有镜像的组合，理解这一点非常重要。下图中举了一个简单的例子，每个镜像层包含3个文件，而镜像包含了来自两个镜像层的6个文件。</p><p><img src="/posts/38460/image-20221029184603268.png" alt="镜像分层02"></p><p>上面中的镜像层跟之前的图中略有区别，主要目的是便于展示文件。</p><p>下图中展示了一个稍微复杂的三层镜像，在外部看来整个镜像只有6个文件，这是因为最上层的文件7是文件5的一个更新版本。</p><p><img src="/posts/38460/image-20221029184904109.png" alt="镜像分层03"></p><p>这种情况下，上层镜像层中的文件覆盖了底层镜像层中的文件，这样就使得文件的更新版本作为一个新的镜像层添加到镜像中。</p><p>Docker通过存储引擎（快照机制）的方式来实现镜像层的堆栈，并保持多镜像层对外展示为统一的文件系统。</p><p>Linux上可用的存储引擎有AUFS、Overlay2、Device Mapper、Btrfs以及ZFS。顾名思义，每种存储引擎都是基于Linux中对应的文件系统或者块设备技术，并且每种存储引擎都有其独有的性能特点。</p><p>Docker在Windows仅支持Windowsfilter一种存储引擎，该引擎基于NTFS系统之上分层和CoW。</p><p>下图展示了与系统显示相同的三层镜像，所有镜像层堆叠并合并，对外提供统一的视图。</p><p><img src="/posts/38460/image-20221029185525138.png" alt="镜像统一视图"></p><blockquote><p>特点</p></blockquote><p>Docker镜像都是只读的，当容器启动时，一个新的可写层被加载到镜像的顶部。</p><p>这一层就是通常所说的容器层，容器之下的都叫镜像层。</p><p><img src="/posts/38460/image-20221029185820930.png" alt="镜像层"></p><h3 id="Commit镜像">Commit镜像</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker commit  提交容器成为一个新的镜像docker commit -m="提交的描述信息" -a="作者名称" 容器id 目标镜像名:[tag]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>实战测试</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 1.启动一个默认的tomcat# 2.发现这个默认的tomcat是没有webapps应用的，因为官方的镜像默认webapps下面为空# 3.我们自己拷贝进去基本的文件# 4.通过commit提交为一个新的镜像[root@xizou ~]# docker commit -a="xizou" -m="add webapps app" 978a547e22ad tomcat02:1.0sha256:600af0d3c7c965fe45b24d9019b1289d24dc55241ff19935f390a36621f123ea[root@xizou ~]# docker imagesREPOSITORY            TAG       IMAGE ID       CREATED         SIZEtomcat02              1.0       600af0d3c7c9   5 seconds ago   684MBelasticsearch         8.4.3     ce2b9dc7fe85   3 weeks ago     1.26GBnginx                 latest    605c77e624dd   10 months ago   141MBtomcat                latest    fb5657adc892   10 months ago   680MBredis                 latest    7614ae9453d1   10 months ago   113MBcentos                latest    5d0da3dc9764   13 months ago   231MBportainer/portainer   latest    580c0e4e98b0   19 months ago   79.1MB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>当想保持容器的状态，可以通过commit来提交，获得一个镜像，就好比虚拟机的快照。</p><h2 id="参考文章">参考文章</h2><p>本文是笔者通过下列视频教程进行Docker入门学习的记录，有部分修改和补充，转载请注明出处，并附带下面链接。</p><p>1.<a href="https://www.bilibili.com/video/BV1og4y1q7M4/">【B站up主-遇见狂神说】</a></p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
            <tag> Docker技术 </tag>
            
            <tag> 虚拟化 </tag>
            
            <tag> 入门教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>剑指Offer-链表专题</title>
      <link href="/posts/28131.html"/>
      <url>/posts/28131.html</url>
      
        <content type="html"><![CDATA[<h2 id="6-从尾到头打印链表">6. 从尾到头打印链表</h2><h3 id="题目描述-5">题目描述</h3><p>输入一个链表的头节点，按链表从尾到头的顺序返回每个节点的值。（用数组返回）</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:{1, 2, 3}Output:[3, 2, 1]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-5">题解</h3><p><strong>思路1（辅助数组）：</strong><br>创建辅助数组，从头到尾遍历链表，将节点的值存入辅助数组，最后将辅助数组逆序即可。</p><p>时间复杂度O(n)，空间复杂度O(n)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ListNode</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>val <span class="token operator">=</span> x        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">print_list_from_tail_to_head</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">while</span> head<span class="token punctuation">:</span>            res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>head<span class="token punctuation">.</span>val<span class="token punctuation">)</span>            head <span class="token operator">=</span> head<span class="token punctuation">.</span><span class="token builtin">next</span>                <span class="token keyword">return</span> res<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    head <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    a <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> a    a<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>print_list_from_tail_to_head<span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[3, 2, 1]</code></pre><p><strong>思路2（反转链表）：</strong><br>先将链表反转，然后遍历链表，将节点的值加入数组。</p><p>时间复杂度O(n)，空间复杂度O(n)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ListNode</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>val <span class="token operator">=</span> x        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">print_list_from_tail_to_head</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        cur <span class="token operator">=</span> head        pre <span class="token operator">=</span> <span class="token boolean">None</span>        <span class="token keyword">while</span> cur<span class="token punctuation">:</span>            temp <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>            cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> pre            pre <span class="token operator">=</span> cur            cur <span class="token operator">=</span> temp        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        point <span class="token operator">=</span> pre        <span class="token keyword">while</span> point<span class="token punctuation">:</span>            res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>point<span class="token punctuation">.</span>val<span class="token punctuation">)</span>            point <span class="token operator">=</span> point<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">return</span> res            <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    head <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    a <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> a    a<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>print_list_from_tail_to_head<span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[3, 2, 1]</code></pre><h2 id="18-1-删除链表节点">18.1 删除链表节点</h2><h3 id="题目描述-6">题目描述</h3><p>给定单向链表的头指针和一个要删除的节点的值，定义一个函数删除该节点，返回删除后的链表的头节点。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:{2, 5, 1, 9}, 5Output:{2, 1, 9}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-6">题解</h3><p><strong>思路（穿针引线）：</strong><br>先找到要删除的元素，然后删除点，需要考虑要删除的节点为头节点的特殊情况。</p><p>时间复杂度O(n)，空间复杂度O(1)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ListNode</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>val <span class="token operator">=</span> x        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">delete_node</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">:</span>        cur <span class="token operator">=</span> head        <span class="token keyword">if</span> cur<span class="token punctuation">.</span>val <span class="token operator">==</span> val<span class="token punctuation">:</span>            <span class="token keyword">return</span> head<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">while</span> cur <span class="token keyword">and</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>val <span class="token operator">==</span> val<span class="token punctuation">:</span>                cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>                <span class="token keyword">return</span> head<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    head <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    a <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>    head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> a    a<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    b<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> c    val <span class="token operator">=</span> <span class="token number">5</span>    cur <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delete_node<span class="token punctuation">(</span>head<span class="token punctuation">,</span> val<span class="token punctuation">)</span>    <span class="token keyword">while</span> cur<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span>        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>219</code></pre><h2 id="18-2-删除链表中重复的结点">18.2 删除链表中重复的结点</h2><h3 id="题目描述-7">题目描述</h3><p>在一个排序的链表中，存在重复的结点，请删除该链表中重复的结点，重复的结点不保留，返回链表头指针。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:{1, 2, 3, 3, 4, 4, 5}Output:{1, 2, 5}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-7">题解</h3><p><strong>思路1（直接比较删除）：</strong><br>因为排序的链表中，重复的结点都是连在一起的，因此比较容易找到重复的结点，然后将所有连续相同的结点都跳过，连接不相同的第一个结点。</p><p>时间复杂度O(n)，空间复杂度O(1)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ListNode</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>val <span class="token operator">=</span> x        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">delete_duplication</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">None</span>        res <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>        res<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> head        cur <span class="token operator">=</span> res        <span class="token keyword">while</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token keyword">and</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>val <span class="token operator">==</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>val<span class="token punctuation">:</span>                temp <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>val                <span class="token keyword">while</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token keyword">and</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>val <span class="token operator">==</span> temp<span class="token punctuation">:</span>                    cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>                        <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    head <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    a <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    d <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    e <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    f <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> a    a<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    b<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> c    c<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> d    d<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> e    e<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> f    cur <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delete_duplication<span class="token punctuation">(</span>head<span class="token punctuation">)</span>    <span class="token keyword">while</span> cur<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span>        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>125</code></pre><p><strong>思路2（哈希表）：</strong><br>使用哈希表辅助统计是否重复。</p><p>时间复杂度O(n)，空间复杂度O(n)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ListNode</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>val <span class="token operator">=</span> x        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">delete_duplication</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">None</span>        hash_map <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        cur <span class="token operator">=</span> head        <span class="token keyword">while</span> cur<span class="token punctuation">:</span>            <span class="token keyword">if</span> cur<span class="token punctuation">.</span>val <span class="token keyword">not</span> <span class="token keyword">in</span> hash_map<span class="token punctuation">:</span>                hash_map<span class="token punctuation">[</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                hash_map<span class="token punctuation">[</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>                    res <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>        res<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> head        cur <span class="token operator">=</span> res        <span class="token keyword">while</span> cur <span class="token keyword">and</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> hash_map<span class="token punctuation">[</span>cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>val<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">:</span>                cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    head <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    a <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    d <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    e <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    f <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> a    a<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    b<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> c    c<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> d    d<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> e    e<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> f    cur <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delete_duplication<span class="token punctuation">(</span>head<span class="token punctuation">)</span>    <span class="token keyword">while</span> cur<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span>        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>125</code></pre><h2 id="22-链表中倒数第K个结点">22. 链表中倒数第K个结点</h2><h3 id="题目描述-8">题目描述</h3><p>输入一个长度为n的链表，返回链表中倒数第k个结点，如果链表长度小于k，则返回None。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:{1, 2, 3, 4, 5}, 2Output:{4, 5}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-8">题解</h3><p><strong>思路（快慢指针）：</strong><br>创建快慢两个指针，首先快指针先走k步，然后快慢指针同时走，知道快指针走到链表尾部，此时，慢指针指向的就是链表的倒数第k个结点。需要注意的是链表长度小于k时的处理。</p><p>时间复杂度O(n)，空间复杂度O(1)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ListNode</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>val <span class="token operator">=</span> x        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">find_kth_to_tail</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>        fast <span class="token operator">=</span> head        slow <span class="token operator">=</span> head        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> fast<span class="token punctuation">:</span>                fast <span class="token operator">=</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">None</span>        <span class="token keyword">while</span> fast<span class="token punctuation">:</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span>            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span><span class="token builtin">next</span>                <span class="token keyword">return</span> slow<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    head <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    a <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    d <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> a    a<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    b<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> c    c<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> d    k <span class="token operator">=</span> <span class="token number">2</span>    cur <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find_kth_to_tail<span class="token punctuation">(</span>head<span class="token punctuation">,</span> k<span class="token punctuation">)</span>    <span class="token keyword">while</span> cur<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span>        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>45</code></pre><h2 id="23-链表中环的入口结点">23. 链表中环的入口结点</h2><h3 id="题目描述-9">题目描述</h3><p>请判断链表是否有环，如果没有则返回None，如果有则返回该链表的环的入口结点。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:{1, 6}, {3, 5, 2, 4}Output:3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-9">题解</h3><p><strong>思路（快慢指针）：</strong><br>创建快慢两个指针，快指针每次走2步，慢指针每次走1步，当快慢指针相遇且不为空时，说明链表有环。</p><p>假设快指针在环中走了n圈，慢指针在环中走了m圈才相遇，且进入环之前的距离为x，环入口到相遇点的距离为y，相遇点到环入口的距离为z，则：</p><p>快指针走过的路程=x+n(y+z)+y，慢指针走过的路程=x+m(y+z)+y,而快指针走过的路程=2倍慢指针走过的路程，得到：x=(n-2m)(y+z)-y=(n-2m-1)(y+z)+z.</p><p>此时，设置一指针从头出发，每次走一步，另一指针从相遇点出发，每次也走一步，两指针会在环的入口结点相遇。</p><p>时间复杂度O(n)，空间复杂度O(1)</p><p><img src="https://uploadfiles.nowcoder.com/images/20220330/397721558_1648627978736/C56F671FC2966A5E586BD6E56E19D3E3" alt="快慢指针"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ListNode</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>val <span class="token operator">=</span> x        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">entry_node_of_loop</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">:</span>        fast <span class="token operator">=</span> head        slow <span class="token operator">=</span> head        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> fast <span class="token keyword">or</span> <span class="token keyword">not</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">None</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">if</span> fast <span class="token operator">==</span> slow<span class="token punctuation">:</span>                <span class="token keyword">break</span>        fast <span class="token operator">=</span> head        <span class="token keyword">while</span> fast <span class="token operator">!=</span> slow<span class="token punctuation">:</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span>            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span><span class="token builtin">next</span>                <span class="token keyword">return</span> slow<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    head <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    a <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    d <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    e <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> a    a<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    b<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> c    c<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> d    d<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> e    e<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    cur <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>entry_node_of_loop<span class="token punctuation">(</span>head<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>3</code></pre><h2 id="24-反转链表">24. 反转链表</h2><h3 id="题目描述-10">题目描述</h3><p>给定一个单链表的头结点head，长度为n，反转该链表后，返回新链表的表头。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:{2, 1, 5, 3, 4}Output:{4, 3, 5, 1, 2}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-10">题解</h3><p><strong>思路1（迭代）：</strong><br>设置两个指针，一个指针指向当前结点，一个指针指向当前结点的上一个结点。设置指向上一个结点的指针初始为空。遍历原始链表，每到一个结点，将遇到的结点指针逆向。断掉当前结点向后的指针，改为向前。</p><p>时间复杂度O(n)，空间复杂度O(1)</p><p><img src="https://uploadfiles.nowcoder.com/images/20211001/397721558_1633084777359/E53A90674EDC6B8D31549D8DF4E7B38E" alt="反转链表"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ListNode</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>val <span class="token operator">=</span> x        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">reverse_list</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head <span class="token keyword">or</span> <span class="token keyword">not</span> head<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> head        pre <span class="token operator">=</span> <span class="token boolean">None</span>        cur <span class="token operator">=</span> head        <span class="token keyword">while</span> cur<span class="token punctuation">:</span>            temp <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>            cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> pre            pre <span class="token operator">=</span> cur            cur <span class="token operator">=</span> temp                <span class="token keyword">return</span> pre<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    head <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    a <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    d <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> a    a<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    b<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> c    c<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> d    cur <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reverse_list<span class="token punctuation">(</span>head<span class="token punctuation">)</span>    <span class="token keyword">while</span> cur<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span>        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>43512</code></pre><h3 id="题解-11">题解</h3><p><strong>思路2（递归）：</strong><br>对于每个结点，递归向下遍历到最后的尾结点，然后往上依次逆转两个结点，将逆转后的本层结点指向None，返回最底层上来的头部结点。</p><p>时间复杂度O(n)，空间复杂度O(n)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ListNode</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>val <span class="token operator">=</span> x        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">reverse_list</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head <span class="token keyword">or</span> <span class="token keyword">not</span> head<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> head        temp <span class="token operator">=</span> head<span class="token punctuation">.</span><span class="token builtin">next</span>        head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span>        new_head <span class="token operator">=</span> self<span class="token punctuation">.</span>reverse_list<span class="token punctuation">(</span>temp<span class="token punctuation">)</span>        temp<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> head                <span class="token keyword">return</span> new_head<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    head <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    a <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    d <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> a    a<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    b<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> c    c<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> d    cur <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reverse_list<span class="token punctuation">(</span>head<span class="token punctuation">)</span>    <span class="token keyword">while</span> cur<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span>        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>43512</code></pre><h2 id="25-合并两个排序的链表">25. 合并两个排序的链表</h2><h3 id="题目描述-11">题目描述</h3><p>输入两个递增的链表，单个链表的长度为n，合并这两个链表并使新链表中的结点仍然是递增的。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:{1, 3, 4, 10, 18}, {2, 3, 7, 8, 9}Output:{1, 2, 3, 3, 4, 7, 8, 9, 10, 18}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-12">题解</h3><p><strong>思路1（双指针迭代）：</strong><br>定义两个指针分别指向两个链表的头部，比较两个指针指向的结点值，从中取出最小的元素，然后指向最小元素的指针向后走，直到两个指针中任一个走到尾部。最后在将另一个链表的剩余部分全部取出。</p><p>时间复杂度O(n)，空间复杂度O(1)</p><p><img src="https://uploadfiles.nowcoder.com/images/20211001/397721558_1633086591658/82953D04639BD2356F6032F90DAF845F" alt="双指针"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ListNode</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>val <span class="token operator">=</span> x        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">merge</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head1<span class="token punctuation">,</span> head2<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head1<span class="token punctuation">:</span>            <span class="token keyword">return</span> head2        <span class="token keyword">if</span> <span class="token keyword">not</span> head2<span class="token punctuation">:</span>            <span class="token keyword">return</span> head1        p <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        q <span class="token operator">=</span> p        <span class="token keyword">while</span> head1 <span class="token keyword">and</span> head2<span class="token punctuation">:</span>            <span class="token keyword">if</span> head1<span class="token punctuation">.</span>val <span class="token operator">&lt;</span> head2<span class="token punctuation">.</span>val<span class="token punctuation">:</span>                p<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> head1                head1 <span class="token operator">=</span> head1<span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                p<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> head2                head2 <span class="token operator">=</span> head2<span class="token punctuation">.</span><span class="token builtin">next</span>            p <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">if</span> head1<span class="token punctuation">:</span>            p<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> head1        <span class="token keyword">if</span> head2<span class="token punctuation">:</span>            p<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> head2                <span class="token keyword">return</span> q<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    head1 <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    a <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    d <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>    head1<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> a    a<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    b<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> c    c<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> d        head2 <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    e <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    f <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>    g <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>    h <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>    head2<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> e    e<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> f    f<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> g    g<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> h        cur <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>merge<span class="token punctuation">(</span>head1<span class="token punctuation">,</span> head2<span class="token punctuation">)</span>    <span class="token keyword">while</span> cur<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span>        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>123347891018</code></pre><h3 id="题解-13">题解</h3><p><strong>思路2（双指针递归）：</strong><br>每次比较两个链表当前结点的值，然后取较小值的链表指针往后，另一个不变，两段子链表作为新的链表送入递归中，递归回来的结果加在较小值的结点的后面，当两个链表有一个为空时，递归终止。</p><p>时间复杂度O(n)，空间复杂度O(n)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ListNode</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>val <span class="token operator">=</span> x        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">merge</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head1<span class="token punctuation">,</span> head2<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head1<span class="token punctuation">:</span>            <span class="token keyword">return</span> head2        <span class="token keyword">if</span> <span class="token keyword">not</span> head2<span class="token punctuation">:</span>            <span class="token keyword">return</span> head1        <span class="token keyword">if</span> head1<span class="token punctuation">.</span>val <span class="token operator">&lt;</span> head2<span class="token punctuation">.</span>val<span class="token punctuation">:</span>            head1<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>head1<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">,</span> head2<span class="token punctuation">)</span>            <span class="token keyword">return</span> head1        <span class="token keyword">else</span><span class="token punctuation">:</span>            head2<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>head1<span class="token punctuation">,</span> head2<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> head2<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    head1 <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    a <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    d <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>    head1<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> a    a<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    b<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> c    c<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> d        head2 <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    e <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    f <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>    g <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>    h <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>    head2<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> e    e<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> f    f<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> g    g<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> h        cur <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>merge<span class="token punctuation">(</span>head1<span class="token punctuation">,</span> head2<span class="token punctuation">)</span>    <span class="token keyword">while</span> cur<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span>        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>123347891018</code></pre><h2 id="35-复杂链表的复制">35. 复杂链表的复制</h2><h3 id="题目描述-12">题目描述</h3><p>输入一个复杂链表（每个结点中有节点值，以及两个指针，一个指向下一个结点，另一个特殊指针random指向一个随机结点，请对此链表进行深拷贝，并返回拷贝后的头结点。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:{1, 2, 3, 3, 1, 1}Output:{1, 2, 3, 3, 1, 1}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-14">题解</h3><p><strong>思路（双指针）：</strong><br>先遍历链表，对每个结点新建一个拷贝结点，并插入到该结点之后，然后使用双指针再次遍历链表，两个指针每次都一共两步，一个指针遍历原始结点，另一个指针遍历拷贝结点，拷贝结点的随机指针跟随原始结点，指向原始结点随机指针的下一位。最后再次使用双指针遍历链表，每次越过后一位相连，即拆分为两个链表。</p><p>时间复杂度O(n)，空间复杂度O(1)</p><p><img src="https://uploadfiles.nowcoder.com/images/20220423/397721558_1650683274480/D83430A7F5827D198AD11AAFBBF96B0C" alt="双指针"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">RandomListNode</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>label <span class="token operator">=</span> x        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span>        self<span class="token punctuation">.</span>random <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">clone</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head<span class="token punctuation">:</span>            <span class="token keyword">return</span> head        cur <span class="token operator">=</span> head        <span class="token keyword">while</span> cur<span class="token punctuation">:</span>            clone <span class="token operator">=</span> RandomListNode<span class="token punctuation">(</span>cur<span class="token punctuation">.</span>label<span class="token punctuation">)</span>            clone<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>            cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> clone            cur <span class="token operator">=</span> clone<span class="token punctuation">.</span><span class="token builtin">next</span>        cur <span class="token operator">=</span> head        clone <span class="token operator">=</span> head<span class="token punctuation">.</span><span class="token builtin">next</span>        res <span class="token operator">=</span> head<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">while</span> cur<span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> cur<span class="token punctuation">.</span>random<span class="token punctuation">:</span>                clone<span class="token punctuation">.</span>random <span class="token operator">=</span> <span class="token boolean">None</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                clone<span class="token punctuation">.</span>random <span class="token operator">=</span> cur<span class="token punctuation">.</span>random<span class="token punctuation">.</span><span class="token builtin">next</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">if</span> clone<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>                clone <span class="token operator">=</span> clone<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>        cur <span class="token operator">=</span> head        clone <span class="token operator">=</span> head<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">while</span> cur<span class="token punctuation">:</span>            cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">if</span> clone<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>                clone<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> clone<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>            clone <span class="token operator">=</span> clone<span class="token punctuation">.</span><span class="token builtin">next</span>                    <span class="token keyword">return</span> res<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    head <span class="token operator">=</span> RandomListNode<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    a <span class="token operator">=</span> RandomListNode<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> RandomListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> a    a<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    head<span class="token punctuation">.</span>random <span class="token operator">=</span> b    a<span class="token punctuation">.</span>random <span class="token operator">=</span> head    b<span class="token punctuation">.</span>ramdom <span class="token operator">=</span> head            p <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>clone<span class="token punctuation">(</span>head<span class="token punctuation">)</span>    cur <span class="token operator">=</span> p    <span class="token keyword">while</span> cur<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>label<span class="token punctuation">)</span>        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>    <span class="token keyword">while</span> p<span class="token punctuation">:</span>        <span class="token keyword">if</span> p<span class="token punctuation">.</span>random<span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>random<span class="token punctuation">.</span>label<span class="token punctuation">)</span>        p <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token builtin">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>12331</code></pre><h2 id="52-两个链表的第一个公共结点">52. 两个链表的第一个公共结点</h2><h3 id="题目描述-13">题目描述</h3><p>输入两个无环的单向链表，找出他们的第一个公共结点，如果没有公共节点则返回空。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:{1,2,3},{4,5},{6,7}Output:{6, 7}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-15">题解</h3><p><strong>思路（双指针法）：</strong><br>创建两个指针分别指向两链表的初始结点，然后让指针A遍历链表1，让指针B遍历链表2，当指针A和指针B都遍历完各自的节点后，让指针A遍历链表2，让指针B遍历链表1，直到两个指针指向的结点先相等。</p><p>时间复杂度O(m+n)，空间复杂度O(1)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ListNode</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>val <span class="token operator">=</span> x        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">find_first_common_node</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head1<span class="token punctuation">,</span> head2<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head1 <span class="token keyword">or</span> <span class="token keyword">not</span> head2<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">None</span>        p<span class="token punctuation">,</span> q <span class="token operator">=</span> head1<span class="token punctuation">,</span> head2        <span class="token keyword">while</span> p <span class="token operator">!=</span> q<span class="token punctuation">:</span>            p <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token keyword">if</span> p <span class="token keyword">else</span> head2            q <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token keyword">if</span> q <span class="token keyword">else</span> head1                <span class="token keyword">return</span> p<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    head1 <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    a <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    head1<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> a    a<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> b    head2 <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    c <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    head2<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> c    e <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>    f <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>    b<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> e    e<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> f    c<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> e            cur <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find_first_common_node<span class="token punctuation">(</span>head1<span class="token punctuation">,</span> head2<span class="token punctuation">)</span>    <span class="token keyword">while</span> cur<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span>        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>67</code></pre><h2 id="参考文章-2">参考文章</h2><p>本文是笔者通过下列网站学习的记录，有部分修改和补充，转载请注明出处，并附带下面链接。</p><ol><li><a href="http://www.cyc2018.xyz/%E7%AE%97%E6%B3%95/%E5%89%91%E6%8C%87%20Offer%20%E9%A2%98%E8%A7%A3/%E5%89%91%E6%8C%87%20Offer%20%E9%A2%98%E8%A7%A3%20-%20%E7%9B%AE%E5%BD%95.html">【CS-Notes剑指Offer题解】</a></li><li><a href="https://www.nowcoder.com/exam/oj/ta?page=1&amp;tpId=13&amp;type=13">【牛客网剑指Offer】</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 剑指Offer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 剑指Offer </tag>
            
            <tag> 链表 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>剑指Offer-双指针专题</title>
      <link href="/posts/57152.html"/>
      <url>/posts/57152.html</url>
      
        <content type="html"><![CDATA[<h2 id="57-1-和为S的两个数字">57.1 和为S的两个数字</h2><h3 id="题目描述">题目描述</h3><p>在有序数组中找出两个数，使得和为给定的数S。如果有多对数字的和等于S，输出两个数的乘积最小的。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:[1, 2, 4, 7, 11, 15], 15Output:[4, 11]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解">题解</h3><p><strong>思路（双指针法）：</strong><br>使用双指针，一个指针指向元素较小的值，一个指针指向元素较大的值。指向较小元素的指针从头向尾遍历，指向较大元素的指针从尾向头遍历。</p><p>时间复杂度O(n)，空间复杂度O(1)</p><p><img src="https://uploadfiles.nowcoder.com/images/20220420/397721558_1650457554074/06BDB11626D2FD0CA1EBF6C2777FD95C" alt="双指针法"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">find_numbers_with_sum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">:</span>        i<span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>        <span class="token keyword">while</span> i <span class="token operator">&lt;</span> j<span class="token punctuation">:</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span>            <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">:</span>                i <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                j <span class="token operator">-=</span> <span class="token number">1</span>                <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span>    target <span class="token operator">=</span> <span class="token number">15</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find_numbers_with_sum<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[4, 11]</code></pre><h2 id="57-2-和为S的连续正数序列">57.2 和为S的连续正数序列</h2><h3 id="题目描述-2">题目描述</h3><p>输出所有和为S的连续整数序列，数据范围为0到100。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:9Output:[[2, 3, 4], [4, 5]]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-2">题解</h3><p><strong>思路（滑动窗口）：</strong><br>区间从[1, 2]开始，两个指针分别指向区间首和尾，使用公式计算区间内子元素之和，如果等于目标数，则记录下该区间的所有数字，同时左区间指针向右，若区间内的序列和小于目标数，则右区间扩展。若区间内的序列和大于目标数，则左区间向右。</p><p>时间复杂度O(n)，空间复杂度O(sqrt(n))</p><p><img src="https://uploadfiles.nowcoder.com/images/20211203/397721558_1638516207843/20A9A4EB486B238F2B1D5DCE1BDF64B6" alt="滑动窗口"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">find_continuous_sequence</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> target_sum<span class="token punctuation">)</span><span class="token punctuation">:</span>        l <span class="token operator">=</span> <span class="token number">1</span>        r <span class="token operator">=</span> <span class="token number">2</span>        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">while</span> l <span class="token operator">&lt;</span> r<span class="token punctuation">:</span>            total <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>            <span class="token keyword">if</span> total <span class="token operator">==</span> target_sum<span class="token punctuation">:</span>                res<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                l <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">elif</span> total <span class="token operator">&lt;</span> target_sum<span class="token punctuation">:</span>                r <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                l <span class="token operator">+=</span> <span class="token number">1</span>                <span class="token keyword">return</span> res    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find_continuous_sequence<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[[2, 3, 4], [4, 5]]</code></pre><h2 id="58-1-翻转单词序列">58.1 翻转单词序列</h2><h3 id="题目描述-3">题目描述</h3><p>给定一个句子，翻转单词的顺序，然后输出。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:"This is a sample"Output:"sample a is This"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-3">题解</h3><p><strong>思路：</strong><br>先翻转整个句子，再翻转每个单词</p><p>时间复杂度O(n)，空间复杂度O(1)</p><p><img src="https://uploadfiles.nowcoder.com/images/20211009/397721558_1633768032973/7269932FDD7F8BA760B50D8A119A60C0" alt="翻转单词序列"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">reverse_sentence</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> strs<span class="token punctuation">)</span><span class="token punctuation">:</span>        strs <span class="token operator">=</span> strs<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        s <span class="token operator">=</span> strs<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token string">" "</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    strs <span class="token operator">=</span> <span class="token string">"This is a sample"</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reverse_sentence<span class="token punctuation">(</span>strs<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>sample a is This</code></pre><h2 id="左旋转字符串">左旋转字符串</h2><h3 id="题目描述-4">题目描述</h3><p>将字符串S从第K位置分隔成两个子字符串，并交换这两个子字符串的位置</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:S = "abcXYZdef"K = 3Output:"XYZdefabc"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-4">题解</h3><p><strong>思路1（三次翻转）：</strong><br>先整个字符串翻转，然后将按K分割字符串，len(字符串)-k左侧的子字符串翻转，再将len(字符串)-k右侧子字符串翻转</p><p>时间复杂度O(n)，空间复杂度O(1)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">left_rotate_string</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> strs<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>strs<span class="token punctuation">)</span>        <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token string">""</span>        <span class="token keyword">if</span> n <span class="token operator">&lt;</span> k<span class="token punctuation">:</span>            k <span class="token operator">=</span> k <span class="token operator">%</span> n        strs <span class="token operator">=</span> strs<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>                <span class="token keyword">return</span> strs<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token operator">-</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> strs<span class="token punctuation">[</span>n<span class="token operator">-</span>k<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    strs <span class="token operator">=</span> <span class="token string">"abcXYZdef"</span>    k <span class="token operator">=</span> <span class="token number">3</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left_rotate_string<span class="token punctuation">(</span>strs<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>XYZdefabc</code></pre><p><strong>思路2（拼接）：</strong></p><p>将字符串后面再加一个字符串，然后取K到K+len(字符串)部分即可，注意保证K要小于len(字符串)。</p><p>时间复杂度O(n)，空间复杂度O(1)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">left_rotate_string</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> strs<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>strs<span class="token punctuation">)</span>        <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token string">""</span>        <span class="token keyword">if</span> n <span class="token operator">&lt;</span> k<span class="token punctuation">:</span>            k <span class="token operator">=</span> k <span class="token operator">%</span> n        strs <span class="token operator">=</span> strs <span class="token operator">*</span> <span class="token number">2</span>        <span class="token keyword">return</span> strs<span class="token punctuation">[</span>k<span class="token punctuation">:</span>n<span class="token operator">+</span>k<span class="token punctuation">]</span>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    strs <span class="token operator">=</span> <span class="token string">"abcXYZdef"</span>    k <span class="token operator">=</span> <span class="token number">3</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left_rotate_string<span class="token punctuation">(</span>strs<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>XYZdefabc</code></pre><h2 id="参考文章">参考文章</h2><p>本文是笔者通过下列网站学习的记录，有部分修改和补充，转载请注明出处，并附带下面链接。</p><ol><li><a href="http://www.cyc2018.xyz/%E7%AE%97%E6%B3%95/%E5%89%91%E6%8C%87%20Offer%20%E9%A2%98%E8%A7%A3/%E5%89%91%E6%8C%87%20Offer%20%E9%A2%98%E8%A7%A3%20-%20%E7%9B%AE%E5%BD%95.html">【CS-Notes剑指Offer题解】</a></li><li><a href="https://www.nowcoder.com/exam/oj/ta?page=1&amp;tpId=13&amp;type=13">【牛客网剑指Offer】</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 剑指Offer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 剑指Offer </tag>
            
            <tag> 双指针 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>剑指Offer-栈队列堆专题</title>
      <link href="/posts/275.html"/>
      <url>/posts/275.html</url>
      
        <content type="html"><![CDATA[<h2 id="9-用两个栈实现队列">9. 用两个栈实现队列</h2><h3 id="题目描述-14">题目描述</h3><p>用两个栈来实现一个队列，完成队列的push和pop操作</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:["push 1", "push 2", "pop", "pop"]Output:1, 2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-16">题解</h3><p><strong>思路（双栈法）：</strong><br>元素进栈后，只能优先弹出末尾元素，但是队列每次弹出的却是最先进去的元素，如果能够将栈中元素全部取出来，才能访问到最前面的元素，因此，使用另一个栈来辅助取出。</p><p>插入与删除的时间复杂度都是O(1)，空间复杂度O(n)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>stack1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span>stack2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">def</span> <span class="token function">push</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>stack1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>node<span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">pop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> self<span class="token punctuation">.</span>stack1<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>stack2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>stack1<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        res <span class="token operator">=</span> self<span class="token punctuation">.</span>stack2<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">while</span> self<span class="token punctuation">.</span>stack2<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>stack1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>stack2<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> res<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    queue <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span>    queue<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    queue<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>12</code></pre><h2 id="30-包含min函数的栈">30. 包含min函数的栈</h2><h3 id="题目描述-15">题目描述</h3><p>实现一个包含min()函数的栈，该方法返回当前栈中最小的值。此栈包含的方法有：</p><p>push(value)：将value压入栈中<br>pop()：弹出栈顶元素<br>top()：获取栈顶元素<br>min()：获取栈中最小元素</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:["push -1", "push 2", "min", "top", "pop", "push 1", "top", "min"]Output:-1, 2, 1, -1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-17">题解</h3><p><strong>思路1（双栈法）：</strong><br>初始化一个原始栈和最小值栈，最小栈存储每次跟原栈中元素比较后的最小元素。</p><p>时间复杂度O(1)，空间复杂度O(n)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span>min_stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">def</span> <span class="token function">push</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>node<span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>min_stack<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>min_stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>node<span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>min_stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> node<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>min_stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>min_stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                self<span class="token punctuation">.</span>min_stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>node<span class="token punctuation">)</span>            <span class="token keyword">def</span> <span class="token function">pop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>min_stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">top</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token keyword">def</span> <span class="token function">min</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>min_stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    stack <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span>    stack<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>    stack<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span>top<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>    stack<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span>top<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>-121-1</code></pre><p><strong>思路2（元组）：</strong><br>使用一个栈，栈中元素是元组，元组的第一个元素是数值，第二个元素是最小值。</p><p>时间复杂度O(1)，空间复杂度O(1)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">def</span> <span class="token function">push</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">pop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">top</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        <span class="token keyword">def</span> <span class="token function">min</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    stack <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span>    stack<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>    stack<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span>top<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>    stack<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span>top<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>-121-1</code></pre><h2 id="31-栈的压入、弹出序列">31. 栈的压入、弹出序列</h2><h3 id="题目描述-16">题目描述</h3><p>输入两个整数序列，第一个序列表示栈的压入顺序，请判断第二个序列是否为栈的弹出顺序，假设压入的所有数字均不相等。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:[1, 2, 3, 4, 5], [4, 5, 3, 2, 1]Output:True<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-18">题解</h3><p><strong>思路1（辅助栈）：</strong><br>使用一个辅助栈来模拟，对于入栈序列，只要栈为空，则序列依次入栈，如果遇到一个栈等于出栈序列的元素，则放弃入栈，先让该元素出来。如果按照这样的方式两个序列都访问完，则说明是可以匹配入栈出栈次序的。</p><p>时间复杂度O(n)，空间复杂度O(n)</p><p><img src="https://uploadfiles.nowcoder.com/images/20220421/397721558_1650532143383/7F25B229A4900F6E066BE03E92B0492E" alt="辅助栈"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">is_pop_order</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> push_v<span class="token punctuation">,</span> pop_v<span class="token punctuation">)</span><span class="token punctuation">:</span>        stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        j <span class="token operator">=</span> <span class="token number">0</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>push_v<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">while</span> j <span class="token operator">&lt;</span> n <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>stack<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">or</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> pop_v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>push_v<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                j <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">if</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> pop_v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>                stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">False</span>                <span class="token keyword">return</span> <span class="token boolean">True</span>                <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    push_v <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>    pop_v <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>is_pop_order<span class="token punctuation">(</span>push_v<span class="token punctuation">,</span> pop_v<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>True</code></pre><h3 id="题解-19">题解</h3><p><strong>思路2（原地栈）：</strong><br>遍历push数组时，用下标n表示栈空间，用j表示出栈序列的下标，遍历每一个待入栈的元素，加入栈顶，当栈不为空时，栈顶等于当前出栈序列，就出栈，同时减少n，最后如果栈空间大小n为0时，代表全部出栈完成，否则不匹配。</p><p>时间复杂度O(n)，空间复杂度O(1)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">is_pop_order</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> push_v<span class="token punctuation">,</span> pop_v<span class="token punctuation">)</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token number">0</span>        j <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> num <span class="token keyword">in</span> push_v<span class="token punctuation">:</span>            push_v<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> num            <span class="token keyword">while</span> n <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token keyword">and</span> push_v<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">==</span> pop_v<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                j <span class="token operator">+=</span> <span class="token number">1</span>                n <span class="token operator">-=</span> <span class="token number">1</span>            n <span class="token operator">+=</span> <span class="token number">1</span>                <span class="token keyword">return</span> <span class="token boolean">True</span> <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token boolean">False</span>                <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    push_v <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>    pop_v <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>is_pop_order<span class="token punctuation">(</span>push_v<span class="token punctuation">,</span> pop_v<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>True</code></pre><h2 id="40-最小的k个数">40. 最小的k个数</h2><h3 id="题目描述-17">题目描述</h3><p>给定一个长度为n的可能有重复值的数组，找出其中不去重的最小的k个数。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:[4, 5, 1, 6, 2, 7, 3, 8], 4Output:[1, 2, 3, 4]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-20">题解</h3><p><strong>思路1（堆排序）：</strong><br>要找到最小的k个元素，只需要准备k个数字，之后每次遇到一个数字能够快速的与这k个数字中最大的值进行比较，每次将最大的值替换掉，那么最后剩余的就是k个最小的数字了。优先考虑大根堆，限制堆的大小为k，那么堆顶就是k个数字的最大值，如果需要替换，则将这个最大值拿出，加入新的元素就行。</p><p>时间复杂度O(nlogk), 空间复杂度O(k)</p><p><img src="https://uploadfiles.nowcoder.com/images/20210722/397721558_1626945012109/6A105C4B5BE11C9FE59934C5B4E772BF" alt="堆排序"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> heapq<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">get_least_numbers</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> k <span class="token keyword">and</span> k <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>            pq <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span>                heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>pq<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> pq<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>                    heapq<span class="token punctuation">.</span>heapreplace<span class="token punctuation">(</span>pq<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span>                res<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> pq<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>pq<span class="token punctuation">)</span>                <span class="token keyword">return</span> res    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>    k <span class="token operator">=</span> <span class="token number">4</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_least_numbers<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[4, 3, 2, 1]</code></pre><p><strong>思路2（sort排序法）：</strong><br>对数组按照递增顺序进行排序，取前k个元素。</p><p>时间复杂度O(nlogn), 空间复杂度O(1)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">get_least_numbers</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">if</span> k <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">or</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> res        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span>k<span class="token punctuation">]</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>    k <span class="token operator">=</span> <span class="token number">4</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_least_numbers<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[1, 2, 3, 4]</code></pre><h2 id="41-1-数据流中的中位数">41.1 数据流中的中位数</h2><h3 id="题目描述-18">题目描述</h3><p>如何得到一个数据流中的中位数？如果从数据流中读出奇数个数值，那么中位数就是所有数值排序之后位于中间的数值。如果从数据流中读出偶数个数值，那么中位数就是所有数值排序之后中间两个数的平均值。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:[5,2,3,4,1,6,7,0,8]Output:[5.00, 3.50, 3.00, 3.50, 3.00, 3.50, 4.00, 3.50, 4.00]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-21">题解</h3><p><strong>思路1（插入排序）：</strong><br>使用插入排序的思路，对每个输入的元素，遍历已经有序的数组，将其插入到属于它的位置。</p><p>插入的时间复杂度是O(n)，获取中位数的时间复杂度是O(1)，空间复杂度O(n)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>val <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">def</span> <span class="token function">insert</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>val<span class="token punctuation">.</span>append<span class="token punctuation">(</span>num<span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            i <span class="token operator">=</span> <span class="token number">0</span>            <span class="token keyword">while</span> i <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> num <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>val<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token keyword">break</span>                i <span class="token operator">+=</span> <span class="token number">1</span>            self<span class="token punctuation">.</span>val<span class="token punctuation">.</span>insert<span class="token punctuation">(</span>i<span class="token punctuation">,</span> num<span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">get_median</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>val<span class="token punctuation">)</span>        <span class="token keyword">if</span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>val<span class="token punctuation">[</span>n <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">]</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>val<span class="token punctuation">[</span>n <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>val<span class="token punctuation">[</span>n <span class="token operator">//</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2.0</span>                <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    s <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>53.533.533.543.54</code></pre><h3 id="题解-22">题解</h3><p><strong>思路2（插入排序）：</strong><br>中位数是数组中间的数字或两个数字的均值，他是数组较小的一半元素中最大的一个，同时也是较大的一半元素中最小的一个，因此可以使用堆排序。约定奇数个元素时取大顶堆的顶部值，偶数个元素时取两堆顶的平均值。</p><p>插入的时间复杂度是O(logn)，获取中位数的时间复杂度是O(1)，空间复杂度O(n)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> heapq<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span><span class="token builtin">max</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span><span class="token builtin">min</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">def</span> <span class="token function">insert</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">:</span>        heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> num<span class="token punctuation">)</span><span class="token punctuation">)</span>        heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> self<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">get_median</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1.0</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> self<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>                <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    s <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>5.03.53.03.53.03.54.03.54.0</code></pre><h2 id="41-2-字符流中第一个不重复的字符">41.2 字符流中第一个不重复的字符</h2><h3 id="题目描述-19">题目描述</h3><p>请实现一个函数用来找出字符流中第一个只出现一次的字符。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:"google"Output:"ggg#ll"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-23">题解</h3><p><strong>思路（哈希表）：</strong><br>使用哈希表统计字符出现的次数，在insert函数中对输入的字符，加到字符串最后，然后统计出现次数。在first_appearing_once函数中遍历该字符串，对于每个字符查找哈希表，返回第一个计数为1的字符，如果遍历完字符串后都没，则返回#。</p><p>插入的时间复杂度是O(1)，查询的时间复杂度是O(n)，空间复杂度O(n)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>strs <span class="token operator">=</span> <span class="token string">""</span>        self<span class="token punctuation">.</span>hash_map <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">insert</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> char<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>strs <span class="token operator">+=</span> char        <span class="token keyword">if</span> char <span class="token keyword">in</span> self<span class="token punctuation">.</span>hash_map<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>hash_map<span class="token punctuation">[</span>char<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>hash_map<span class="token punctuation">[</span>char<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>                    <span class="token keyword">def</span> <span class="token function">first_appearing_once</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> c <span class="token keyword">in</span> self<span class="token punctuation">.</span>strs<span class="token punctuation">:</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>hash_map<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> c                <span class="token keyword">return</span> <span class="token string">'#'</span>                <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    s <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">"g"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>first_appearing_once<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">"o"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>first_appearing_once<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">"o"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>first_appearing_once<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">"g"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>first_appearing_once<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">"l"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>first_appearing_once<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">"e"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>first_appearing_once<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>ggg#ll</code></pre><h2 id="59-滑动窗口的最大值">59. 滑动窗口的最大值</h2><h3 id="题目描述-20">题目描述</h3><p>给定一个长度为n的数组num和滑动窗口的大小size，找出所有滑动窗口里数值的最大值。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:[2, 3, 4, 2, 6, 2, 5, 1], 3Output:[4, 4, 6, 6, 6, 5]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-24">题解</h3><p><strong>思路（暴力法）：</strong><br>直接遍历数组，遍历起始位置为0，终止位置为n-size，求取该区间最大值即可</p><p>时间复杂度O(mn)，空间复杂度O(1)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">max_in_windows</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>        <span class="token keyword">if</span> n <span class="token operator">&lt;</span> size <span class="token keyword">or</span> size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n <span class="token operator">-</span> size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            res<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">:</span> i <span class="token operator">+</span> size<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token keyword">return</span> res    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>    size <span class="token operator">=</span> <span class="token number">3</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>max_in_windows<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[4, 4, 6, 6, 6, 5]</code></pre><h2 id="参考文章-3">参考文章</h2><p>本文是笔者通过下列网站学习的记录，有部分修改和补充，转载请注明出处，并附带下面链接。</p><ol><li><a href="http://www.cyc2018.xyz/%E7%AE%97%E6%B3%95/%E5%89%91%E6%8C%87%20Offer%20%E9%A2%98%E8%A7%A3/%E5%89%91%E6%8C%87%20Offer%20%E9%A2%98%E8%A7%A3%20-%20%E7%9B%AE%E5%BD%95.html">【CS-Notes剑指Offer题解】</a></li><li><a href="https://www.nowcoder.com/exam/oj/ta?page=1&amp;tpId=13&amp;type=13">【牛客网剑指Offer】</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 剑指Offer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 剑指Offer </tag>
            
            <tag> 栈队列堆 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>剑指Offer-数组与矩阵专题</title>
      <link href="/posts/54318.html"/>
      <url>/posts/54318.html</url>
      
        <content type="html"><![CDATA[<h2 id="3-数组中重复的数字">3. 数组中重复的数字</h2><h3 id="题目描述">题目描述</h3><p>在一个长度为n的数组里，所有数字在0到n-1的范围内。数组中某些数字是重复的，但是不知道有几个数字重复的，也不知道每个数字重复几次。请找出数组中任意一个重复的数字。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:[2, 3, 1, 0, 2, 5]Output:2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解">题解</h3><p><strong>思路1（位置重排）：</strong><br>数组长度在0到n-1的范围内，如果数字没有重复，则这些数字排序后将会和下标一一对应。因此，可遍历数组，每次检查数字与下标是否一致，一致说明它在属于它的位置上，如果不一致则将其交换到该数字作为下标的位置上，如果交换过程中，那个位置已经出现等于它下标的数字，则出现了重复。</p><p>时间复杂度 O(n)，空间复杂度O(1)</p><p><img src="https://uploadfiles.nowcoder.com/images/20220421/397721558_1650511844449/985457EF766F228F555A31DC0363FE81" alt="位置重排"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">duplicate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> i<span class="token punctuation">:</span>                <span class="token keyword">continue</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    nums<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>                <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>duplicate<span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>2</code></pre><p><strong>思路2（哈希表）：</strong><br>使用哈希表记录元素出现的次数，如果遇到元素已经在哈希表上出现过，则它就重复了。</p><p>时间复杂度 O(n)，空间复杂度O(n)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">is_duplicate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">)</span><span class="token punctuation">:</span>        hash_map <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> num <span class="token keyword">in</span> nums<span class="token punctuation">:</span>            <span class="token keyword">if</span> num <span class="token keyword">in</span> hash_map<span class="token punctuation">:</span>                <span class="token keyword">return</span> num            <span class="token keyword">else</span><span class="token punctuation">:</span>                hash_map<span class="token punctuation">[</span>num<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>                <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>is_duplicate<span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>2</code></pre><h2 id="4-二维数组中的查找">4. 二维数组中的查找</h2><h3 id="题目描述-2">题目描述</h3><p>给定一个二维数组，其每一行从左到右递增排序，从上到下也是递增排序。给定一个数，判断这个数是否在二维数组中。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:array = [  [1,2,8,9],  [2,4,9,12],  [4,7,10,13],  [6,8,11,15]]target = 7Output:True<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-2">题解</h3><p><strong>思路（二分查找）：</strong><br>根据题意，二维数组的左下元素要大于它上方的元素，小于它右方的元素，而右上元素要大于它左方的元素，小于它下方的元素，利用此心智，将查找部分分成一个大区间和一个小区间。先获取数组的两个边长，判断特殊情况，然后以左下角元素为起点，若它是小于目标元素，则往右移动索引，若大于目标元素，则向上移动索引，如果移动到数组边界也没找到，则说明数组中不存在目标元素。</p><p>时间复杂度 O(m + n)，空间复杂度O(1)</p><p><img src="https://uploadfiles.nowcoder.com/images/20210727/397721558_1627369615572/81B83FAE4B34DCEFE9C1EB670AE1CCB0" alt="二分查找"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">find_target</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> target<span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">or</span> <span class="token builtin">len</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">False</span>        row<span class="token punctuation">,</span> col <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        i<span class="token punctuation">,</span> j <span class="token operator">=</span> row <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span>        <span class="token keyword">while</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token keyword">and</span> j <span class="token operator">&lt;</span> col<span class="token punctuation">:</span>            <span class="token keyword">if</span> target <span class="token operator">==</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">True</span>            <span class="token keyword">elif</span> target <span class="token operator">&lt;</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                i <span class="token operator">-=</span> <span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                j <span class="token operator">+=</span> <span class="token number">1</span>                <span class="token keyword">return</span> <span class="token boolean">False</span>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    array <span class="token operator">=</span> <span class="token punctuation">[</span>      <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">]</span>    <span class="token punctuation">]</span>    target <span class="token operator">=</span> <span class="token number">7</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find_target<span class="token punctuation">(</span>target<span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>True</code></pre><h2 id="5-替换空格">5. 替换空格</h2><h3 id="题目描述-3">题目描述</h3><p>将一个字符串中的空格替换成"%20"</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:"We Are Happy"Output:"We%20Are%20Happy"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-3">题解</h3><p><strong>思路（字符串相加）</strong>：<br>遍历字符串，如果字符为空格，则替换成%20，如果不是，则直接复制。</p><p><img src="https://uploadfiles.nowcoder.com/images/20210929/397721558_1632892080952/E442EF47D02F00479CB49CA6A2F75337" alt="字符串相加"></p><p>时间复杂度 O(n)，空间复杂度O(n)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">replace_space</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">:</span>        res <span class="token operator">=</span> <span class="token string">""</span>        <span class="token keyword">for</span> ch <span class="token keyword">in</span> s<span class="token punctuation">:</span>            <span class="token keyword">if</span> ch <span class="token operator">==</span> <span class="token string">" "</span><span class="token punctuation">:</span>                res <span class="token operator">+=</span> <span class="token string">"%20"</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                res <span class="token operator">+=</span> ch                <span class="token keyword">return</span> res<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    s <span class="token operator">=</span> <span class="token string">"We Are Happy"</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace_space<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>We%20Are%20Happy</code></pre><h2 id="29-顺时针打印矩阵">29. 顺时针打印矩阵</h2><h3 id="题目描述-4">题目描述</h3><p>按照顺时针的方向，从外到里打印矩阵的值。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:[  [1, 2, 3, 4],  [5, 6, 7, 8],  [9, 10, 11, 12],  [13, 14, 15, 16]]Output:[1, 2, 3, 4, 8, 12, 16, 15, 14, 13, 9, 5, 6, 7, 11, 10]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-4">题解</h3><p><strong>思路（模拟）：</strong><br>一层一层从外到里打印，观察可知每一层打印都有相同的处理方式，唯一不同的是上下左右边界的不同。打印顺序为：从左到右打印一行-&gt;从上到下打印一行-&gt;从右到左打印一行-&gt;从下到上打印一行。</p><p>时间复杂度O(mn)，空间复杂度O(1)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">print_matrix</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> matrix<span class="token punctuation">)</span><span class="token punctuation">:</span>        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        r1<span class="token punctuation">,</span> r2<span class="token punctuation">,</span> c1<span class="token punctuation">,</span> c2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>        <span class="token keyword">while</span> r1 <span class="token operator">&lt;=</span> r2 <span class="token keyword">and</span> c1 <span class="token operator">&lt;=</span> c2<span class="token punctuation">:</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>c1<span class="token punctuation">,</span> c2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>r1<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>r1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>c2<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> r1 <span class="token operator">!=</span> r2<span class="token punctuation">:</span>                <span class="token keyword">for</span> w <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>c2 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> c1 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>r2<span class="token punctuation">]</span><span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> c1 <span class="token operator">!=</span> c2<span class="token punctuation">:</span>                <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>r2 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> r1<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>c1<span class="token punctuation">]</span><span class="token punctuation">)</span>            r1 <span class="token operator">+=</span> <span class="token number">1</span>            r2 <span class="token operator">-=</span> <span class="token number">1</span>            c1 <span class="token operator">+=</span> <span class="token number">1</span>            c2 <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token keyword">return</span> res    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    matrix <span class="token operator">=</span> <span class="token punctuation">[</span>      <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">]</span>    <span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>print_matrix<span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[1, 2, 3, 4, 8, 12, 16, 15, 14, 13, 9, 5, 6, 7, 11, 10]</code></pre><h2 id="50-第一个只出现一次的字符">50. 第一个只出现一次的字符</h2><h3 id="题目描述-5">题目描述</h3><p>在一个长为n的字符串中找到第一个只出现一次的字符，并返回它的位置，如果没有则返回-1。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">Input:"google"Output:4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="题解-5">题解</h3><p><strong>思路（哈希表）：</strong><br>首先遍历字符串，使用哈希表对每个字符出现次数进行统计，然后再遍历字符，遇到哈希表统计次数为1的字符就是第一个只出现一次的字符。</p><p>时间复杂度O(n)，空间复杂度O(1)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">first_not_repeating_char</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> strs<span class="token punctuation">)</span><span class="token punctuation">:</span>        hash_map <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> s <span class="token keyword">in</span> strs<span class="token punctuation">:</span>            <span class="token keyword">if</span> s <span class="token keyword">in</span> hash_map<span class="token punctuation">:</span>                hash_map<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                hash_map<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>strs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> hash_map<span class="token punctuation">[</span>strs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> i        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    strs <span class="token operator">=</span> <span class="token string">"google"</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first_not_repeating_char<span class="token punctuation">(</span>strs<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>4</code></pre><h2 id="参考文章-2">参考文章</h2><p>本文是笔者通过下列网站学习的记录，有部分修改和补充，转载请注明出处，并附带下面链接。</p><ol><li><a href="http://www.cyc2018.xyz/%E7%AE%97%E6%B3%95/%E5%89%91%E6%8C%87%20Offer%20%E9%A2%98%E8%A7%A3/%E5%89%91%E6%8C%87%20Offer%20%E9%A2%98%E8%A7%A3%20-%20%E7%9B%AE%E5%BD%95.html">【CS-Notes剑指Offer题解】</a></li><li><a href="https://www.nowcoder.com/exam/oj/ta?page=1&amp;tpId=13&amp;type=13">【牛客网剑指Offer】</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 剑指Offer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 剑指Offer </tag>
            
            <tag> 数组与矩阵 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十大排序算法</title>
      <link href="/posts/22092.html"/>
      <url>/posts/22092.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-选择排序">1. 选择排序</h2><p>思路：首先从序列中选择最小元素，将它与序列的第一个元素交换位置，再从序列剩下的元素中选择最小的元素，将它与序列的第二个元素交换位置，不断进行这样的操作，直到将整个序列排序。</p><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/selectionSort.gif" alt="选择排序"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">select_sort</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            idx <span class="token operator">=</span> i            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> arr<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                    idx <span class="token operator">=</span> j            <span class="token keyword">if</span> idx <span class="token operator">!=</span> i<span class="token punctuation">:</span>                arr<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>idx<span class="token punctuation">]</span>            <span class="token keyword">return</span> arr<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序前：</span><span class="token interpolation"><span class="token punctuation">{</span>arr<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序后：</span><span class="token interpolation"><span class="token punctuation">{</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>select_sort<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>排序前：[3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]排序后：[2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]</code></pre><h2 id="2-冒泡排序">2. 冒泡排序</h2><p>思路：从左到右不断交换序列相邻逆序的元素，在一轮的循环之后，可以让未排序的最大元素上浮到右侧，持续每次对越来越少的元素重复上面的步骤。优化：在一轮循环中，如果没有发生交换，则说明序列已经是有序的，此时可以直接退出。</p><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/bubbleSort.gif" alt="冒泡排序"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">bubble_sort</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>            flag <span class="token operator">=</span> <span class="token boolean">False</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n <span class="token operator">-</span> i<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>  arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span>                    flag <span class="token operator">=</span> <span class="token boolean">True</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> flag<span class="token punctuation">:</span>                 <span class="token keyword">break</span>                <span class="token keyword">return</span> arr    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序前: </span><span class="token interpolation"><span class="token punctuation">{</span>arr<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序后：</span><span class="token interpolation"><span class="token punctuation">{</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>bubble_sort<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>排序前: [3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]排序后：[2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]</code></pre><h2 id="3-插入排序">3. 插入排序</h2><p>思路：插入元素时，在左侧已排序序列中从后到前扫描，找到相应位置并插入，插入到左侧已经排序的序列中，使得插入之后左侧序列依旧有序。</p><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/insertionSort.gif" alt="插入排序"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">insert_sort</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span>                <span class="token keyword">return</span> arr<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序前：</span><span class="token interpolation"><span class="token punctuation">{</span>arr<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序后：</span><span class="token interpolation"><span class="token punctuation">{</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>insert_sort<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>排序前：[3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]排序后：[2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]</code></pre><h2 id="4-希尔排序">4. 希尔排序</h2><p>思路：对于大规模的序列，插入排序很慢，因为它只能交换相邻元素，每次只能将逆序数量减1。希尔排序先将整个待排序的序列分割为若干个子序列分别进行直接插入排序，通过交换不相邻的元素，每次减少的逆序数量大于1。希尔排序使用插入排序对间隔h的序列进行排序，通过不断减少h，最后令h=1，可以使整个序列有序。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">shell_sort</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>        h <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">while</span> h <span class="token operator">&lt;</span> n <span class="token operator">//</span> <span class="token number">3</span><span class="token punctuation">:</span>            h <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">*</span> h <span class="token operator">+</span> <span class="token number">1</span>                <span class="token keyword">while</span> h <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> h <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span>h<span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token keyword">if</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> h<span class="token punctuation">]</span><span class="token punctuation">:</span>                        arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> h<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> h<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span>            h <span class="token operator">=</span> h <span class="token operator">//</span> <span class="token number">3</span>                <span class="token keyword">return</span> arr<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序前：</span><span class="token interpolation"><span class="token punctuation">{</span>arr<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序后：</span><span class="token interpolation"><span class="token punctuation">{</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>shell_sort<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>                    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>排序前：[3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]排序后：[2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]</code></pre><h2 id="5-归并排序">5. 归并排序</h2><p>思路：归并排序采用的是分治法，即将序列分为两部分，分别进行排序，然后归并起来。首先申请空间用来存放合并后的序列，其大小为两个已排序序列之和，然后设定两个指针，分别指向为两个已排序序列的起始位置，比较两个指针所指向的元素，选择相对较小的元素存入合并空间，并移动指针到下一个位置，重复上述操作直到某一指针到达序列尾，将另一序列剩下的所有元素直接复制到合并序列尾。</p><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/mergeSort.gif" alt="归并排序"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">merge_sort</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>        <span class="token keyword">if</span> n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> arr        mid_idx <span class="token operator">=</span> n <span class="token operator">//</span> <span class="token number">2</span>        left<span class="token punctuation">,</span> right <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token punctuation">:</span>mid_idx<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>mid_idx<span class="token punctuation">:</span><span class="token punctuation">]</span>                <span class="token keyword">return</span> self<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>self<span class="token punctuation">.</span>merge_sort<span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>merge_sort<span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">merge</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">while</span> left <span class="token keyword">and</span> right<span class="token punctuation">:</span>            <span class="token keyword">if</span> left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> right<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>left<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>right<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> left<span class="token punctuation">:</span>            result <span class="token operator">+=</span> left        <span class="token keyword">if</span> right<span class="token punctuation">:</span>            result <span class="token operator">+=</span> right                <span class="token keyword">return</span> result                <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序前：</span><span class="token interpolation"><span class="token punctuation">{</span>arr<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序后：</span><span class="token interpolation"><span class="token punctuation">{</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>merge_sort<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>排序前：[3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]排序后：[2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]</code></pre><h2 id="6-快速排序">6. 快速排序</h2><p>思路：快速排序通过从数列中挑出一个元素作为基准，将序列分为两个子序列，左子序列所有元素小于等于切分元素，右子序列所有元素大于等于切分元素，然后再将这两个子序列切分排序重复上述操作，最终得到排序好的序列。</p><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/quickSort.gif" alt="快速排序"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">quick_sort</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">,</span> left_idx<span class="token punctuation">,</span> right_idx<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> left_idx <span class="token operator">&lt;</span> right_idx<span class="token punctuation">:</span>            partition_idx <span class="token operator">=</span> self<span class="token punctuation">.</span>partition<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> left_idx<span class="token punctuation">,</span> right_idx<span class="token punctuation">)</span>            self<span class="token punctuation">.</span>quick_sort<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> left_idx<span class="token punctuation">,</span> partition_idx <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>quick_sort<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> partition_idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> right_idx<span class="token punctuation">)</span>            <span class="token keyword">return</span> arr        <span class="token keyword">def</span> <span class="token function">partition</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">,</span> left_idx<span class="token punctuation">,</span> right_idx<span class="token punctuation">)</span><span class="token punctuation">:</span>        pivot <span class="token operator">=</span> arr<span class="token punctuation">[</span>right_idx<span class="token punctuation">]</span>        i <span class="token operator">=</span> left_idx <span class="token operator">-</span> <span class="token number">1</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>left_idx<span class="token punctuation">,</span> right_idx<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> pivot<span class="token punctuation">:</span>                i <span class="token operator">+=</span> <span class="token number">1</span>                arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>right_idx<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>right_idx<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span>                <span class="token keyword">return</span> i <span class="token operator">+</span> <span class="token number">1</span>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序前：</span><span class="token interpolation"><span class="token punctuation">{</span>arr<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序后：</span><span class="token interpolation"><span class="token punctuation">{</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>quick_sort<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>排序前：[3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]排序后：[2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]</code></pre><h2 id="7-堆排序">7. 堆排序</h2><p>思路：利用堆这种数据结构所设计的一种排序算法，堆是一棵完全二叉树的结构，并同时满足堆积的性质：即子结点的键值或索引总是小于（或者大于）其父节点，即大顶堆（小顶堆）。把最大元素和当前堆中序列的最后一个元素交换位置，并且不删除它。</p><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/heapSort.gif" alt="堆排序"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>build_max_heap<span class="token punctuation">(</span>arr<span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">build_max_heap</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>length <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>heapify<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">heapify</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">:</span>        left <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> i <span class="token operator">+</span> <span class="token number">1</span>        right <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> i <span class="token operator">+</span> <span class="token number">2</span>        largest <span class="token operator">=</span> i        <span class="token keyword">if</span> left <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>length <span class="token keyword">and</span> arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>largest<span class="token punctuation">]</span><span class="token punctuation">:</span>            largest <span class="token operator">=</span> left        <span class="token keyword">if</span> right <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>length <span class="token keyword">and</span> arr<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>largest<span class="token punctuation">]</span><span class="token punctuation">:</span>            largest <span class="token operator">=</span> right        <span class="token keyword">if</span> largest <span class="token operator">!=</span> i<span class="token punctuation">:</span>            arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>largest<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>largest<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            self<span class="token punctuation">.</span>heapify<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> largest<span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">heap_sort</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            self<span class="token punctuation">.</span>length <span class="token operator">-=</span> <span class="token number">1</span>            self<span class="token punctuation">.</span>heapify<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> arr<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序前：</span><span class="token interpolation"><span class="token punctuation">{</span>arr<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序后：</span><span class="token interpolation"><span class="token punctuation">{</span>Solution<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">.</span>heap_sort<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>排序前：[3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]排序后：[2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]</code></pre><h2 id="8-计数排序">8. 计数排序</h2><p>思路：核心在于将输入的数据值转化为键存储在额外开辟的数组空间，先找出待排序数组中最大和最小的元素，统计数组中每个值为i的元素出现的次数，存入数组的第i项，对所有的计数累加，反向填充目标数组，将每个元素i放在新数组的第i项，每放一个元素就将对应位置减去1。</p><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/countingSort.gif" alt="计数排序"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">counting_sort</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">:</span>        max_value <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>        bucket <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max_value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>        sort_idx <span class="token operator">=</span> <span class="token number">0</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> bucket<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                bucket<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>            bucket<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>         <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>max_value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">while</span> bucket<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>                arr<span class="token punctuation">[</span>sort_idx<span class="token punctuation">]</span> <span class="token operator">=</span> j                sort_idx <span class="token operator">+=</span> <span class="token number">1</span>                bucket<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span>                <span class="token keyword">return</span> arr    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序前：</span><span class="token interpolation"><span class="token punctuation">{</span>arr<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序后：</span><span class="token interpolation"><span class="token punctuation">{</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>counting_sort<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>排序前：[3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]排序后：[2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]</code></pre><h2 id="9-桶排序">9. 桶排序</h2><p>思路：桶排序是计数排序的升级版，利用了函数的映射关系。需要注意，在额外空间充足的情况下，尽量增大桶的数量，尽量使用映射函数能够将n个数据均匀的分配到k个桶中。</p><p>元素分布在桶中：</p><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/Bucket_sort_1.svg_.png" alt="桶排序-a"></p><p>元素在每个桶中排序:</p><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/Bucket_sort_2.svg_.png" alt="桶排序-b"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">bucket_sort</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">:</span>        max_value <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>        bucket <span class="token operator">=</span> <span class="token punctuation">{</span>i<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>max_value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>            num <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            bucket<span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>num<span class="token punctuation">)</span>        arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>max_value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> bucket<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>                arr <span class="token operator">+=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>bucket<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> arr    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序前：</span><span class="token interpolation"><span class="token punctuation">{</span>arr<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序后：</span><span class="token interpolation"><span class="token punctuation">{</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>bucket_sort<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>排序前：[3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]排序后：[2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]</code></pre><h2 id="10-基数排序">10. 基数排序</h2><p>思路：将整数按位数切割成不同的数字，然后按每个位数分别比较。</p><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/radixSort.gif" alt="基数排序"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">radix_sort</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">:</span>        max_value <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>        iter_cnt <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>max_value<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>iter_cnt<span class="token punctuation">)</span><span class="token punctuation">:</span>            bucket <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span>            <span class="token keyword">for</span> n <span class="token keyword">in</span> arr<span class="token punctuation">:</span>                idx <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">//</span> <span class="token number">10</span> <span class="token operator">**</span> i<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span>                bucket<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>n<span class="token punctuation">)</span>            arr<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> b <span class="token keyword">in</span> bucket<span class="token punctuation">:</span>                arr <span class="token operator">+=</span> b            <span class="token keyword">return</span> arr<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序前：</span><span class="token interpolation"><span class="token punctuation">{</span>arr<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"排序后：</span><span class="token interpolation"><span class="token punctuation">{</span>Solution<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>radix_sort<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>排序前：[3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]排序后：[2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]</code></pre><h2 id="11-小结">11. 小结</h2><table><thead><tr><th>排序算法</th><th>稳定性</th><th>时间复杂度</th><th>空间复杂度</th><th>备注</th></tr></thead><tbody><tr><td>选择排序</td><td>×</td><td>N^2</td><td>1</td><td></td></tr><tr><td>冒泡排序</td><td>√</td><td>N^2</td><td>1</td><td></td></tr><tr><td>插入排序</td><td>√</td><td>N^2</td><td>1</td><td>时间复杂度和初始顺序有关</td></tr><tr><td>希尔排序</td><td>×</td><td>NlogN</td><td>1</td><td>改进版插入排序</td></tr><tr><td>归并排序</td><td>√</td><td>NlogN</td><td>N</td><td></td></tr><tr><td>快速排序</td><td>×</td><td>NlogN</td><td>logN</td><td></td></tr><tr><td>堆排序</td><td>×</td><td>NlogN</td><td>1</td><td>无法利用局部性原理</td></tr><tr><td>计数排序</td><td>√</td><td>n + k</td><td>k</td><td></td></tr><tr><td>桶排序</td><td>√</td><td>n + k</td><td>n + k</td><td></td></tr><tr><td>基数排序</td><td>√</td><td>n x k</td><td>n + k</td><td></td></tr></tbody></table><h2 id="参考文章">参考文章</h2><p>本文是笔者通过下列网站学习排序算法的记录，有部分修改和补充，转载请注明出处，并附带下面链接。</p><ol><li><a href="http://www.cyc2018.xyz/%E7%AE%97%E6%B3%95/%E5%9F%BA%E7%A1%80/%E7%AE%97%E6%B3%95%20-%20%E6%8E%92%E5%BA%8F.html">【CS-Notes】</a></li><li><a href="https://www.runoob.com/w3cnote/ten-sorting-algorithm.html">【菜鸟教程排序算法】</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 排序 </tag>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C#语言进阶学习笔记</title>
      <link href="/posts/16133.html"/>
      <url>/posts/16133.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-特性">1. 特性</h2><p><strong>特性（Attribute）是一种用于在程序运行时传递各种元素（例如类、方法、结构、枚举等）行为信息的声明性代码</strong>。使用特性可以将元数据（例如编译器指令、注释、描述、方法和类等信息）添加到程序中。<strong>.Net Framework</strong> 提供了两种类型的特性，分别是预定义特性和自定义特性。</p><p>在C#中，特性具有以下属性：</p><ul><li>使用特性可以向程序中添加元数据，元数据是指程序中各种元素的相关信息，所有.NET程序中都包含一组指定的元数据；</li><li>可以将一个或多个特性应用于整个程序、模块或者较小的程序元素（例如类或属性）中；</li><li>特性可以像方法和属性一样接收自变量；</li><li>程序可使用反射来检查自己的元数据或其他程序中的元数据</li></ul><p>定义特性的语法如下：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">[attribute(positional_parameters, name_parameter=value, ...)]element<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>其中，<code>[]</code>中用来定义特性的名称和值，<code>positional_parameters</code>用来指定基本信息，<code>name_parameter</code>用来指定可选信息</p><h3 id="1-1-预定义特性">1.1 预定义特性</h3><p><strong>.Net Framework</strong>中提供了三个预定义的属性：<code>AttributeUsage</code>、<code>Conditional</code>和<code>Obsolete</code>。</p><p><strong>AttributeUsage</strong></p><p>预定义特性<code>AttributeUsage</code>用来描述如何使用自定义特性类，其中定义了可以引用特性的项目类型。其语法如下：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">[AttributeUsage(    validon,    AllowMultiple = allowmultiple,    Inherited = inherited)]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>参数<code>validon</code>用来定义特性可被放置的语言元素，它是枚举器<strong>AttributeTargets</strong>的值的集合，默认是<strong>AttributeTargets.All</strong></li><li>参数<code>allowmultiple</code>（可选参数）用来为该特性的<strong>AllowMultiple</strong>属性（property）提供一个布尔值，默认为false，单用的，如果为true表示多用的</li><li>参数<code>inherited</code>（可选参数）用来对该特性的Inherited属性（property）提供一个布尔值，默认为false，不被继承的，如果为true表示可被派生类继承</li></ul><p>示例代码：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AttributeUsage</span><span class="token attribute-arguments"><span class="token punctuation">(</span>AttributeTargets<span class="token punctuation">.</span>Class <span class="token operator">|</span>                AttributeTargets<span class="token punctuation">.</span>Constructor <span class="token operator">|</span>                 AttributeTargets<span class="token punctuation">.</span>Field <span class="token operator">|</span>                 AttributeTargets<span class="token punctuation">.</span>Method <span class="token operator">|</span>                AttributeTargets<span class="token punctuation">.</span>Property<span class="token punctuation">,</span>                AllowMultiple<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Conditional</strong></p><p>预定义特性<code>Conditional</code>用来定义条件方法。<code>Conditional</code>属性通过测试条件编译符号来确定适用的条件，当运行到一个条件方法调用时，是否执行该调用，要根据出现该调用时是否已定义了此符号来确定。使用<code>Conditional</code>是封闭<code>#if</code>和<code>#endif</code>内部方法的替代方法，它更整洁、别致、减少出错的机会。其语法如下：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">[Conditional(conditionalSymbol)]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>示例代码：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token preprocessor property">#<span class="token directive keyword">define</span> DEBUG</span><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Diagnostics</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ConditionalTest</span>    <span class="token punctuation">{</span>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Conditional</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"DEBUG"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            MyClass<span class="token punctuation">.</span><span class="token function">Message</span><span class="token punctuation">(</span><span class="token string">"Func1函数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Conditional</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"BUG"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            MyClass<span class="token punctuation">.</span><span class="token function">Message</span><span class="token punctuation">(</span><span class="token string">"Func2函数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            MyClass<span class="token punctuation">.</span><span class="token function">Message</span><span class="token punctuation">(</span><span class="token string">"Main函数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">Func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">Func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Message</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> msg<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// Main函数</span>    <span class="token comment">// Func1函数</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Obsolete</strong></p><p>预定义特性<code>Obsolete</code>用来标记不应该被使用的程序，可以使用它来通知编译器放弃某个目标元素。例如当你需要使用一个新方法来代替类中的某个旧方法时，就可以使用该特性将旧方法标记为<code>Obsolete</code>（过时）的并输出一条信息，来提示我们应该使用新方法替代旧方法。其语法格式如下：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">[Obsolete(message)][Obsolete(message, iserror)]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>参数<code>message</code>是一个用来描述项目为什么过时以及用什么替代的字符串</li><li>参数<code>iserror</code>是一个布尔值，默认值为false，如果设置为true，则编译器会把该项目当做一个错误</li></ul><p>示例代码：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ObsoleteTest</span>    <span class="token punctuation">{</span>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Obsolete</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"OldMethod已弃用，请改用NewMethod"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OldMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"已弃用的函数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">NewMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"新定义的函数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">OldMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">// Main.cs(17,13): error CS0619: `Application.ObsoleteTest.OldMethod()' is obsolete: `OldMethod已弃用，请改用NewMethod'</span>        <span class="token comment">// Compilation failed: 1 error(s), 0 warnings</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-2-自定义特性">1.2 自定义特性</h3><p><strong>.Net Framework</strong>允许创建自定义特性，自定义特性不仅可以用于存储声明性的信息，还可以在运行时被检索。创建并使用自定义特性分为四个步骤：</p><ul><li>声明自定义特性</li><li>构建自定义特性</li><li>在目标程序上应用自定义特性</li><li>通过反射访问自定义特性</li></ul><p>最后一步涉及编写一个简单的程序来读取元数据以便查找各种符号。元数据是有关数据或用于描述其他数据信息的数据，该程序应在运行时使用反射来访问属性。</p><p><strong>声明自定义特性</strong></p><p>自定义特性应该继承System.Attribute类，如下所示：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AttributeUsage</span><span class="token attribute-arguments"><span class="token punctuation">(</span>    AttributeTargets<span class="token punctuation">.</span>All<span class="token punctuation">,</span>    AllowMultiple <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    Inherited <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SomethingAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Attribute</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>构建自定义特性</strong></p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SomethingAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Attribute</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">string</span></span> data<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name    <span class="token punctuation">{</span>        <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> name<span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token keyword">set</span> <span class="token punctuation">{</span> name <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Data    <span class="token punctuation">{</span>        <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> data<span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token keyword">set</span> <span class="token punctuation">{</span> data <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">SomethingAttribute</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> data<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>应用自定义特性</strong></p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">[SomethingAttribute("Amy", data = "Name is Amy")][SomethingAttribute("Tom", data = "Name is Tom")]class Test</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>访问自定义特性</strong></p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token class-name">Type</span> t <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Test</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name"><span class="token keyword">var</span></span> something <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">GetCustomAttributes</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">SomethingAttribute</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name">SomethingAttribute</span> each <span class="token keyword">in</span> something<span class="token punctuation">)</span><span class="token punctuation">{</span>    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Name: {0}"</span><span class="token punctuation">,</span> each<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Data: {0}"</span><span class="token punctuation">,</span> each<span class="token punctuation">.</span>Data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-反射">2. 反射</h2><p>**反射（Reflection）是指程序可以访问、检查、修改它本身行为或状态的一种能力。**反射中提供了用来描述程序集、模块和类型的对象，可以使用反射动态地创建类型的实例，并将类型绑定到现有对象，或者从现有对象中获取类型，然后调用其方法或访问其字段和属性。如果代码中使用了特性，也可以利用反射来访问。</p><h3 id="2-1-反射优缺点">2.1 反射优缺点</h3><p>优点：</p><ul><li>反射提高了程序的灵活性和扩展性</li><li>降低耦合性，提高自适应能力</li><li>运行程序创建和控制任何类的对象，无需提前硬编码目标类</li></ul><p>缺点：</p><ul><li>性能问题：使用反射基本上是一种解释操作，用于字段和方法接入时要远慢于直接代码。因此反射机制主要应用在对灵活性和扩展性要求高的系统框架上，普通程序不建议使用</li><li>使用反射会模糊程序内部逻辑，程序希望在源代码中看到程序逻辑，反射却绕过了源代码的技术，因而会带来维护的问题，反射代码比相应的直接代码更复杂</li></ul><h3 id="2-2-反射用途">2.2 反射用途</h3><ul><li>允许在运行时查看特性信息</li><li>允许审查集合中的各种类型，以及实例化这些类型</li><li>允许延迟绑定的方法和属性</li><li>允许在运行时创建新类型，然后使用这些类型执行一些任务</li></ul><h3 id="2-3-查看元数据">2.3 查看元数据</h3><p>使用反射可以查看特性信息，<strong>System.Reflection</strong>类的 <strong>MemberInfo</strong> 对象需要被初始化，用于发现与类相关的特性，为此可以定义目标类的一个对象：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AttributeUsage</span><span class="token attribute-arguments"><span class="token punctuation">(</span>AttributeTargets<span class="token punctuation">.</span>All<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelpAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Attribute</span></span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">string</span></span> Url<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Topic    <span class="token punctuation">{</span>        <span class="token keyword">get</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> topic<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">set</span>        <span class="token punctuation">{</span>            topic <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">HelpAttribute</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> url<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>Url <span class="token operator">=</span> url<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">string</span></span> topic<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HelpAttribute</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Infomation to the class MyClass"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">System<span class="token punctuation">.</span>Reflection<span class="token punctuation">.</span>MemberInfo</span> info <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyClass</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">object</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> attributes <span class="token operator">=</span> info<span class="token punctuation">.</span><span class="token function">GetCustomAttributes</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> attributes<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>attributes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// HelpAttribute</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-属性">3. 属性</h2><p><strong>属性（Property）是类、结构和接口的命名成员</strong>。类或结构中的成员变量或方法称为域，属性是域的扩展，且可以使用相同的语法来访问，他们使用访问器让私有域的值可被读写或操作。</p><p>属性不会确定存储位置，他们具有可读写或计算他们值的访问器。</p><p>例如，一个名为Student的类，带有age、name或code的私有域，我们不能在类的范围外直接访问这些域，但是可以拥有访问这些私有域的属性。</p><h3 id="3-1-get-set访问器">3.1 get/set访问器</h3><p>属性的访问器包括获取或写入属性的可执行语句，访问器可包含一个<strong>get访问器</strong>或一个<strong>set访问器</strong>，或者两种都包含。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Teacher</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">string</span></span> name <span class="token operator">=</span> <span class="token string">"NAN"</span><span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">int</span></span> age <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name        <span class="token punctuation">{</span>            <span class="token keyword">get</span>             <span class="token punctuation">{</span>                <span class="token keyword">return</span> name<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">set</span>            <span class="token punctuation">{</span>                name <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment">// 简写形式</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>                <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token string">"Name = "</span> <span class="token operator">+</span> Name <span class="token operator">+</span> <span class="token string">", Age = "</span> <span class="token operator">+</span> Age<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">PropertiesTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Teacher</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Teacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            t<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"Zhang"</span><span class="token punctuation">;</span>            t<span class="token punctuation">.</span>Age <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Teacher Info: {0}"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>            t<span class="token punctuation">.</span>Age <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Teacher Info: {0}"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Teacher Info: Name = Zhang, Age = 26</span>            <span class="token comment">// Teacher Info: Name = Zhang, Age = 27</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-2-抽象属性">3.2 抽象属性</h3><p>在抽象类中可以拥有抽象属性，这些属性会在派生类中实现。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Person</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Person</span></span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Project <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">"NAN"</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">"NAN"</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token interpolation-string"><span class="token string">$"Project = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Project</span><span class="token punctuation">}</span></span><span class="token string">, Name = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Name</span><span class="token punctuation">}</span></span><span class="token string">, Age = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Age</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">AbstractPropertiesTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">var</span></span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Teacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Project <span class="token operator">=</span> <span class="token string">"Math"</span><span class="token punctuation">,</span>                Name <span class="token operator">=</span> <span class="token string">"Zhang"</span><span class="token punctuation">,</span>                Age <span class="token operator">=</span> <span class="token number">26</span>            <span class="token punctuation">}</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Teacher Info: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">t</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>            t<span class="token punctuation">.</span>Age<span class="token operator">++</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Teacher Info: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">t</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Teacher Info: Project = Math, Name = Zhang, Age = 26</span><span class="token comment">// Teacher Info: Project = Math, Name = Zhang, Age = 27</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-索引器">4. 索引器</h2><p><strong>索引器（Indexer）是类中的一个特殊成员，他能够让对象以类似数组的形式来操作</strong>，使程序看起来更直观、更易编写。索引器与属性类似，在定义索引器时同样会get和set访问器，不同的是，访问索引器需要提供相应的参数。</p><h3 id="4-1-索引器定义">4.1 索引器定义</h3><p>索引器允许对象使用下标的方式来访问，定义时，该类的行为会像一个虚拟数组一样，可以使用数组访问符<code>[ ]</code>来访问类的成员。</p><p>其语法为：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">element-type this[int index]{    // get访问器    get    {        // 返回index指定的值    }    // set访问器    set    {        // 设置index指定的值    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-2-索引器用途">4.2 索引器用途</h3><p>索引器实例数据分为更小的部分，并索引每部分，获取或设置每部分。索引器定义时不带名称，但带this关键字，它指向对象实例。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">IndexedNames</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> nameList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span></span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> size <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">IndexedNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                nameList<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"NAN"</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token class-name"><span class="token keyword">int</span></span> index<span class="token punctuation">]</span>        <span class="token punctuation">{</span>            <span class="token keyword">get</span>            <span class="token punctuation">{</span>                <span class="token class-name"><span class="token keyword">string</span></span> tmp<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;=</span> size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    tmp <span class="token operator">=</span> nameList<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span>                <span class="token punctuation">{</span>                    tmp <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">return</span> <span class="token punctuation">(</span> tmp <span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">set</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;=</span> size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    nameList<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">IndexedNames</span> names <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IndexedNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"AAA"</span><span class="token punctuation">;</span>            names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"BBB"</span><span class="token punctuation">;</span>            names<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"CCC"</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> IndexedNames<span class="token punctuation">.</span>size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>names<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">// AAA</span>        <span class="token comment">// BBB</span>        <span class="token comment">// CCC</span>        <span class="token comment">// NAN</span>        <span class="token comment">// NAN</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-3-重载索引器">4.3 重载索引器</h3><p>索引器可以被重载，而且在声明索引器时也可以带多个参数，每个参数可以是不同的类型，另外，索引器的索引不必是整数，也可以是其他类型，例如字符串类型。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">IndexedNames</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> nameList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span></span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">static</span> <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> size <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">IndexedNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                nameList<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"NAN"</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token class-name"><span class="token keyword">int</span></span> index<span class="token punctuation">]</span>        <span class="token punctuation">{</span>            <span class="token keyword">get</span>            <span class="token punctuation">{</span>                <span class="token class-name"><span class="token keyword">string</span></span> tmp<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;=</span> size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    tmp <span class="token operator">=</span> nameList<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span>                <span class="token punctuation">{</span>                    tmp <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">return</span> <span class="token punctuation">(</span> tmp <span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">set</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;=</span> size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    nameList<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">]</span>        <span class="token punctuation">{</span>            <span class="token keyword">get</span>            <span class="token punctuation">{</span>                <span class="token class-name"><span class="token keyword">int</span></span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> size<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>nameList<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> name<span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        <span class="token keyword">return</span> index<span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    index<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">return</span> index<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">var</span></span> names <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IndexedNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"AAA"</span><span class="token punctuation">;</span>            names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"BBB"</span><span class="token punctuation">;</span>            names<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"CCC"</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> IndexedNames<span class="token punctuation">.</span>size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>names<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"'BBB'的索引为: {0}"</span><span class="token punctuation">,</span> names<span class="token punctuation">[</span><span class="token string">"BBB"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">// AAA</span>        <span class="token comment">// BBB</span>        <span class="token comment">// CCC</span>        <span class="token comment">// NAN</span>        <span class="token comment">// NAN</span>        <span class="token comment">// 'BBB'的索引为: 1</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-委托">5. 委托</h2><p>**委托（Delegate）类似于C或C++中函数的指针，是存有对某个方法的引用的一种引用类型的变量。**引用可在运行时被改变。</p><p>委托特别用于实现事件和回调方法，所有的委托都派生自<strong>System.Delegate</strong>类。</p><h3 id="5-1-声明委托">5.1 声明委托</h3><p>委托声明决定了可由委托引用的方法。委托可指向一个与其具有相同标签的方法。</p><p>声明委托的语法如下：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">delegate <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>return</span> <span class="token attr-name">type</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delegate-name</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parameter</span> <span class="token attr-name">list</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="5-2-实例化委托">5.2 实例化委托</h3><p>声明委托类型后，委托对象必须由<code>new</code>关键字来创建，且与一个特定的方法关联。当创建委托时，传递到new语句的参数就像方法调用一样书写，但是不带参数。</p><p>示例如下：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token comment">// 声明委托</span><span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">NumberChanger</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">DelegateTest1</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">int</span></span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">AddNum</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> p<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num <span class="token operator">+=</span> p<span class="token punctuation">;</span>            <span class="token keyword">return</span> num<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">MulNum</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> q<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num <span class="token operator">*=</span> q<span class="token punctuation">;</span>            <span class="token keyword">return</span> num<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> num<span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment">// 实例化委托</span>            <span class="token class-name">NumberChanger</span> nc1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberChanger</span><span class="token punctuation">(</span>AddNum<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">NumberChanger</span> nc2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberChanger</span><span class="token punctuation">(</span>MulNum<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 使用委托对象调用方法</span>            <span class="token function">nc1</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Value of Num: {0}"</span><span class="token punctuation">,</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Value of Num: 35</span>            <span class="token function">nc2</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Value of Num: {0}"</span><span class="token punctuation">,</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Value of Num: 175</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-3-委托多播">5.3 委托多播</h3><p>委托对象可以使用<code>+</code>运算符进行合并。一个合并委托调用它所合并的两个委托，只有同类型的委托才能被合并。<code>-</code>运算符可用于从合并的委托中移除组件委托。</p><p>使用委托合并或移除的操作，可以创建一个委托被调用时要调用的方法的调用类别，这称为委托的多播。</p><p>示例如下：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token comment">// 声明委托</span><span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">NumberChanger</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">DelegateTest2</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">int</span></span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">AddNum</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> p<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num <span class="token operator">+=</span> p<span class="token punctuation">;</span>            <span class="token keyword">return</span> num<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">MulNum</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> q<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num <span class="token operator">*=</span> q<span class="token punctuation">;</span>            <span class="token keyword">return</span> num<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> num<span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment">// 实例化委托</span>            <span class="token class-name">NumberChanger</span> nc1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberChanger</span><span class="token punctuation">(</span>AddNum<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">NumberChanger</span> nc2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberChanger</span><span class="token punctuation">(</span>MulNum<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">NumberChanger</span> nc <span class="token operator">=</span> nc1 <span class="token operator">+</span> nc2<span class="token punctuation">;</span>            <span class="token comment">// 调用多播</span>            <span class="token function">nc</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Value of Num: {0}"</span><span class="token punctuation">,</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Value of Num: 75</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6-事件">6. 事件</h2><p><strong>事件（Event）基本上说是一个用户操作</strong>，例如按键、点击、鼠标移动等，或者<strong>是一些提示信息</strong>，如系统生成的通知。<strong>应用程序需要在事件发生时响应事件</strong>。C#中使用事件机制实现线程间的通信。</p><h3 id="6-1-声明事件">6.1 声明事件</h3><p>在类的内部声明事件，首先必须声明该事件的委托类型，如：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">LogHandler</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> status<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后，声明事件本身，使用<code>event</code>关键字：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">event</span> <span class="token class-name">LogHandler</span> EventLog<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>上面代码定义了一个名为<strong>EventLog</strong>的事件和一个名为<strong>LogHandler</strong>的委托，该事件在生成时会调用委托。</p><h3 id="6-2-使用事件">6.2 使用事件</h3><p>示例1：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyEvent</span>    <span class="token punctuation">{</span>        <span class="token comment">// 定义一个委托</span>        <span class="token keyword">public</span> <span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MyDelegate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 定义一个事件</span>        <span class="token keyword">public</span> <span class="token class-name">MyDelegate</span> MyDelegateEvent<span class="token punctuation">;</span>        <span class="token comment">// 定义一个事件的触发函数</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnMyDelegateEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>MyDelegateEvent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token comment">// 执行事件</span>                <span class="token function">MyDelegateEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">EventTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PutOutChar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"I was fired"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PutOutChar2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            COnsole<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"I was fired too"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment">// 实例化MyEvent类</span>            <span class="token class-name">MyEvent</span> myEvent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 注册一个事件</span>            myEvent<span class="token punctuation">.</span>MyDelegateEvent <span class="token operator">+=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyEvent<span class="token punctuation">.</span>MyDelegate</span><span class="token punctuation">(</span>PutOutChar<span class="token punctuation">)</span><span class="token punctuation">;</span>            myEvent<span class="token punctuation">.</span>MyDelegateEvent <span class="token operator">+=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyEvent<span class="token punctuation">.</span>MyDelegate</span><span class="token punctuation">(</span>PutOutChar2<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// 执行触发事件的函数</span>            myEvent<span class="token punctuation">.</span><span class="token function">OnMyDelegateEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 解绑一个事件</span>            myEvent<span class="token punctuation">.</span>MyDelegateEvent <span class="token operator">-=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyEvent<span class="token punctuation">.</span>MyDelegate</span><span class="token punctuation">(</span>putOutChar<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 再次执行触发事件的函数</span>            myEvent<span class="token punctuation">.</span><span class="token function">OnMyDelegateEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">// I was fired</span><span class="token comment">// I was fired too</span><span class="token comment">// I was fired too</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>示例2：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token comment">// 发布器</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Publisher</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">string</span></span> <span class="token keyword">value</span><span class="token punctuation">;</span>        <span class="token comment">// 定义一个委托</span>        <span class="token keyword">public</span> <span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MyDelegate</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 定义一个事件</span>        <span class="token keyword">public</span> <span class="token keyword">event</span> <span class="token class-name">MyDelegate</span> MyEvent<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetValue</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> s<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">value</span> <span class="token operator">=</span> s<span class="token punctuation">;</span>            <span class="token comment">// 触发事件</span>            <span class="token function">MyEvent</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token comment">// 订阅器</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Subscriber</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PrintF</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> str<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token keyword">class</span> <span class="token class-name">Test</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Publisher</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Publisher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Subscriber</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Subscriber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            p<span class="token punctuation">.</span>MyEvent <span class="token operator">+=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Publisher<span class="token punctuation">.</span>MyDelegate</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>PrintF<span class="token punctuation">)</span><span class="token punctuation">;</span>            p<span class="token punctuation">.</span><span class="token function">SetValue</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Hello</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="7-集合">7. 集合</h2><p><strong>集合（Collection）类是专门用于数据存储和检索的类，这些类提供了对栈（Stack）、队列（Queue）、列表（List）和哈希表（Hashtable）的支持。大多数集合类实现了相同的接口。</strong></p><p>集合类服务于不同的目的，如为元素动态分配内存，基于索引访问列表项等，这些类创建Object类的对象的集合，<strong>在C#在，Object类是所有数据类型的基类</strong>。</p><h3 id="7-1-动态数组ArrayList">7.1 动态数组ArrayList</h3><p><strong>动态数组ArrayList代表了可被单独索引的对象的有序集合</strong>，它基本上可以替代一个数组。与数组不同的是，可以使用索引在指定的位置添加和移除项目，动态数组会自动重新调整它的大小。它也允许在列表中进行动态内存分配、增加、搜索、排序各项。</p><p>下表为ArrayList类的常用属性：</p><table><thead><tr><th>属性</th><th>描述</th><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><code>Capacity</code></td><td>获取或设置ArrayList可包含的元素个数</td><td><code>Count</code></td><td>获取ArrayList中实际包含的元素个数</td></tr><tr><td><code>IsFixedSize</code></td><td>获取一个值，表示ArrayList是否具有固定大小</td><td><code>IsReadOnly</code></td><td>获取一个值，表示ArrayList是否只读</td></tr><tr><td><code>IsSynchronized</code></td><td>获取一个值，表示访问ArrayList是否同步（线程安全）</td><td><code>Item[Int32]</code></td><td>获取或设置指定索引处的元素</td></tr><tr><td><code>SyncRoot</code></td><td>获取一个对象用于同步访问ArrayList</td><td></td><td></td></tr></tbody></table><p>下表为ArrayList类的常用方法：</p><table><thead><tr><th>方法名</th><th>描述</th><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td><code>public virtual int Add(object value);</code></td><td>在ArrayList的列表末尾添加一个对象</td><td><code>public virtual void AddRange(ICollection c);</code></td><td>在ArrayList的列表末尾添加ICollection的元素</td></tr><tr><td><code>public virtual void Clear();</code></td><td>在ArrayList中移除所有元素</td><td><code>public virtual bool Contains(object item);</code></td><td>判断某个元素是否存在ArrayList中</td></tr><tr><td><code>public virtual ArrayList GetRange(int index, int count);</code></td><td>返回一个ArrayList，表示源ArrayList中元素的子集</td><td><code>public virtual int IndexOf(object);</code></td><td>返回某个值在ArrayLust中第一次出现的索引，索引从零开始</td></tr><tr><td><code>public virtual void Insert(int index, object value);</code></td><td>在ArrayList指定索引处插入一个元素</td><td><code>public virtual void InsertRange(int index, ICollection c);</code></td><td>在ArrayList的指定索引处，插入某个集合的元素</td></tr><tr><td><code>public virtual void Remove(object obj);</code></td><td>从ArrayList中移除第一次出现的指定对象</td><td><code>public virtual void RemoveAt(int index);</code></td><td>移除ArrayList的指定索引处的元素</td></tr><tr><td><code>public virtual void RemoveRange(int index, int count);</code></td><td>在ArrayList中移除某个范围的元素</td><td><code>public virtual void Reverse();</code></td><td>逆转ArrayList在元素的顺序</td></tr><tr><td><code>public virtual void SetRange(int index, ICollection c);</code></td><td>复制某个集合的元素到ArrayList中某个范围的元素上</td><td><code>public virtual void Sort();</code></td><td>对ArrayList中的元素进行排序</td></tr><tr><td><code>public virtual void TrimToSize();</code></td><td>设置容量为ArrayList中元素的实际个数</td><td></td><td></td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ArrayListTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">ArrayList</span> arrList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            arrList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            arrList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            arrList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            arrList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            arrList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Capacity: {0}"</span><span class="token punctuation">,</span> arrList<span class="token punctuation">.</span>Capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Capacity: 8</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Count: {0}"</span><span class="token punctuation">,</span> arrList<span class="token punctuation">.</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Count: 5</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> e <span class="token keyword">in</span> arrList<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>e <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// 42 35 55 29 7</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"Sorted: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            arrList<span class="token punctuation">.</span><span class="token function">Sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> e <span class="token keyword">in</span> arrList<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>e <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// Sorted: 7 29 35 42 55</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            arrList<span class="token punctuation">.</span><span class="token function">Reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> e <span class="token keyword">in</span> arrList<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>e <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// Sorted: 55 42 35 29 7</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-2-哈希表Hashtable">7.2 哈希表Hashtable</h3><p><strong>哈希表Hashtable类代表了一系列基于键的哈希代码组织起来的键/值对</strong>。它是由键来访问集合中的元素。哈希表中的每一项都有一个键/值对，键用于访问集合中的项目。</p><p>下表为Hashtable类的常用属性：</p><table><thead><tr><th>属性</th><th>描述</th><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><code>Keys</code></td><td>获取一个ICollection，包含Hashtable中的键</td><td><code>Values</code></td><td>获取一个ICollection，包含Hashtable中的值</td></tr><tr><td><code>IsFixedSize</code></td><td>获取一个值，表示Hashtable是否具有固定大小</td><td><code>IsReadOnly</code></td><td>获取一个值，表示Hashtable是否只读</td></tr><tr><td><code>Count</code></td><td>获取Hashtable中实际包含的键值对个数</td><td><code>Item</code></td><td>获取或设置指定键相关的值</td></tr></tbody></table><p>下表为Hashtable类的常用方法：</p><table><thead><tr><th>方法名</th><th>描述</th><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td><code>public virtual void Add(object key, object value)</code></td><td>向Hashtable添加一个带有指定键和值的元素</td><td><code>public  virtual void Clear()</code></td><td>从Hashtable中移除所有的元素</td></tr><tr><td><code>public virtual bool ContainsKey(object key)</code></td><td>判断Hashtable是否包含指定的键</td><td><code>public virtual bool ContainsValue(object value)</code></td><td>判断Hashtable是否包含指定的值</td></tr><tr><td><code>public virtual void Remove(object key);</code></td><td>从Hashtable移除带有指定的键的元素</td><td></td><td></td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">HashtableTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Hashtable</span> hashT <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Hashtable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            hashT<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"001"</span><span class="token punctuation">,</span> <span class="token string">"AAA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            hashT<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"002"</span><span class="token punctuation">,</span> <span class="token string">"BBB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            hashT<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"003"</span><span class="token punctuation">,</span> <span class="token string">"CCC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            hashT<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"004"</span><span class="token punctuation">,</span> <span class="token string">"DDD"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            hashT<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"005"</span><span class="token punctuation">,</span> <span class="token string">"EEE"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>hashT<span class="token punctuation">.</span><span class="token function">ContainsValue</span><span class="token punctuation">(</span><span class="token string">"FFF"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"The 'BBB' is already in the table"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                hashT<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"006"</span><span class="token punctuation">,</span> <span class="token string">"FFF"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// 获取键的集合</span>            <span class="token class-name">ICollection</span> keys <span class="token operator">=</span> hashT<span class="token punctuation">.</span>Keys<span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> k <span class="token keyword">in</span> keys<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token string">": "</span> <span class="token operator">+</span> hashT<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// 002: BBB</span><span class="token comment">// 001: AAA</span><span class="token comment">// 003: CCC</span><span class="token comment">// 004: DDD</span><span class="token comment">// 006: FFF</span><span class="token comment">// 005: EEE</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-3-排序列表SortedList">7.3 排序列表SortedList</h3><p><strong>排序列表SortedList类代表了一系列按照键来排序的键/值对，这些键值对可以通过键或索引来访问。</strong></p><p>排序列表是数组和哈希表的组合，包含了一个可使用键或索引访问各项的列表。如果使用索引访问各项，则它是一个动态数组，如果使用键访问各项，则它是一个哈希表。集合中的各项总是按键值排序。</p><p>下表为SortedList类的常用属性：</p><table><thead><tr><th>属性</th><th>描述</th><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><code>Capacity</code></td><td>获取或设置SortedList可包含的元素个数</td><td><code>Count</code></td><td>获取SortedList中实际包含的元素个数</td></tr><tr><td><code>IsFixedSize</code></td><td>获取一个值，表示SortedList是否具有固定大小</td><td><code>IsReadOnly</code></td><td>获取一个值，表示SortedList是否只读</td></tr><tr><td><code>Item</code></td><td>获取或设置SortedList中指定键相关的值</td><td><code>Keys</code></td><td>获取SortedList中的键</td></tr><tr><td><code>Values</code></td><td>获取SortedList中的值</td><td></td><td></td></tr></tbody></table><p>下表为ArrayList类的常用方法：</p><table><thead><tr><th>方法名</th><th>描述</th><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td><code>public virtual int Add(object key, object Value);</code></td><td>向SortedList添加一个带有指定键和值的元素</td><td><code>public virtual bool ContainsKey(object key);</code></td><td>判断SortedList是否存在指定的键</td></tr><tr><td><code>public virtual void Clear();</code></td><td>在SortedList中移除所有元素</td><td><code>public virtual bool ContainsValue(object value);</code></td><td>判断SortedList是否存在指定的值</td></tr><tr><td><code>public virtual object GetByIndex(int index);</code></td><td>获取SortedList的指定索引处的值</td><td><code>public virtual object GetKey(int index);</code></td><td>获取SortedList的指定索引处的键</td></tr><tr><td><code>public virtual IList GetKeyList();</code></td><td>获取SortedList中的键</td><td><code>public virtual IList GetValueList();</code></td><td>获取SortedList中的值</td></tr><tr><td><code>public virtual void Remove(object key);</code></td><td>从SortedList中移除带有指定的键的元素</td><td><code>public virtual void RemoveAt(int index);</code></td><td>移除SortedList中指定索引处的元素</td></tr><tr><td><code>public virtual int IndexOfKey(object key);</code></td><td>返回SortedList中的指定键的索引</td><td><code>public virtual int IndexOfValue(object key);</code></td><td>返回SortedList中的指定值第一次出现的索引</td></tr><tr><td><code>public virtual void TrimToSize();</code></td><td>设置容量为SortedList中元素的实际个数</td><td></td><td></td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">SortedListTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">SortedList</span> sortedL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SortedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sortedL<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"001"</span><span class="token punctuation">,</span> <span class="token string">"AAA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sortedL<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"002"</span><span class="token punctuation">,</span> <span class="token string">"BBB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sortedL<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"003"</span><span class="token punctuation">,</span> <span class="token string">"CCC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sortedL<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"004"</span><span class="token punctuation">,</span> <span class="token string">"DDD"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sortedL<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"005"</span><span class="token punctuation">,</span> <span class="token string">"EEE"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>sortedL<span class="token punctuation">.</span><span class="token function">ContainsValue</span><span class="token punctuation">(</span><span class="token string">"FFF"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"The 'FFF' is already in the table"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                sortedL<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"006"</span><span class="token punctuation">,</span> <span class="token string">"FFF"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// 获取键的集合</span>            <span class="token class-name">ICollection</span> keys <span class="token operator">=</span> sortedL<span class="token punctuation">.</span>Keys<span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> k <span class="token keyword">in</span> keys<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token string">": "</span> <span class="token operator">+</span> sortedL<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token comment">// 001: AAA</span>            <span class="token comment">// 002: BBB</span><span class="token comment">// 003: CCC</span><span class="token comment">// 004: DDD</span><span class="token comment">// 005: EEE</span>            <span class="token comment">// 006: FFF</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-4-堆栈Stack">7.4 堆栈Stack</h3><p><strong>堆栈Stack代表了一个后进先出的对象集合</strong>，当需要对各项进行后进先出的访问时，则使用堆栈。当在列表中添加一项，称为推入元素，当从列表中移除一项时，称为弹出元素。</p><p>下表为Stack类的常用属性：</p><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><code>Count</code></td><td>获取Stack中包含的元素个数</td></tr></tbody></table><p>下表为Stack类的常用方法：</p><table><thead><tr><th>方法名</th><th>描述</th><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td><code>public virtual void Clear();</code></td><td>从Stack中移除所有的元素</td><td><code>public virtual bool Contains(object obj);</code></td><td>判断某个元素是否在Stack中</td></tr><tr><td><code>public virtual object Peek();</code></td><td>返回在Stack的顶部的对象，但不移除它</td><td><code>public virtual object Pop();</code></td><td>移除并返回Stack的顶部的对象</td></tr><tr><td><code>public virtual void Push(object obj);</code></td><td>向Stack的顶部添加一个对象</td><td><code>public virtual object[] ToArray();</code></td><td>复制Stack到一个新的数组中</td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">StackTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Stack</span> st <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            st<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token char">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            st<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token char">'B'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            st<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token char">'C'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            st<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token char">'D'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">char</span></span> c <span class="token keyword">in</span> st<span class="token punctuation">)</span>            <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>c <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span>            <span class="token comment">// D C B A</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            st<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token char">'E'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            st<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token char">'F'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"The next popable value in stack: {0}"</span><span class="token punctuation">,</span> st<span class="token punctuation">.</span><span class="token function">Peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// The next popable value in stack: F</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">char</span></span> c <span class="token keyword">in</span> st<span class="token punctuation">)</span>            <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>c <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span>            <span class="token comment">// F E D C B A</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            st<span class="token punctuation">.</span><span class="token function">Pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            st<span class="token punctuation">.</span><span class="token function">Pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            st<span class="token punctuation">.</span><span class="token function">Pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">char</span></span> c <span class="token keyword">in</span> st<span class="token punctuation">)</span>            <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>c <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span>            <span class="token comment">// C B A</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-5-队列Queue">7.5 队列Queue</h3><p><strong>队列Queue代表了一个先进先出的对象集合</strong>，当需要对各项进行先进先出的访问时，则使用队列。当在列表中添加一项，称为入队，当从列表中移除一项，称为出队。</p><p>下表为Queue类的常用属性：</p><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><code>Count</code></td><td>获取Queue中包含的元素个数</td></tr></tbody></table><p>下表为Stack类的常用方法：</p><table><thead><tr><th>方法名</th><th>描述</th><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td><code>public virtual void Clear();</code></td><td>从Queue中移除所有的元素</td><td><code>public virtual bool Contains(object obj);</code></td><td>判断某个元素是否在Queue中</td></tr><tr><td><code>public virtual object Dequeue();</code></td><td>移除并返回在Queue的开头的对象</td><td><code>public virtual void Enqueue(object obj);</code></td><td>向Queue的末尾添加一个对象</td></tr><tr><td><code>public virtual object[] ToArray();</code></td><td>复制Queue到一个新的数组中</td><td><code>public virtual void TrimToSize();</code></td><td>设置容量为Queue中元素的实际个数</td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">QueueTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Queue</span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            q<span class="token punctuation">.</span><span class="token function">Enqueue</span><span class="token punctuation">(</span><span class="token char">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            q<span class="token punctuation">.</span><span class="token function">Enqueue</span><span class="token punctuation">(</span><span class="token char">'B'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            q<span class="token punctuation">.</span><span class="token function">Enqueue</span><span class="token punctuation">(</span><span class="token char">'C'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            q<span class="token punctuation">.</span><span class="token function">Enqueue</span><span class="token punctuation">(</span><span class="token char">'D'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">char</span></span> c <span class="token keyword">in</span> q<span class="token punctuation">)</span>            <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>c <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span>            <span class="token comment">// A B C D</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            q<span class="token punctuation">.</span><span class="token function">Enqueue</span><span class="token punctuation">(</span><span class="token char">'E'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            q<span class="token punctuation">.</span><span class="token function">Enqueue</span><span class="token punctuation">(</span><span class="token char">'F'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">char</span></span> c <span class="token keyword">in</span> q<span class="token punctuation">)</span>            <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>c <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span>            <span class="token comment">// A B C D E F</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            q<span class="token punctuation">.</span><span class="token function">Dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            q<span class="token punctuation">.</span><span class="token function">Dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">char</span></span> c <span class="token keyword">in</span> q<span class="token punctuation">)</span>            <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>c <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span>            <span class="token comment">// C D E F</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-6-点阵列BitArray">7.6 点阵列BitArray</h3><p><strong>点阵列BitArray类管理一个紧凑型的位值数组，它是由布尔值来表示，其中true表示位是开启的，false表示位是关闭的</strong>，当你需要存储位，但是事先不知道位数时，则使用点阵列。可以使用整型索引从点阵列集合中访问各项，索引从零开始。</p><p>下表为BitArray类的常用属性：</p><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><code>Count</code></td><td>获取BitArray中包含的元素个数</td></tr><tr><td><code>IsReadyOnly</code></td><td>获取一个值，表示BitArray是否只读</td></tr><tr><td><code>Item</code></td><td>获取或设置BitArray中指定位置的位的值</td></tr><tr><td><code>Length</code></td><td>获取或设置BitArray中的元素个数</td></tr></tbody></table><p>下表为BitArray类的常用方法：</p><table><thead><tr><th>方法名</th><th>描述</th><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td><code>public BitArray And(BitArray value);</code></td><td>对当前的BitArray中的元素和指定的BitArray中的相应元素执行按位与操作</td><td><code>public bool Get(int index);</code></td><td>获取BitArray中指定位置的位的值</td></tr><tr><td><code>public BitArray Not();</code></td><td>把当前BitArray中的位值反转，以便设置为true的元素为false，设置为false的元素为true</td><td><code>public BitArray Or(BitArray value);</code></td><td>对当前的BitArray中的元素和指定的BitArray中的相应元素执行按位或操作</td></tr><tr><td><code>public void Set(int index, bool value);</code></td><td>把BitArray中指定位置的位设置为指定的值</td><td><code>public void SetAll(bool value);</code></td><td>把BitArray中所有位设置为指定的值</td></tr><tr><td><code>public BitArray Xor(BitArray value);</code></td><td>对当前的BitArray中的元素和指定的BitArray中的相应元素执行按位异或操作</td><td></td><td></td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">BitArrayTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">BitArray</span> ba1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BitArray</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">BitArray</span> ba2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BitArray</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            ba1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BitArray</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>            ba2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BitArray</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"BitArray ba1: 60"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ba1<span class="token punctuation">.</span>Count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"{0, -6}"</span><span class="token punctuation">,</span> ba1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// False False True True True True False False</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"BitArray ba2: 13"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ba2<span class="token punctuation">.</span>Count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"{0, -6}"</span><span class="token punctuation">,</span> ba2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// True False True True False False False False</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">BitArray</span> ba3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BitArray</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ba3 <span class="token operator">=</span> ba1<span class="token punctuation">.</span><span class="token function">And</span><span class="token punctuation">(</span>ba2<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"BitArray ba3 After And Operation: 12"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ba3<span class="token punctuation">.</span>Count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"{0, -6}"</span><span class="token punctuation">,</span> ba3<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// False False True True False False False False</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="8-泛型">8. 泛型</h2><p>**泛型Generic通过数据类型的代替参数编写类或方法，允许编写一个可以与任何类型一起工作的方法或类。**当编译器遇到类的构造函数或方法的函数调用时，它会生成代码来处理指定的数据类型。</p><p>示例如下：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyGenericArray<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name">T<span class="token punctuation">[</span><span class="token punctuation">]</span></span> array<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">MyGenericArray</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> size<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            array <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">T</span><span class="token punctuation">[</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name">T</span> <span class="token function">GetItem</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> index<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> array<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetItem</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> index<span class="token punctuation">,</span> <span class="token class-name">T</span> <span class="token keyword">value</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            array<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">GenericTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment">// 声明一个整型数组</span>            <span class="token class-name">MyGenericArray<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> intArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyGenericArray<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 设置值</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                intArray<span class="token punctuation">.</span><span class="token function">SetItem</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i<span class="token operator">*</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// 获取值</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>intArray<span class="token punctuation">.</span><span class="token function">GetItem</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// 0 1 4 9 16</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 声明一个字符数组</span>            <span class="token class-name">MyGenericArray<span class="token punctuation">&lt;</span><span class="token keyword">char</span><span class="token punctuation">&gt;</span></span> charArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyGenericArray<span class="token punctuation">&lt;</span><span class="token keyword">char</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 设置值</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                charArray<span class="token punctuation">.</span><span class="token function">SetItem</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// 获取值</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>charArray<span class="token punctuation">.</span><span class="token function">GetItem</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// a b c d e</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-1-特性">8.1 特性</h3><p>使用泛型是一种增强程序功能的技术，具体表现在以下几个方面：</p><ul><li>有助于最大限度地重用代码、保护类型的安全以及提高性能</li><li>可以创建泛型集合类，使用泛型集合类来代替System.Collections中的集合类</li><li>可以创建自己的泛型接口、泛型类、泛型方法、泛型事件、泛型委托。</li><li>对泛型类进行约束以访问特定数据类型的方法</li><li>关于泛型数据类型中使用的类型的信息可运行时通过使用反射获取</li></ul><h3 id="8-2-泛型方法">8.2 泛型方法</h3><p>可以通过类型参数声明泛型方法。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">GenericTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token generic-method"><span class="token function">Swap</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">ref</span> <span class="token class-name">T</span> l<span class="token punctuation">,</span> <span class="token keyword">ref</span> <span class="token class-name">T</span> r<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">T</span> temp<span class="token punctuation">;</span>            temp <span class="token operator">=</span> l<span class="token punctuation">;</span>            l <span class="token operator">=</span> r<span class="token punctuation">;</span>            r <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">char</span></span> c<span class="token punctuation">,</span> d<span class="token punctuation">;</span>            a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>            b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>            c <span class="token operator">=</span> <span class="token char">'M'</span><span class="token punctuation">;</span>            d <span class="token operator">=</span> <span class="token char">'N'</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = {0}, b = {1}, c = {2}, d = {3}"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// a = 10, b = 20, c = M, d = N</span>            <span class="token generic-method"><span class="token function">Swap</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">ref</span> a<span class="token punctuation">,</span> <span class="token keyword">ref</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token generic-method"><span class="token function">Swap</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Char<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">ref</span> c<span class="token punctuation">,</span> <span class="token keyword">ref</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = {0}, b = {1}, c = {2}, d = {3}"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// a = 20, b = 10, c = N, d = M</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-3-泛型委托">8.3 泛型委托</h3><p>可以通过类型参数定义泛型委托，如<code>delegate T NumberChange&lt;T&gt;(T n);</code></p><p>示例如下：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span><span class="token keyword">delegate</span> <span class="token return-type class-name">T</span> <span class="token generic-method"><span class="token function">NumberChanger</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">T</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">GenericTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">int</span></span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">AddNum</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> p<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num <span class="token operator">+=</span> p<span class="token punctuation">;</span>            <span class="token keyword">return</span> num<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">MultNum</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> q<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num <span class="token operator">*=</span> q<span class="token punctuation">;</span>            <span class="token keyword">return</span> num<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">GetNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> num<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">NumberChanger<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> nc1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberChanger<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>AddNum<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">NumberChanger<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> nc2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberChanger<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>MultNum<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">nc1</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"num = {0}"</span><span class="token punctuation">,</span> <span class="token function">GetNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// num = 15</span>            <span class="token function">nc2</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"num = {0}"</span><span class="token punctuation">,</span> <span class="token function">GetNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// num = 75</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-4-泛型约束">8.4 泛型约束</h3><p>在声明泛型方法或泛型类时，可以给泛型加上一定的约束来满足特定的一些条件</p><p>如：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Helper<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>泛型限定条件：</p><ul><li>T : 结构 （类型参数必须是值类型，可以指定出Nullable以外的任何值类型）</li><li>T : 类 （类型参数必须是引用类型，包括任何类、接口、委托或数组类型）</li><li>T : new()  （类型参数必须具有无参数的公共构造函数，当与其他约束一起使用new()约束必须最后指定）</li><li>T : &lt;基类名&gt;  （类型参数必须是指定的基类或派生自指定的基类）</li><li>T : &lt;接口名称&gt;  （类型参数必须是指定的接口或实现指定的接口，可以指定多个接口约束。约束接口也可以是泛型的。</li></ul><h2 id="9-匿名方法">9. 匿名方法</h2><p><strong>匿名方法Anonymous methods提供了一种传递代码块作为委托参数的技术，匿名方法是没有名称只有主体的方法。在匿名方法中不需要指定返回类型，它是从方法主体内的return语句推断的。</strong></p><h3 id="9-1-匿名方法的语法">9.1 匿名方法的语法</h3><p>匿名方法是通过使用delegate关键字创建的委托实例来声明的。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">NumberChanger</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">NumberChanger</span> nc <span class="token operator">=</span> <span class="token keyword">delegate</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Anonymous methods: {0}"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 匿名方法的主体</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>委托可以通过匿名函数调用，也可以通过普通有名称的函数调用，只需要向委托对象中传递相应的方法参数即可。注：匿名函数主体后面要以<code>;</code>结尾。</p><p>示例如下：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">AnonymousTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">NumberChanger</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">int</span></span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token comment">// 命名函数</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AddNum</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> p<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num <span class="token operator">+=</span> p<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"命名函数：{0}"</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MultNum</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> q<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num <span class="token operator">*=</span> q<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"命名函数：{0}"</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">NumberChanger</span> nc <span class="token operator">=</span> <span class="token keyword">delegate</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> x<span class="token punctuation">)</span>            <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"匿名函数：{0}"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token comment">// 使用匿名函数调用委托</span>            <span class="token function">nc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 匿名函数：10</span>            <span class="token comment">// 使用命名函数实例化委托</span>            nc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberChanger</span><span class="token punctuation">(</span>AddNum<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">nc</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 命名函数：15</span>            nc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberChanger</span><span class="token punctuation">(</span>MultNum<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">nc</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 命名函数：75</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="10-不安全代码">10. 不安全代码</h2><p>为了保持类型的安全性，默认情况下C#是不支持指针的，但是如果使用<code>unsafe</code>关键字来修饰类或类中的成员，则会被视为不安全代码。C#允许不安全代码中使用指针变量。</p><p>在公共语言运行中，不安全代码是指无法验证的代码，需要程序员来保证代码的安全性，不安全代码并不意味着一定是危险的。</p><h3 id="10-1-指针变量">10.1 指针变量</h3><p>指针也是变量，但是它的值是另一个变量的内存地址，在使用指针前需要先声明指针。</p><table><thead><tr><th>示例</th><th>说明</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td><code>int* p</code></td><td>p是指向整数的指针</td><td><code>double* p</code></td><td>p是指向双精度数的指针</td></tr><tr><td><code>float* p</code></td><td>p是指向浮点数的指针</td><td><code>int** p</code></td><td>p是指向整数的指针的指针</td></tr><tr><td><code>int*[] p</code></td><td>p是指向整数的指针的一维数组</td><td><code>char* p</code></td><td>p是指向字符的指针</td></tr><tr><td><code>void* p</code></td><td>p是指向未知类型的指针</td><td></td><td></td></tr></tbody></table><p>与声明变量相同，我们同样可以在一行代码中同时声明多个指针，如下：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">int</span><span class="token operator">*</span> p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">;</span>  <span class="token comment">// 同时定义p1、p2、p3三个整数指针</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意：指针不能从对象中继承，并且装箱和拆箱也不支持指针，但是不同的指针类型以及指针与整型之间可以进行转换。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">PointerTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">unsafe</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">double</span></span> f <span class="token operator">=</span> <span class="token number">3.1415</span><span class="token punctuation">;</span>            <span class="token keyword">double</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>f<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"数据的内容是：{0}"</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 字符串的内容是: 3.1415</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"数据在内存中的地址是：{0}"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 字符串在内存中的地址是: 12569862</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意：在编译上述代码时需要在编译命令中添加<code>-unsafe</code>，例如<code>csc -unsafe pointerTest.cs</code></p><h3 id="10-2-使用指针检索数据的值">10.2 使用指针检索数据的值</h3><p>可以使用<code>ToString()</code>来获取指针变量所指向的数据的值，如下所示：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">PointerTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">unsafe</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> <span class="token keyword">var</span> <span class="token operator">=</span> <span class="token number">123456</span><span class="token punctuation">;</span>            <span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">var</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"变量var的值为：{0}"</span><span class="token punctuation">,</span> <span class="token keyword">var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 变量var的值为: 123456</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"指针p指向的值为：{0}"</span><span class="token punctuation">,</span> p<span class="token operator">-&gt;</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 指针p指向的值为: 123456</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"指针p的值为：{0}"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 指针p的值为: 15332624</span>                   <span class="token punctuation">}</span>        Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="10-3-将指针作为参数传递给函数">10.3 将指针作为参数传递给函数</h3><p>可以将指针变量作为参数传递给函数，如下所示：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">PointerTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">unsafe</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> p<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">*</span> q<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> temp <span class="token operator">=</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>            <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">*</span>q<span class="token punctuation">;</span>            <span class="token operator">*</span>q <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">public</span> <span class="token keyword">unsafe</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">PointerTest</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PointerTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> var1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> var2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>            <span class="token keyword">int</span><span class="token operator">*</span> x <span class="token operator">=</span> <span class="token operator">&amp;</span>var1<span class="token punctuation">;</span>            <span class="token keyword">int</span><span class="token operator">*</span> y <span class="token operator">=</span> <span class="token operator">&amp;</span>var2<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"调用Swap函数前：var1 = {0}, var2 = {1}"</span><span class="token punctuation">,</span> var1<span class="token punctuation">,</span> var2<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 调用Swap函数前：var1 = 10, var2 = 20</span>            p<span class="token punctuation">.</span><span class="token function">Swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"调用Swap函数后：var1 = {0}, var2 = {1}"</span><span class="token punctuation">,</span> var1<span class="token punctuation">,</span> var2<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 调用Swap函数后：var1 = 20, var2 = 10</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="10-4-使用指针访问数组元素">10.4 使用指针访问数组元素</h3><p>在C#中，数组和指向该数组且与数组名称相同的指针是不同的数据类型，例如<code>int* p</code>和<code>int[] p</code>就是不同的数据类型。可以增加指针p的值，因为它在内存中不是固定的，但数组地址在内存中是固定的，因此不能增加数组p的值，如果需要使用指针变量访问数组数据，则可以使用<code>fixed</code>关键字来固定指针。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">PointerTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">unsafe</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> list <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token keyword">fixed</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>ptr <span class="token operator">=</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"List[{0}]的内存地址为：{1}"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>ptr <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"List[{0}]的值为：{1}"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>ptr <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token punctuation">}</span>            <span class="token comment">// list[0] 的内存地址为：51981272</span>            <span class="token comment">// list[0] 的值为：10</span>            <span class="token comment">// list[1] 的内存地址为：51981276</span>            <span class="token comment">// list[1] 的值为：100</span>            <span class="token comment">// list[2] 的内存地址为：51981280</span>            <span class="token comment">// list[2] 的值为：200</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="11-正则表达式">11. 正则表达式</h2><p><strong>正则表达式时一种匹配文本输入的模式。</strong>.Net Framework提供了允许这种匹配的正则表达式引擎。模式由一个或多个字符、运算符和结构组成。</p><h3 id="11-1-定义正则表达式">11.1 定义正则表达式</h3><p>用于定义正则表达式的各种类型的字符、运算符和结构有：</p><ul><li>字符转义，正则表达式中的反斜杠<code>\</code>用来表示它后面跟随的字符时特殊字符，具有特殊的含义。如\a、\b、\t等</li><li>字符类，字符类可以与一个字符串中的任何一个字符相匹配。如\w、[character_group]、\p{name}等</li><li>定位符，可以根据字符串出现的具体位置来判断匹配是成功还是失败。如^、$、\A等</li><li>分组结构，描述了正则表达式的子表达式，并捕获输入字符串的子字符串。如（\w)\1、\w+(?=\.)、(?&lt;double&gt;\w)\k&lt;double&gt;等</li><li>限定符，用来指定在字符串中必须存在某个元素才能匹配成功。如*、+、？等</li><li>反向引用构造，允许先前匹配的子表达式随后在相同的正则表达式中进行标志。如\number、\k&lt;name&gt;</li><li>备用构造，用于修改正则表达式以启用either/or匹配。如|、(?(expresion) yes | no)、(?(name)yes | no)</li><li>替换，替换模式中使用的正则表达式，如$number、${name}、$&amp;等</li><li>杂项构造，如(?#注释)、#[行尾]、(?imnsx-imnsx)</li></ul><h3 id="11-2-Regex类">11.2 Regex类</h3><p>Regex类用于使用一个正则表达式，下表列出来Regex类中一些常用的方法：</p><table><thead><tr><th>方法</th><th>描述</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td><code>public bool IsMatch( string input )</code></td><td>指示 Regex 构造函数中指定的正则表达式是否在指定的输入字符串中找到匹配项</td><td><code>public bool IsMatch( string input, int startat )</code></td><td>指示 Regex 构造函数中指定的正则表达式是否在指定的输入字符串中找到匹配项，从字符串中指定的位置开始查找</td></tr><tr><td><code>public static bool IsMatch( string input, string pattern )</code></td><td>指示指定的正则表达式是否在指定的输入字符串中找到匹配项</td><td><code>public MatchCollection Matches( string input )</code></td><td>在指定的输入字符串中搜索正则表达式的所有匹配项</td></tr><tr><td><code>public string Replace( string input, string replacement )</code></td><td>在指定的输入字符串中，把所有匹配正则表达式模式的所有匹配的字符串替换为指定的替换字符串</td><td><code>public string[] Split( string input )</code></td><td>把输入字符串分割为子字符串数组，根据在 Regex 构造函数中指定的正则表达式模式定义的位置进行分割</td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Text<span class="token punctuation">.</span>RegularExpressions</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">RegexTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ShowMatch</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> text<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> expr<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">MatchCollection</span> mc <span class="token operator">=</span> Regex<span class="token punctuation">.</span><span class="token function">Matches</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> expr<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">Match</span> m <span class="token keyword">in</span> mc<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">string</span></span> str <span class="token operator">=</span> <span class="token string">"make and then manage your maze"</span><span class="token punctuation">;</span>            <span class="token function">ShowMatch</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">@"\bm\S*e\b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// make</span>            <span class="token comment">// manage</span>            <span class="token comment">// maze</span>                        Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="12-多线程">12. 多线程</h2><p><strong>多线程就是多个线程同时工作的过程，可将线程看做程序的执行路径，每个线程定义了一个独特的控制流，用来完成特定的任务。</strong></p><p>多线程可以节省CPU资源，同时提高应用程序的执行效率。</p><h3 id="12-1-线程生命周期">12.1 线程生命周期</h3><p>线程声明周期开始于我们创建<strong>System.Theading.Thread</strong>类对象的时候，当线程被终止或完成执行时生命周期终止。</p><p>下面列出来线程生命周期中的各种状态：</p><ul><li>未启动状态：当线程实例被创建但<code>Start</code>方法未被调用时的状况；</li><li>就绪状态：当线程准备好运行并等待CPU周期时的状况；</li><li>不可运行状态：<ul><li>已经调用Sleep方法</li><li>已经调用Wait方法</li><li>通过I/O操作阻塞</li></ul></li><li>死亡状态：当线程已完成执行或已中止时的状况。</li></ul><h3 id="12-2-主线程">12.2 主线程</h3><p>在多线程中执行的第一个线程称为主线程，C#程序开始执行时，将自动创建主线程，使用Thread类创建的线程称为子线程，可以使用<strong>Thread</strong>类的<code>CurrentThread</code>属性访问线程。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ThreadTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Thread</span> th <span class="token operator">=</span> Thread<span class="token punctuation">.</span>CurrentThread<span class="token punctuation">;</span>            th<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"主线程"</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"这是{0}"</span><span class="token punctuation">,</span> th<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 这是主线程</span>                        Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="12-3-Thread类的常用属性和方法">12.3 Thread类的常用属性和方法</h3><p>下表为Thread类的常用属性：</p><table><thead><tr><th>属性</th><th>描述</th><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><code>CurrentContext</code></td><td>获取线程正在其中执行的当前上下文</td><td><code>CurrentCulture</code></td><td>获取或设置当前线程的区域性</td></tr><tr><td><code>CurrentPrincipal</code></td><td>获取或设置线程的当前负责人</td><td><code>CurrentThread</code></td><td>获取当前正在运行的线程</td></tr><tr><td><code>CurrentUICulture</code></td><td>获取或设置资源管理器使用的当前区域性以便在运行时查找区域特定的资源</td><td><code>ExecutionContext</code></td><td>获取一个ExecutionContext对象，该对象包含有关当前线程的各种上下文信息</td></tr><tr><td><code>IsAlive</code></td><td>获取一个值，该值指示当前线程的执行状态</td><td><code>IsBackground</code></td><td>获取或设置一个值，该值指示某个线程是否为后台线程</td></tr><tr><td><code>IsThreadPoolThread</code></td><td>获取一个值，该值指示线程是否属于托管线程池</td><td><code>ManagedThreadId</code></td><td>获取当前托管线程的唯一标识符</td></tr><tr><td><code>Name</code></td><td>获取或设置线程的名称</td><td><code>Priority</code></td><td>获取或设置一个值，该值指示线程的调度优先级</td></tr><tr><td><code>ThreadState</code></td><td>获取一个值，该值包含当前线程的状态</td><td></td><td></td></tr></tbody></table><p>下表为Thread类的常用方法：</p><table><thead><tr><th>方法名</th><th>描述</th><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td><code>public void Abort()</code></td><td>在调用此方法的线程上引发ThreadAbortException，以开始终止此线程的过程。调用此方法通常会终止线程</td><td><code>public static LocalDataStoreSlot AllocateDataSlot()</code></td><td>在所有线程上分配未命名的数据槽</td></tr><tr><td><code>public static LocalDataStoreSlot AllocateNamedDataSlot(string name)</code></td><td>在所有线程上分配已命名的数据槽</td><td><code>public static void BeginCriticalRegion()</code></td><td>通知主机执行将要进入一个代码区域，在该代码区域内线程中止或未经处理的异常的影响可能会危害应用程序域中的其他任务</td></tr><tr><td><code>public static void BeginThreadAffinity()</code></td><td>通知主机托管代码将要执行依赖于当前物理操作系统线程的标识的指令</td><td><code>public static void EndCriticalRegion()</code></td><td>通知主机执行将要进入一个代码区域，在该代码区域内线程中止或未经处理的异常仅影响当前任务。</td></tr><tr><td><code>public static void EndThreadAffinity()</code></td><td>通知主机托管代码已执行完依赖于当前物理操作系统线程的标识的指令</td><td><code>public static void FreeNamedDataSlot(string name)</code></td><td>为进程中的所有线程消除名称与槽之间的关联</td></tr><tr><td><code>public static Object GetData(LocalDataStoreSlot slot)</code></td><td>在当前线程的当前域中从当前线程上指定的槽中检索值</td><td><code>public static AppDomain GetDomain()</code></td><td>返回当前线程正在其中运行的当前域</td></tr><tr><td><code>public static AppDomain GetDomainID()</code></td><td>返回唯一的应用程序域标识符</td><td><code>public static LocalDataStoreSlot GetNamedDataSlot(string name)</code></td><td>查找已命名的数据槽</td></tr><tr><td><code>public void Interrupt()</code></td><td>中断处于WaitSleep.Join线程状态的线程</td><td><code>public void Join()</code></td><td>在继续执行标准的 COM 和 SendMessage 消息泵处理期间，阻塞调用线程，直到某个线程终止为止</td></tr><tr><td><code>public static void MemoryBarrier()</code></td><td>按如下方式同步内存存取：执行当前线程的处理器在对指令重新排序时，不能采用先执行 MemoryBarrier 调用之后的内存存取，再执行 MemoryBarrier 调用之前的内存存取的方式</td><td><code>public static void ResetAbort()</code></td><td>取消为当前线程请求的Abort</td></tr><tr><td><code>public static void SetData(LocalDataStoreSlot slot, Object data)</code></td><td>在当前正在运行的线程上为此线程的当前域在指定槽中设置数据</td><td><code>public void Start()</code></td><td>开始一个线程</td></tr><tr><td><code>public static void Sleep(int millisecondsTimeout)</code></td><td>让线程暂停一段时间</td><td><code>public static void SpinWait(int iterations)</code></td><td>导致线程等待由 iterations 参数定义的时间量</td></tr><tr><td><code>public static byte VolatileRead(ref byte address)</code><br><code>public static double VolatileRead(ref double address)</code><br><code>public static int VolatileRead(ref int address)</code><br><code>public static Object VolatileRead(ref Object address)</code></td><td>读取字段值。无论处理器的数目或处理器缓存的状态如何，该值都是由计算机的任何处理器写入的最新值</td><td><code>public static void VolatileWrite(ref byte address, byte value)</code><br><code>public static void VolatileWrite(ref double address, double value)</code><br><code>public static void VolatileWrite(ref int address, int value)</code><br><code>public static void VolatileWrite(ref Object address, Object value)</code></td><td>立即向字段写入一个值，以使该值对计算机中的所有处理器都可见</td></tr><tr><td><code>public static bool Yield()</code></td><td>导致调用线程执行准备好在当前处理器上运行的另一个线程。由操作系统选择要执行的线程</td><td></td><td></td></tr></tbody></table><h3 id="12-4-创建线程">12.4 创建线程</h3><p>线程是通过扩展<strong>Thread</strong>类创建的，扩展的<strong>Thread</strong>类调用<code>Start()</code>方法来开始子线程的执行。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ThreadTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CallToChildThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Child thread starts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">ThreadStart</span> childref <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ThreadStart</span><span class="token punctuation">(</span>CallToChildThread<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Thread</span> childThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Thread</span><span class="token punctuation">(</span>childref<span class="token punctuation">)</span><span class="token punctuation">;</span>            childThread<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Child thread starts</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="12-5-管理线程">12.5 管理线程</h3><p><strong>Thread</strong>类提供了各种管理线程的方法，下面演示了<code>Sleep()</code>方法的使用，用于在一个特定的时间暂停线程。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ThreadTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CallToChildThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Child thread starts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> sleepTime <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Child thread paused for {0} seconds"</span><span class="token punctuation">,</span> sleepTime <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Thread<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>sleepTime<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Child thread resumes"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">ThreadStart</span> childref <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ThreadStart</span><span class="token punctuation">(</span>CallToChildThread<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Thread</span> childThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Thread</span><span class="token punctuation">(</span>childref<span class="token punctuation">)</span><span class="token punctuation">;</span>            childThread<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Child thread starts</span>            <span class="token comment">// Child thread pasued for 5 seconds</span>            <span class="token comment">// Child thread resumes</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="12-6-销毁线程">12.6 销毁线程</h3><p><code>Abort()</code>方法用于销毁进行，通过抛出<code>ThreadAbortException</code>在运行时中止线程。这个异常不能被捕获，如果有<strong>finally</strong>块，控制会被送至<strong>finally</strong>块。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ThreadTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CallToChildThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span><span class="token keyword">try</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Child thread starts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> counter <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> counter<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    Thread<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Child thread resumes"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ThreadAbortException</span> e<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Thread Abort Exception"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">finally</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Couldn't catch the Thread Exception"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>                <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">ThreadStart</span> childref <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ThreadStart</span><span class="token punctuation">(</span>CallToChildThread<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Thread</span> childThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Thread</span><span class="token punctuation">(</span>childref<span class="token punctuation">)</span><span class="token punctuation">;</span>            childThread<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Thread<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            childThread<span class="token punctuation">.</span><span class="token function">Abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Child thread starts</span>            <span class="token comment">// 0</span>            <span class="token comment">// 1</span>            <span class="token comment">// 2</span>            <span class="token comment">// Thread Abort Exception</span>            <span class="token comment">// Couldn't catch the Thread Exception</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="参考文章">参考文章</h2><p>本文是笔者通过下列网站教程学习C#语言进阶的记录，有部分修改和补充，转载请注明出处，并附带下面链接。</p><p>1.<a href="https://www.runoob.com/csharp/csharp-tutorial.html">【菜鸟教程C#教程】</a></p><p>2.<a href="http://c.biancheng.net/csharp/">【C语言中文网C#教程】</a></p><p>3.<a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/">【微软C#官方文档】</a></p>]]></content>
      
      
      <categories>
          
          <category> C# </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C#进阶 </tag>
            
            <tag> 学习笔记 </tag>
            
            <tag> Unity开发基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C#语言基础学习笔记</title>
      <link href="/posts/6569.html"/>
      <url>/posts/6569.html</url>
      
        <content type="html"><![CDATA[<h2 id="0-环境准备">0. 环境准备</h2><h3 id="0-1-简介">0.1 简介</h3><p><strong>C#<strong>又称”<strong>C Sharp</strong>“，是微软发布和维护的一个</strong>现代的</strong>、<strong>通用的</strong>、<strong>面向对象</strong>的编程语言，是专为公共语言基础结构（CLI，由可执行代码和运行时环境组成，允许在不同的计算机平台和体系结构上使用各种高级语言）设计的。</p><p>C#的优点：</p><ul><li>现代的、通用的编程语言</li><li>面向对象</li><li>类型安全</li><li>容易学习</li><li>面向组件</li><li>结构化语言</li><li>产生高效率的程序</li><li>可以在多种计算机平台上编译</li><li>.Net框架的一部分</li></ul><p>C#运行在 <strong>.Net Framework</strong> 上，可以用于开发不同类型的应用程序：</p><ul><li>桌面应用程序</li><li>网络应用程序</li><li>分布式应用程序</li><li>Web服务应用程序</li><li>数据库应用程序</li><li>Unity3D游戏程序</li></ul><p><strong>.Net Framework</strong> 是一个平台，它提供了一个跨语言的统一编程环境，而C#则是一种在 <strong>.Net Framework</strong> 平台上使用的编程语言。</p><h3 id="0-2-推荐IDE">0.2 推荐IDE</h3><ul><li><p><a href="https://visualstudio.microsoft.com/zh-hans/">Visual Studio</a></p></li><li><p><a href="https://visualstudio.microsoft.com/zh-hans/">Visual Studio Code</a></p></li><li><p><a href="https://www.codingrooms.com/compiler/csharp">在线IDE</a></p></li></ul><h3 id="0-3-基本语法">0.3 基本语法</h3><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token comment">// 这是单行注释</span><span class="token comment">/*这是多行注释这是多行注释*/</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Rectangle</span>     <span class="token punctuation">{</span>        <span class="token comment">// 成员变量</span>        <span class="token class-name"><span class="token keyword">double</span></span> length<span class="token punctuation">;</span>  <span class="token comment">// 长</span>        <span class="token class-name"><span class="token keyword">double</span></span> width<span class="token punctuation">;</span>  <span class="token comment">// 宽</span>              <span class="token comment">// 成员函数</span>        <span class="token comment">// 设置长和宽</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Acceptdetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span>         <span class="token punctuation">{</span>            length <span class="token operator">=</span> <span class="token number">4.5</span><span class="token punctuation">;</span>              width <span class="token operator">=</span> <span class="token number">3.5</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token comment">// 计算面积</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span>         <span class="token punctuation">{</span>            <span class="token keyword">return</span> length <span class="token operator">*</span> width<span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token comment">// 显示输出</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>         <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Length: {0}"</span><span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 4.5</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Width: {0}"</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 3.5</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Area: {0}"</span><span class="token punctuation">,</span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 15.75</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">ExecuteRectangle</span>     <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>         <span class="token punctuation">{</span>            <span class="token class-name">Rectangle</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            r<span class="token punctuation">.</span><span class="token function">Acceptdetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            r<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="1-数据类型">1. 数据类型</h2><p>C#语言的类型主要分为：<strong>值类型</strong>和<strong>引用类型</strong>，值类型的变量直接包含数据，而引用类型的变量存储数据的引用地址。</p><p>对于引用类型，两个变量可以引用同一对象，因此，对一个变量执行的运算可能会影响另一个变量所引用的对象。引用类型在<strong>托管堆</strong>分配空间。</p><p>对于值类型，每个变量都有自己的数据副本，对一个变量执行的操作不会影响另一个。值类型在<strong>线程栈</strong>分配空间。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">// 引入命名空间</span><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token comment">// 引用类型</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SomeRef</span>    <span class="token punctuation">{</span>        <span class="token comment">// 属性</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> X <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token comment">// 值类型</span>    <span class="token keyword">public</span> <span class="token keyword">struct</span> <span class="token class-name">SomeVal</span>    <span class="token punctuation">{</span>        <span class="token comment">// 属性</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> X <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token keyword">class</span> <span class="token class-name">ValueTypeTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">SomeRef</span> r1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SomeRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 在堆上分配空间</span>            <span class="token class-name">SomeVal</span> v1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SomeVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 在栈上分配空间</span>            r1<span class="token punctuation">.</span>X <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>  <span class="token comment">// 提领指针</span>            v1<span class="token punctuation">.</span>X <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>  <span class="token comment">// 在栈上修改</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>r1<span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 5</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>v1<span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 5</span>                        <span class="token class-name">SomeRef</span> r2 <span class="token operator">=</span> r1<span class="token punctuation">;</span>  <span class="token comment">// 只复制引用</span>            <span class="token class-name">SomeVal</span> v2 <span class="token operator">=</span> v1<span class="token punctuation">;</span>  <span class="token comment">// 在栈上分配并赋值成员</span>            r1<span class="token punctuation">.</span>X <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>  <span class="token comment">// r1.X和r2.X都会修改</span>            v1<span class="token punctuation">.</span>X <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>  <span class="token comment">// v1.X会修改，v2.X不会</span>                        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>r1<span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 8</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>r2<span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 8</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>v1<span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 8</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>v2<span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 5</span>                        Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-1-值类型">1.1 值类型</h3><p>值类型包含<strong>简单类型</strong>、<strong>结构类型</strong>和<strong>枚举类型</strong>。</p><ul><li>简单类型<ul><li>有符号整型：sbyte、short、int、long</li><li>无符号整型：byte、ushort、unit、ulong</li><li>Unicode字符：char</li><li>IEEE浮点型：float、double</li><li>高精度小数：decimal</li><li>布尔型：bool</li></ul></li><li>结构类型<ul><li>用户自定义类型：struct</li></ul></li><li>枚举类型<ul><li>用户自定义类型：enum</li></ul></li></ul><h3 id="1-2-引用类型">1.2 引用类型</h3><p>引用类型包含<strong>类类型</strong>、<strong>接口类型</strong>、<strong>数组类型</strong>和<strong>委托类型</strong>。</p><ul><li>类类型<ul><li>所有其他类型的最终基类：object</li><li>Unicode字符串：string</li><li>用户自定义类型：class</li></ul></li><li>接口类型<ul><li>用户自定义类型：interface</li></ul></li><li>数组类型<ul><li>单维与多维数组：如int[]、int[,]</li></ul></li><li>委托类型<ul><li>用户自定义类型：delegate</li></ul></li></ul><h3 id="1-3-指针类型">1.3 指针类型</h3><p>仅在不安全代码中提供，使用<code>unsafe</code>关键词，开启不安全代码开发模式后，代码可以使用指针、分配和释放内存块，以及使用函数指针调用方法。<code>unsafe</code>代码的安全需要开发人员自行检测。</p><p>可以定义为指针的类型有</p><ul><li>sbyte、byte、short、unshort、int、uint、long、ulong、char、float、double、decimal、bool</li><li>任何枚举类型</li><li>任何指针类型</li><li>仅包含非托管类型的字段的任何用户定义的结构类型</li></ul><p><strong>装箱和拆箱</strong>操作不支持指针，但是可在不同的指针类型之间以及指针类型与整型之间进行转换。指针不能指向引用或包含引用的结构，因为无法对对象引用进行垃圾回收。</p><p>指针类型声明示例：</p><ul><li><code>int* p</code>: p是指向整数的指针</li><li><code>int** p</code>: p是指向整数的指针的指针</li><li><code>int*[] p</code>: p是指向整数的指针的一维数组</li><li><code>char* p</code>: p是指向字符的指针</li><li><code>void* p</code>: p是指向未知类型的指针</li></ul><p>对指针执行的运算符和语句</p><table><thead><tr><th>运算符/语句</th><th>使用</th><th>运算符/语句</th><th>使用</th></tr></thead><tbody><tr><td><code>*</code></td><td>执行指针间接寻址</td><td><code>-&gt;</code></td><td>通过指针访问结构的成员</td></tr><tr><td><code>[]</code></td><td>为指针建立索引</td><td><code>&amp;</code></td><td>获取变量的地址</td></tr><tr><td><code>++</code>和<code>--</code></td><td>递增和递减指针</td><td><code>+</code>和<code>-</code></td><td>执行指针算法</td></tr><tr><td><code>==</code>、<code>!=</code>、<code>&lt;</code>、<code>&gt;</code>、<code>&lt;=</code>和<code>&gt;=</code></td><td>比较指针</td><td><strong>stackalloc</strong></td><td>在堆栈上分配内存</td></tr><tr><td><strong>fixed</strong>语句</td><td>临时固定变量以便找到其地址</td><td></td><td></td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">UnsafeTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span></span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token keyword">unsafe</span> <span class="token comment">// 开启不安全代码模式</span>            <span class="token punctuation">{</span>                <span class="token keyword">fixed</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">// 设置指向托管变量的指针，在执行该语句期间固定此变量</span>                <span class="token punctuation">{</span>                    <span class="token keyword">int</span><span class="token operator">*</span> p2 <span class="token operator">=</span> p<span class="token punctuation">;</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token operator">*</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 10</span>                    p2 <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// 指针向后移</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token operator">*</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 20</span>                    p2 <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// 指针向后移</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token operator">*</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 30</span>                                        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 10</span>                    <span class="token operator">*</span>p <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// 指针所指向的值加1</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 11</span>                    <span class="token operator">*</span>p <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// 指针所指向的值加1</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 12</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 12</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-4-装箱与拆箱">1.4 装箱与拆箱</h3><p><strong>值类型转换为引用类型称为装箱</strong>，<strong>引用类型转为值类型称为拆箱</strong>。注：只有被装过箱的对象才能拆箱。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">BoxingAndUnboxingTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> val <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">object</span></span> obj <span class="token operator">=</span> val<span class="token punctuation">;</span>  <span class="token comment">// 装箱操作</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"obj = {0}"</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// obj = 100</span>                        <span class="token class-name"><span class="token keyword">int</span></span> num <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>  <span class="token comment">// 拆箱操作</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"num = {0}"</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// num = 100</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-5-类型转换">1.5 类型转换</h3><p>类型转换是把数据从一种类型转换为另一种类型，C#中类型转换有两种形式：</p><ul><li><strong>隐式类型转换</strong>：是C#默认的以安全的方式进行的转换，不会导致数据丢失，例如从小的整数类型转换为大的整数类型，从派生类转换为基类。</li><li><strong>显式类型转换</strong>-：即强制类型转换，需要强制转换运算符，而且强制转换会造成数据丢失。</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ForceTypeConversionTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">double</span></span> d <span class="token operator">=</span> <span class="token number">5673.74</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> i<span class="token punctuation">;</span>                        i <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> d<span class="token punctuation">;</span>  <span class="token comment">// double强制转换为int</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 5673</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>下表为C#内置的一些类型转换方法</p><table><thead><tr><th>方法</th><th>描述</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td><code>ToBoolean</code></td><td>转换为布尔型</td><td><code>ToByte</code></td><td>转换为字节类型</td></tr><tr><td><code>ToChar</code></td><td>转换为单个Unicode字符类型</td><td><code>ToDateTime</code></td><td>把整数或字符串类型转换为日期-时间结构</td></tr><tr><td><code>ToDecimal</code></td><td>把浮点型或整数型转换为十进制类型</td><td><code>ToDouble</code></td><td>转换为双精度浮点型</td></tr><tr><td><code>ToInt16</code></td><td>转换为16位整数类型</td><td><code>ToInt32</code></td><td>转换为32位整数类型</td></tr><tr><td><code>ToInt64</code></td><td>转换为64位整数类型</td><td><code>ToSbyte</code></td><td>转换为有符号字节类型</td></tr><tr><td><code>ToString</code></td><td>转换为字符串类型</td><td><code>ToType</code></td><td>转换为指定类型</td></tr><tr><td><code>ToUInt16</code></td><td>转换为16位无符号整数类型</td><td><code>ToUInt32</code></td><td>转换为32位无符号整数类型</td></tr><tr><td><code>ToUInt64</code></td><td>转换为64位无符号整数类型</td><td><code>ToSingle</code></td><td>转换为浮点数类型</td></tr></tbody></table><p>如：把不同值的类型转换为字符串类型</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">StringConversionTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">2022</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">float</span></span> b <span class="token operator">=</span> <span class="token number">8.005f</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">double</span></span> c <span class="token operator">=</span> <span class="token number">2345.6789</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">bool</span></span> d <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token comment">// 转换为字符串类型</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2022</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 8.005</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2345.6789</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// False</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-变量">2. 变量</h2><p>变量是一种通过变量名表示某个内存区域的方法，变量的值可以更改并重复使用。</p><p>C#中基础变量类型可以归纳为以下几种：</p><table><thead><tr><th>类型</th><th>示例</th></tr></thead><tbody><tr><td>整型</td><td>sbyte、byte、short、ushort、int、unit、long、ulong、char</td></tr><tr><td>浮点型</td><td>float、doule</td></tr><tr><td>十进制类型</td><td>decimal</td></tr><tr><td>布尔型</td><td>true、false</td></tr><tr><td>空类型</td><td>可为空值的数据类型</td></tr></tbody></table><h3 id="2-1-声明">2.1 声明</h3><p>声明变量的语法格式为<code>&lt;data_type&gt; variable_list;</code></p><p>如：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token class-name"><span class="token keyword">int</span></span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> k<span class="token punctuation">;</span><span class="token class-name"><span class="token keyword">double</span></span> a<span class="token punctuation">;</span><span class="token class-name"><span class="token keyword">char</span></span> b<span class="token punctuation">,</span> c<span class="token punctuation">;</span><span class="token class-name"><span class="token keyword">bool</span></span> d<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>变量名需要遵循的规则：</p><ul><li>变量名中只可以包含英文字母<code>a-z</code>,<code>A-Z</code>、数字<code>0-9</code>和下划线<code>_</code></li><li>不能以数字开头</li><li>变量名不能是任何C#的保留字或关键字</li></ul><h3 id="2-2-初始化">2.2 初始化</h3><p>可以在声明时直接初始化，也可以在声明后另起一行进行初始化，如：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">VariableTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">short</span></span> a<span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">float</span></span> b<span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">double</span></span> c<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token number">5.5</span><span class="token punctuation">;</span>            <span class="token comment">// 初始化变量</span>            a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>            b <span class="token operator">=</span> <span class="token number">20.1f</span><span class="token punctuation">;</span>            c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = {0}, b = {1}, c = {2}, d = {3}"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a = 10, b = 20.1, c = 30.1000003814697, d = 5.5</span>                        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"请输入一个数字："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 接受用户输入的值</span>            <span class="token class-name"><span class="token keyword">int</span></span> f <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToInt32</span><span class="token punctuation">(</span>Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出你所输入数字</span>                            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-常量">3. 常量</h2><p><strong>常量是固定值</strong>，使用关键字<code>const</code>定义，在程序执行期间不允许修改，常量可以是任何基本数据类型，比如整数常量、浮点常量、字符常量、字符串常量、枚举常量。</p><h3 id="3-1-定义">3.1 定义</h3><p>声明常量的语法格式为<code>const &lt;data_type&gt; constant_name = value;</code>，常量在声明的同时需要赋值。</p><h3 id="3-2-使用">3.2 使用</h3><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ConstantConversionTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">double</span></span> PI <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">double</span></span> r <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">double</span></span> area <span class="token operator">=</span> PI <span class="token operator">*</span> r <span class="token operator">*</span> r<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"半径为：{0}，圆的面积为：{1}"</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> area<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 半径为：3，圆的面积为：28.26</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-运算符">4. 运算符</h2><p>运算符是一个用来告诉编辑器执行特定数字或逻辑运算的符号。</p><h3 id="4-1-算术运算符">4.1 算术运算符</h3><p>完成特定算术运算的符号：</p><table><thead><tr><th>算术运算符</th><th>描述</th><th>算术运算符</th><th>描述</th></tr></thead><tbody><tr><td><code>+</code></td><td>加法</td><td><code>%</code></td><td>取余</td></tr><tr><td><code>-</code></td><td>减法</td><td><code>++</code></td><td>自增</td></tr><tr><td><code>*</code></td><td>乘法</td><td><code>--</code></td><td>自减</td></tr><tr><td><code>/</code></td><td>除法</td><td></td><td></td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ArithmeticOperatorsTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> c<span class="token punctuation">;</span>            c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a + b = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a + b = 30</span>            c <span class="token operator">=</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a - b = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a - b = -10</span>            c <span class="token operator">=</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a * b = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a * b = 200</span>            c <span class="token operator">=</span> a <span class="token operator">/</span> b<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a / b = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a / b = 0</span>            c <span class="token operator">=</span> a <span class="token operator">%</span> b<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a % b = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a % b = 10</span>            c <span class="token operator">=</span> <span class="token operator">++</span>a<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}, a = {1}"</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 11, a = 11</span>            c <span class="token operator">=</span> <span class="token operator">--</span>a<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}, a = {1}"</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 10, a = 10</span>            c <span class="token operator">=</span> b<span class="token operator">++</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}, b = {1}"</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 20, b = 21</span>            c <span class="token operator">=</span> b<span class="token operator">--</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}, b = {1}"</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 21, b = 20</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-2-关系运算符">4.2 关系运算符</h3><p>比较运算符左右两边操作数的符号，结果为<strong>true</strong>或<strong>false</strong>。</p><table><thead><tr><th>关系运算符</th><th>描述</th><th>关系运算符</th><th>描述</th></tr></thead><tbody><tr><td><code>==</code></td><td>检查是否相等</td><td><code>!=</code></td><td>检查是否不等</td></tr><tr><td><code>&gt;</code></td><td>检查左操作数是否大于右操作数</td><td><code>&lt;</code></td><td>检查左操作数是否小于右操作数</td></tr><tr><td><code>&gt;=</code></td><td>检查左操作数是否大于等于右操作数</td><td><code>&lt;=</code></td><td>检查左操作数是否小于等于右操作数</td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">RelationalOperatorTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span>             <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a等于b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>             <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a不等于b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a不等于b</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span>             <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a小于b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a小于b</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a不小于b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span>             <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a大于b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a不大于b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a不大于b</span>            <span class="token punctuation">}</span>            a <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>            b <span class="token operator">=</span> <span class="token number">33</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;=</span> b<span class="token punctuation">)</span>             <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a小于或等于b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a小于或等于b</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">&gt;=</span> a<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"b大于或等于a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// b大于或等于a</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-3-逻辑运算符">4.3 逻辑运算符</h3><p>进行逻辑运算的符号，结果为<strong>true</strong>或<strong>false</strong>。</p><table><thead><tr><th>逻辑运算符</th><th>描述</th></tr></thead><tbody><tr><td><code>&amp;&amp;</code></td><td>逻辑与，两个操作数都为true，结果才为true</td></tr><tr><td><code>||</code></td><td>逻辑或，两个操作数有一个为true，结果就为true</td></tr><tr><td><code>!</code></td><td>逻辑非，操作数为true，结果为false，操作数为false，结果为true</td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">LogicalOperatorsTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">bool</span></span> a <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">bool</span></span> b <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">)</span>             <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"条件为真"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 条件为真</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">||</span> b<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"条件为真"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 条件为真</span>            <span class="token punctuation">}</span>            a <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            b <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">)</span>             <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"条件为真"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"条件为假"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 条件为假</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>a <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"条件为真"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 条件为真  </span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-4-位运算符">4.4 位运算符</h3><table><thead><tr><th>位运算符</th><th>描述</th><th>位运算符</th><th>描述</th></tr></thead><tbody><tr><td><code>&amp;</code></td><td>按位与，均为1时，结果才为1</td><td><code>|</code></td><td>按位或，有一个为1时，结果就为1</td></tr><tr><td><code>^</code></td><td>按位异或，两个位数值不同时，结果才为1</td><td><code>~</code></td><td>按位取反，9变为1，1变为0</td></tr><tr><td><code>&lt;&lt;</code></td><td>二进制左移指定位数</td><td><code>&gt;&gt;</code></td><td>二进制右移指定位数</td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">BitwiseOperatorsTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            c <span class="token operator">=</span> a <span class="token operator">&amp;</span> b<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a &amp; b = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a &amp; b = 12</span>            c <span class="token operator">=</span> a <span class="token operator">|</span> b<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a | b = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a | b = 61</span>            c <span class="token operator">=</span> a <span class="token operator">^</span> b<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a ^ b = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a ^ b = 49</span>            c <span class="token operator">=</span> <span class="token operator">~</span>a<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"~a = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ~a = -61</span>            c <span class="token operator">=</span> a <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a &lt;&lt; 2 = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a &lt;&lt; 2 = 240</span>            c <span class="token operator">=</span> a <span class="token operator">&gt;&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a &gt;&gt; 2 = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a &gt;&gt; 2 = 15</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-5-赋值运算符">4.5 赋值运算符</h3><table><thead><tr><th>赋值运算符</th><th>描述</th><th>赋值运算符</th><th>描述</th></tr></thead><tbody><tr><td><code>=</code></td><td>右边赋值给左边</td><td><code>+=</code></td><td>左边+右边赋值给左边</td></tr><tr><td><code>-=</code></td><td>左边-右边赋值给左边</td><td><code>*=</code></td><td>左边*右边赋值给左边</td></tr><tr><td><code>/=</code></td><td>左边/右边赋值给左边</td><td><code>%=</code></td><td>左边%右边赋值给左边</td></tr><tr><td><code>&lt;&lt;=</code></td><td>左移且赋值给左边</td><td><code>&gt;&gt;=</code></td><td>右移且赋值给左边</td></tr><tr><td><code>&amp;=</code></td><td>按位与且赋值给左边</td><td><code>^=</code></td><td>按位异或且赋值给左边</td></tr><tr><td><code>|=</code></td><td>按位或且赋值给左边</td><td></td><td></td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">AssignmentOperatorsTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">21</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> c<span class="token punctuation">;</span>            c <span class="token operator">=</span> a<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 21</span>            c <span class="token operator">+=</span> a<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 42</span>            c <span class="token operator">-=</span> a<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 21</span>            c <span class="token operator">*=</span> a<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 441</span>            c <span class="token operator">/=</span> a<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 21</span>            c <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>            c <span class="token operator">%=</span> a<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 11</span>            c <span class="token operator">&lt;&lt;=</span> a<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 23068672</span>            c <span class="token operator">&gt;&gt;=</span> a<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 11</span>            c <span class="token operator">&amp;=</span> <span class="token number">2</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 2</span>            c <span class="token operator">^=</span> <span class="token number">2</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 0</span>            c <span class="token operator">|=</span> <span class="token number">2</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"c = {0}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// c = 2</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-6-其他运算符">4.6 其他运算符</h3><table><thead><tr><th>其他运算符</th><th>描述</th><th>其他运算符</th><th>描述</th></tr></thead><tbody><tr><td><code>sizeof()</code></td><td>返回数据类型的大小</td><td><code>typeof()</code></td><td>返回class的类型</td></tr><tr><td><code>&amp;</code></td><td>返回变量的地址</td><td><code>*</code></td><td>变量的指针</td></tr><tr><td><code>is</code></td><td>判断对象是否为某一类型</td><td><code>as</code></td><td>强制转换，即使失败也不抛异常</td></tr><tr><td><code>?:</code></td><td>三元运算符</td><td></td><td></td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">AssignmentOperatorsTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"int的大小是{0}"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">int</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// int的大小是4</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"short的大小是{0}"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">short</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// short的大小是2</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"double的大小是{0}"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">double</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// double的大小是8</span>            <span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span>            a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>            b <span class="token operator">=</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">?</span> <span class="token number">20</span> <span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"b的值是{0}"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// b的值是30</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-条件控制">5. 条件控制</h2><h3 id="5-1-if语句">5.1 if语句</h3><p>由一个布尔表达式后跟一个或多个语句组成。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">IfStatementTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>            <span class="token comment">// 使用if语句检查布尔条件，如果为真则进入if语句内</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span>             <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a大于10"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a大于10</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = {0}"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a = 20</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-2-if…else语句">5.2 if…else语句</h3><p>一个<code>if</code>语句后跟一个可选的else语句，<code>else</code>语句在布尔表达式为<strong>false</strong>时执行。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">IfElseStatementTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>            <span class="token comment">// 使用if语句检查布尔条件，如果为真则进入if语句内，否则进入else语句内</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span>             <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a大于10"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>             <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a小于或等于10"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a小于或等于10</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = {0}"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a = 5</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-3-if…else-if…else语句">5.3 if…else if…else语句</h3><p>一个<code>if</code>语句后可跟一个可选的<code>else if ... else</code>语句，用于测试多个条件：</p><ul><li>一个<code>if</code>后可跟零个或一个<code>else</code>，它必须在所有的<code>else if</code>之后</li><li>一个<code>if</code>后可跟两个或多个<code>else if</code>，它们必须在<code>else</code>之前</li><li>一旦某个<code>else if</code>匹配成功，其他<code>else if</code>或<code>else</code>将不会被测试</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">IfElseIFElseStatementTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">)</span>             <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a等于10"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a大于10"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a小于10"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a小于10</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = {0}"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a = 5</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-4-嵌套if语句">5.4 嵌套if语句</h3><p>嵌套<code>if</code>语句意味着你可以在一个<code>if</code>或<code>else if</code>语句内使用另一个<code>if</code>或<code>else if</code>语句。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">NestedIfStatementTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">100</span><span class="token punctuation">)</span>             <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span>                 <span class="token punctuation">{</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = 100, b = 200"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a = 100, b = 200</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-5-switch语句">5.5 switch语句</h3><p>一个<code>switch</code>语句允许测试一个变量等于多个值时的情况。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">SwitchStatementTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> day <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Monday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Tuesday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Wednesday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Thurday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">5</span><span class="token punctuation">:</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Friday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Friday</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">6</span><span class="token punctuation">:</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Saturday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token number">7</span><span class="token punctuation">:</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Sunday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-6-嵌套switch语句">5.6 嵌套switch语句</h3><p>可以在一个<code>switch</code>语句内使用另一个<code>switch</code>语句，不推荐这样做。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">NestedSwitchStatementTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">case</span> <span class="token number">100</span><span class="token punctuation">:</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = 100"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a = 100</span>                    <span class="token keyword">switch</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        <span class="token keyword">case</span> <span class="token number">200</span><span class="token punctuation">:</span>                            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"b = 200"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// b = 200</span>                            <span class="token keyword">break</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-7-三元运算符">5.7 三元运算符</h3><p>三元运算符又称条件运算符，可以用来代替<code>if...else</code>语句，形式如<code>Exp1 ? Exp2 : Exp3;</code>。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">TernaryOperatorTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> a <span class="token operator">==</span> <span class="token number">200</span> <span class="token punctuation">?</span> <span class="token number">100</span> <span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">;</span>            <span class="token comment">/* 等价于            int b;            if (a == 200)            {                b = 100;            }            else            {                b = 300;            }            */</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = {0}, b = {1}"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a = 100, b = 300</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6-循环控制">6. 循环控制</h2><p>循环语句允许多次执行一个语句或语句组。</p><h3 id="6-1-while循环">6.1 while循环</h3><p>只要给定条件为真，<code>while</code>循环语句会重复执行一个目标语句，<code>while</code>循环又称为<strong>当型循环</strong>，在执行循环主体之前测试条件。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">WhileStatementTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = {0}"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>                a<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// a = 3</span>            <span class="token comment">// a = 4</span>            <span class="token comment">// a = 5</span>            <span class="token comment">// a = 6</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="6-2-for-foreach循环">6.2 for/foreach循环</h3><p><strong>for</strong></p><p><code>for</code>循环是允许编写一个执行特定次数循环的循环控制结构。</p><p>语法为：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">for (init; condition; increment){    statement(s);}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ForStatementTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> a <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">;</span> a<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = {0}"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// a = 3</span>            <span class="token comment">// a = 4</span>            <span class="token comment">// a = 5</span>            <span class="token comment">// a = 6</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>foreach</strong></p><p><code>foreach</code>可以迭代数组或者一个集合对象。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ForeachStatementTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> array <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> num <span class="token keyword">in</span> array<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"num = {0}"</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// num = 3</span>            <span class="token comment">// num = 4</span>            <span class="token comment">// num = 5</span>            <span class="token comment">// num = 6</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="6-3-do…while循环">6.3 do…while循环</h3><p><code>do...while</code>循环是在尾部检查循环条件，直到给定的条件变为假为止。<code>do...while</code>又称<strong>直到型循环</strong>，会保证循环体至少执行一次。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">DoWhileStatementTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>            <span class="token keyword">do</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = {0}"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>                a <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// a = 3</span>            <span class="token comment">// a = 4</span>            <span class="token comment">// a = 5</span>            <span class="token comment">// a = 6</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="6-4-嵌套循环">6.4 嵌套循环</h3><p><code>C#</code>允许在任何类型循环内嵌套任何类型的循环。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">NestedLoopStatementTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">9</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"{0} * {1} = {2}\t"</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> i<span class="token punctuation">,</span> i <span class="token operator">*</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">/*1 * 1 = 11 * 2 = 2       2 * 2 = 41 * 3 = 3       2 * 3 = 6       3 * 3 = 91 * 4 = 4       2 * 4 = 8       3 * 4 = 12      4 * 4 = 161 * 5 = 5       2 * 5 = 10      3 * 5 = 15      4 * 5 = 20      5 * 5 = 251 * 6 = 6       2 * 6 = 12      3 * 6 = 18      4 * 6 = 24      5 * 6 = 30      6 * 6 = 361 * 7 = 7       2 * 7 = 14      3 * 7 = 21      4 * 7 = 28      5 * 7 = 35      6 * 7 = 42      7 * 7 = 491 * 8 = 8       2 * 8 = 16      3 * 8 = 24      4 * 8 = 32      5 * 8 = 40      6 * 8 = 48      7 * 8 = 56      8 * 8 = 641 * 9 = 9       2 * 9 = 18      3 * 9 = 27      4 * 9 = 36      5 * 9 = 45      6 * 9 = 54      7 * 9 = 63      8 * 9 = 72     9 * 9 = 81*/</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="6-5-break语句">6.5 break语句</h3><p><code>break</code>语句有两种用法：</p><ul><li>当<code>break</code>语句出现在一个循环内时，循环会立即终止，跳出当前循环体，执行下一条语句</li><li>可用于<code>switch</code>语句中终止一个<code>case</code></li></ul><p>注意，如果是嵌套循环，<code>break</code>循环只会跳出他所在的那一层循环。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">BreakStatementTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">)</span>             <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = {0}"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>                a<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> <span class="token number">6</span><span class="token punctuation">)</span>                 <span class="token punctuation">{</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token comment">// a = 3</span>            <span class="token comment">// a = 4</span>            <span class="token comment">// a = 5</span>            <span class="token comment">// a = 6</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="6-6-continue语句">6.6 continue语句</h3><p><code>continue</code>语句会提前结束这次循环，开始下一次循环。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ContinueStatementTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">)</span>             <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span>                 <span class="token punctuation">{</span>                    a<span class="token operator">++</span><span class="token punctuation">;</span>                    <span class="token keyword">continue</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = {0}"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>                a<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// a = 3</span>            <span class="token comment">// a = 5</span>            <span class="token comment">// a = 6</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="7-数组">7. 数组</h2><p>数组是存储<strong>相同类型</strong>元素的固定大小的<strong>顺序</strong>集合，数组中某个指定元素是通过索引来访问的，所有的数组是由连续的内存位置组成，最低的地址对应第一个元素，最高的地址对应最后一个元素。</p><h3 id="7-1-声明">7.1 声明</h3><p>声明语法为<code>datatype[] arrayName;</code>，其中datatype用于指定数组内元素的类型，[]指定数组的大小，arrayName指定数组的名字，如<code>double[] balance;</code>。</p><h3 id="7-2-初始化">7.2 初始化</h3><p>声明一个数组不会在内存中初始化数组，当初始化数组遍历时，可以赋值给数组。</p><p>数组是一个引用类型，所以需要使用<code>new</code>关键字来创建数组的实例，如<code>double[] balance = new double[10];</code>。</p><h3 id="7-3-赋值">7.3 赋值</h3><p>赋值有多种形式，可以通过索引号赋值给单个的数组元素，如<code>balance[0] = 123.0;</code>。</p><p>也可以在声明的同时给数组赋值，如<code>double[] balance = {123.0, 456.0, 789.0};</code>。</p><p>还可以创建并初始化一个数组，如<code>int[] marks = new int[3]{1, 2, 3};</code>，此处可以省略数组的大小，即<code>int[] marks = new int[]{1, 2, 3};。</code></p><p>可以赋值给一个数组变量到另一个目标数组变量中，此时目标和源会指向相同的内存位置。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> marks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> numbers <span class="token operator">=</span> marks<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="7-4-访问数组元素">7.4 访问数组元素</h3><p>元素是通过带索引的数组名称来访问的，如<code>int a = numbers[1];</code>。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ArrayTest1</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span></span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 声明并初始化</span>            <span class="token comment">// 循环赋值</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                num<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// 循环访问、遍历</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"num[{0}] = {1}"</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> num<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// num[0] = 100</span>            <span class="token comment">// num[1] = 101</span>            <span class="token comment">// num[2] = 102</span>            <span class="token comment">// num[3] = 103</span>            <span class="token comment">// num[4] = 104</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>除了使用<code>for</code>循环来访问数组中每个元素，还可以使用<code>foreach</code>语句</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ArrayTest2</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span></span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 声明并初始化</span>            <span class="token comment">// 循环赋值</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                num<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// 遍历</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> j <span class="token keyword">in</span> num<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"num[{0}] = {1}"</span><span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// num[0] = 100</span>            <span class="token comment">// num[1] = 101</span>            <span class="token comment">// num[2] = 102</span>            <span class="token comment">// num[3] = 103</span>            <span class="token comment">// num[4] = 104</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-5-多维数组">7.5 多维数组</h3><p><code>C#</code>支持多维数组，多维数组又称为矩形数组，二维数组是最简单最常用的多维数组，可以被认为是一个带有x行和y列的表格。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">TwoDArrayTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment">// 声明初始化并赋值</span>            <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">]</span></span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span></span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token comment">// 遍历</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"num[{0},{1}] = {2}"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> num<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token comment">// num[0,0] = 1</span>            <span class="token comment">// num[0,1] = 2</span>            <span class="token comment">// num[1,0] = 3</span>            <span class="token comment">// num[1,1] = 4</span>            <span class="token comment">// num[2,0] = 5</span>            <span class="token comment">// num[2,1] = 6</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-6-交替数组">7.6 交替数组</h3><p>交替数组是数组的数组，是一维数组。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">AlternatingArrayTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment">// 声明初始化并赋值</span>            <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token comment">// 遍历</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"num[{0}][{1}] = {2}"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> num<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">j</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token comment">// num[0][0] = 1</span>            <span class="token comment">// num[0][1] = 2</span>            <span class="token comment">// num[1][0] = 3</span>            <span class="token comment">// num[1][1] = 4</span>            <span class="token comment">// num[2][0] = 5</span>            <span class="token comment">// num[2][1] = 6</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-7-传递数组给函数">7.7 传递数组给函数</h3><p>可以传递数组作为函数的参数，可以通过指定不带索引的数组名称来给函数传递一个指向数组的指针。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ArrayAndFunctionTest</span>    <span class="token punctuation">{</span>        <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetAverage</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> arr<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> size<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>             <span class="token punctuation">{</span>                sum <span class="token operator">+=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> sum <span class="token operator">/</span> size<span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token class-name">ArrayAndFunctionTest</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArrayAndFunctionTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">double</span></span> avg <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">GetAverage</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"avg = {0}"</span><span class="token punctuation">,</span> avg<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// avg = 2.5</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-8-参数数组">7.8 参数数组</h3><p>当声明一个方法时，可能无法确定传递给函数的参数数目，此时，可以使用参数数组解决该问题，参数数组通常用于传递未知数量的参数给函数。C#提供了<code>params</code>关键字，是调用数组为形参的方法时，既可以传递数组实参，又可以传递一组数组元素。其格式为<code>public 返回类型 方法名称(params 类型名称[] 数组名称)</code>。</p><p>注意：</p><ul><li>带<code>params</code>关键字的参数类型必须是一维数组，不能使用多维数组</li><li>不能和<code>ref</code>、<code>out</code>同时使用</li><li>带<code>params</code>关键字的参数必须是最后一个参数，并且只能运行一个<code>params</code>关键字</li><li>不能使用<code>params</code>来使用重载方法</li><li>没有<code>params</code>关键字的方法优先级高于有<code>params</code>关键字的方法</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ArrayAndParamsTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> b<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a + b = {0}"</span><span class="token punctuation">,</span> a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token keyword">params</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> arr<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token keyword">in</span> arr<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"{0} "</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">Test</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a + b = 3</span>            <span class="token function">Test</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1 2 3 4 5</span>            <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> arr <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token function">Test</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1 1 2 2</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-9-Array类">7.9 Array类</h3><p><code>Array</code>类是C#中所有数组的基类，他是在<code>System</code>命名空间定义的，<code>Array</code>类提供了各种用于数组的属性和方法。</p><p><strong>属性</strong></p><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><code>IsFixedSize</code></td><td>获取一个值，该值指示数组是否带有固定大小</td></tr><tr><td><code>IsReadOnly</code></td><td>获取一个值，该值指示数组是否只读</td></tr><tr><td><code>Length</code></td><td>获取一个32位整数，该值表示所有维度的数组的元素总数</td></tr><tr><td><code>LongLength</code></td><td>获取一个64位整数，该值表示所有维度的数组的元素总数</td></tr><tr><td><code>Rank</code></td><td>获取数组的维度</td></tr></tbody></table><p><strong>方法</strong></p><table><thead><tr><th>方法</th><th>描述</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td><code>Clear</code></td><td>根据元素类型，设置数组中某个范围的元素为零、false或null</td><td><code>Copy(Array, Array, Int32)</code></td><td>从数组的第一个元素开始复制某个范围的元素到另一个数组的第一个元素位置</td></tr><tr><td><code>CopyTo(Array, Int32)</code></td><td>从当前的一维数组中复制所有元素到一个指定的一维数组的指定索引位置</td><td><code>GetLength</code></td><td>获取一个32位整数，表示指定维度的数组中的元素总和</td></tr><tr><td><code>GetLongLength</code></td><td>获取一个64位整数，表示指定维度的数组中的元素总和</td><td><code>GetLowerBound</code></td><td>获取数组中指定维度的下界</td></tr><tr><td><code>GetType</code></td><td>获取当前实例的类型</td><td><code>GetUpperBound</code></td><td>获取数组中指定维度的上界</td></tr><tr><td><code>GetValue(Int32)</code></td><td>获取一维数组中指定位置的值</td><td><code>IndexOf(Array, Object)</code></td><td>搜索指定的对象，返回整个一维数组中第一次出现的索引</td></tr><tr><td><code>Reverse(Array)</code></td><td>逆转整个一维数组中元素的顺序</td><td><code>SetValue(Object, Int32)</code></td><td>给一维数组中指定位置的元素设置值</td></tr><tr><td><code>Sort(Array)</code></td><td>使用数组的每个元素的<strong>IComparable</strong>接口实现排序</td><td><code>ToString</code></td><td>返回当前对象的字符串</td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ArrayClassTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> list <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"数组长度：{0}"</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"原始数组："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token keyword">in</span> list<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Array<span class="token punctuation">.</span><span class="token function">Reverse</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"逆转数组："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token keyword">in</span> list<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Array<span class="token punctuation">.</span><span class="token function">Sort</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"排序数组："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token keyword">in</span> list<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 数组长度：6</span>            <span class="token comment">// 原始数组：3 2 5 8 7 6 </span>            <span class="token comment">// 逆转数组：6 7 8 5 2 3 </span>            <span class="token comment">// 排序数组：2 3 5 6 7 8</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-10-Array、ArrayList与泛型List-T-的区别">7.10 Array、ArrayList与泛型List&lt;T&gt;的区别</h3><p><strong>Array</strong></p><p>数组<code>Array</code>是一个存储相同类型元素的固定大小的顺序集合，数组是用来存储数据的集合，通常认为数组是一个同一类型变量的集合。</p><p><code>Array</code>类是**C#**中所有数组的基类，在<code>System</code>空间定义的。</p><p>数组在内存中是连续存储的，所以优点是索引速度很快，赋值和修改元素也非常简单。</p><p>缺点是声明数组的时候必须指定数组的长度；如果数组太长会造成内存浪费，太短会造成数据溢出的错误；在数组两个数据间插入数据很麻烦。</p><p><strong>ArrayList</strong></p><p>为了解决数组的缺点，<strong>C#<strong>提供了<code>ArrayList</code>对象，<code>ArrayList</code>是在命名空间<code>System.Collections</code>下，使用该类时必须进行引用，同时继承了</strong>IList</strong>接口，提供了数据存储和检索。</p><p><code>ArrayList</code>对象的大小是按照其中存储的数据来动态扩充与收缩的，不需要再声明时指定长度。</p><p><code>ArrayList</code>的默认初始容量是0，随着元素添加到<code>ArrayList</code>中，容量会根据需要重新分配自动增加。</p><p><code>ArrayList</code>解决了前面提到的Array数组的所有缺点，但是在存储或检索值类型时通常会发生装箱和拆箱操作，带来很大性能损耗，不是类型安全的。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ArrayListTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">ArrayList</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Count: {0}, Capacity: {1}"</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span>Count<span class="token punctuation">,</span> list<span class="token punctuation">.</span>Capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">PrintValues</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Count: 3, Capacity: 4</span>            <span class="token comment">// Hello World !</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PrintValues</span><span class="token punctuation">(</span><span class="token class-name">IEnumerable</span> list<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> obj <span class="token keyword">in</span> list<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"{0} "</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>泛型List&lt;T&gt;</strong></p><p>由于<code>ArrayList</code>存在不安全类型与装箱拆箱的缺点，所以出现了<code>List</code>类，该类使用大小可按需动态增加的数组实现<strong>IList</strong>泛型接口，是类型安全的，在声明<code>List</code>集合时，必须为其<code>List</code>集合内数据声明数据类型。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ListTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Count: {0}, Capacity: {1}"</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span>Count<span class="token punctuation">,</span> list<span class="token punctuation">.</span>Capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> e <span class="token keyword">in</span> list<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"{0} "</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Count: 3, Capacity: 4</span>            <span class="token comment">// Hello World !</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>总结</strong>：</p><ul><li><p>数组<code>Array</code>的容量固定，而<code>ArrayList</code>和泛型<code>List&lt;T&gt;</code>的容量可自动扩充</p></li><li><p>数组<code>Array</code>可有多个维度，而<code>ArrayList</code>和泛型<code>List&lt;T&gt;</code>始终只有一个维度</p></li><li><p>特定类型的数组<code>Array</code>性能优于<code>ArrayList</code>的性能</p></li><li><p><code>ArrayList</code>和泛型<code>List&lt;T&gt;</code>基本等同，如果<code>List&lt;T&gt; </code>类的类型T是引用类型，则两个类的行为是完全相同的。如果T是值类型，需要考虑装箱和拆箱造成的性能损耗，<code>List&lt;T&gt; </code>是类型安全</p></li></ul><h2 id="8-枚举">8. 枚举</h2><p>枚举是一种类型，适用于某些取值范围有限的数据，枚举类型是使用<code>enum</code>关键字声明的，默认访问权限和类一样，都是<strong>internal</strong>，枚举的每一个值都是一个整型，默认是从0开始。</p><h3 id="8-1-声明">8.1 声明</h3><p>声明的一般语法为 <code>[访问权限修饰符] enum &lt;enum_name&gt; { enumeration list }</code></p><p>其中<code>enum_name</code>为枚举的类型名称，遵循大驼峰命名法，<code>enumeration list</code>是一个用逗号分割的标识符列表，如</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Days</span><span class="token punctuation">{</span>    Sun<span class="token punctuation">,</span> Mon<span class="token punctuation">,</span> Tue<span class="token punctuation">,</span> Wed<span class="token punctuation">,</span> Thu<span class="token punctuation">,</span> Fri<span class="token punctuation">,</span> Sat<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-2-访问">8.2 访问</h3><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">EnumTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">enum</span> <span class="token class-name">Days</span> <span class="token punctuation">{</span>Sun<span class="token punctuation">,</span> Mon<span class="token punctuation">,</span> Tue<span class="token punctuation">,</span> Wed<span class="token punctuation">,</span> Thu<span class="token punctuation">,</span> Fri<span class="token punctuation">,</span> Sat<span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>Days<span class="token punctuation">.</span>Sun<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Sun</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>Days<span class="token punctuation">.</span>Sun<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Days<span class="token punctuation">)</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Thu</span>            <span class="token class-name">Days</span> a <span class="token operator">=</span> <span class="token punctuation">(</span>Days<span class="token punctuation">)</span><span class="token number">4</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Thu</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="9-字符串">9. 字符串</h2><h3 id="9-1-创建String对象">9.1 创建String对象</h3><p>使用以下方法来创建<code>String</code>对象：</p><ul><li>通过给<code>String</code>变量指定一个字符串</li><li>通过使用<code>String</code>类构造函数</li><li>通过使用字符串串联符号<code>+</code></li><li>通过检索属性或调用一个返回字符串的方法</li><li>通过格式化方法来转换一个值或对象为它的字符串表示形式</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">StringCreateTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment">// 指定一个字符串</span>            <span class="token class-name"><span class="token keyword">string</span></span> fname<span class="token punctuation">,</span> lname<span class="token punctuation">;</span>            fname <span class="token operator">=</span> <span class="token string">"Harry"</span><span class="token punctuation">;</span>            lname <span class="token operator">=</span> <span class="token string">"Peter"</span><span class="token punctuation">;</span>            <span class="token comment">// 通过+符号连接</span>            <span class="token class-name"><span class="token keyword">string</span></span> fullname <span class="token operator">=</span> fname <span class="token operator">+</span> lname<span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Full Name: {0}"</span><span class="token punctuation">,</span> fullname<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Full Name: HarryPeter</span>            <span class="token comment">// 使用string构造函数</span>            <span class="token class-name"><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> letters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token char">'H'</span><span class="token punctuation">,</span> <span class="token char">'e'</span><span class="token punctuation">,</span> <span class="token char">'l'</span><span class="token punctuation">,</span> <span class="token char">'l'</span><span class="token punctuation">,</span> <span class="token char">'o'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">string</span></span> greetings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span></span><span class="token punctuation">(</span>letters<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Greetings: {0}"</span><span class="token punctuation">,</span> greetings<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Greetings: Hello</span>            <span class="token comment">// 方法返回字符串</span>            <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> sarray <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"Hello"</span><span class="token punctuation">,</span> <span class="token string">"From"</span><span class="token punctuation">,</span> <span class="token string">"C#"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">string</span></span> message <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">,</span> sarray<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Message: {0}"</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Message: Hello from C#</span>            <span class="token comment">// 用于转化值的格式化方法</span>            <span class="token class-name">DateTime</span> waiting <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DateTime</span><span class="token punctuation">(</span><span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">string</span></span> chat01 <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">"Message sent at {0:t} on {0:D}"</span><span class="token punctuation">,</span> waiting<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Message: {0}"</span><span class="token punctuation">,</span> chat01<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Message: Message sent at 9:01 on Monday, October 10, 2022</span>            <span class="token class-name"><span class="token keyword">string</span></span> chat02 <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$"Message sent at </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">waiting</span><span class="token format-string"><span class="token punctuation">:</span>t</span><span class="token punctuation">}</span></span><span class="token string"> on </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">waiting</span><span class="token format-string"><span class="token punctuation">:</span>D</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Message: {0}"</span><span class="token punctuation">,</span> chat02<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Message: Message sent at 9:01 on Monday, October 10, 2022</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="9-2-属性和方法">9.2 属性和方法</h3><p><code>String</code>类有两个属性:</p><ul><li><code>Chars</code>：在当前<code>String</code>对象中获取<code>Char</code>对象的指定位置</li><li><code>Length</code>：在当前<code>String</code>对象中获取字符数</li></ul><p><code>String</code>类的方法：</p><table><thead><tr><th>方法名称</th><th>描述</th><th>方法名称</th><th>描述</th></tr></thead><tbody><tr><td><code>public static int Compare(string strA, string strB)</code></td><td>比较两个指定的string对象，并返回一个表示他们在排列顺序中相对位置的整数。该方法区分大小写</td><td><code>public static int Compare(string strA, string strB, bool ignoreCase)</code></td><td>比较两个指定的string对象，并返回一个表示他们在排列顺序中相对位置的整数。该方法不区分大小写</td></tr><tr><td><code>public static string Concat(string str0, string str1)</code></td><td>连接两个string对象</td><td><code>public static string Concat(string str0, string str1, string str2)</code></td><td>连接三个string对象</td></tr><tr><td><code>public static string Concat(string str0, string str1, string str2, string str3)</code></td><td>连接四个string对象</td><td><code>public bool Contains(string value)</code></td><td>返回一个表示指定string对象是否出现在字符串中的值</td></tr><tr><td><code>public static string Copy(string str)</code></td><td>创建一个与指定字符串具有相同值的新string对象</td><td><code>public void CopyTo(int sourceIndex, char[] destination, int destinationIndex, int count)</code></td><td>从string对象的指定位置开始复制指定数量的字符到Unicode字符数组中的指定位置</td></tr><tr><td><code>public bool EndsWith(string value)</code></td><td>判断string对象的结尾是否匹配指定的字符串</td><td><code>public bool Equals(string value)</code></td><td>判断当前的string对象是否与指定的string对象具有相同的值</td></tr><tr><td><code>public static bool Equals(string value)</code></td><td>判断两个指定的string对象是否具有相同的值</td><td><code>public static string Format(string format, Object arg0)</code></td><td>把指定字符串中一个或多个格式项替换为指定对象的字符串表示形式</td></tr><tr><td><code>public int IndexOf(char value)</code></td><td>返回指定Unicode字符在当前字符串中第一次出现的索引，索引从0开始</td><td><code>public int IndexOf(string value)</code></td><td>返回指定字符串在该实例中第一次出现的索引，索引从0开始</td></tr><tr><td><code>public int IndexOf(char value, int startIndex)</code></td><td>返回指定Unicode字符在当前字符串中指定字符位置开始搜索第一次出现的索引，索引从0开始</td><td><code>public int IndexOf(string value, int startIndex)</code></td><td>返回指定字符串在当前字符串中指定字符位置开始搜索第一次出现的索引，索引从0开始</td></tr><tr><td><code>public int IndexOfAny(char[] anyOf)</code></td><td>返回某一个指定的Unicode字符数组中任意字符在该实例中第一次出现的索引，索引从0开始</td><td><code>public int IndexOfAny(char[] anyOf, int startIndex)</code></td><td>返回某一个指定的Unicode字符数组从任意字符指定字符位置开始搜索第一次出现的索引，索引从0开始</td></tr><tr><td><code>public string Insert(int startIndex, string value)</code></td><td>返回一个新的字符串，其中，指定的字符串被插入在当前string对象的指定索引位置</td><td><code>public static bool IsNullOrEmpty(string value)</code></td><td>指示指定的字符串是否为null或者是否为一个空的字符串</td></tr><tr><td><code>public static string Join(string separator, string[] value)</code></td><td>连接一个字符串数组中的所有元素，使用指定的分隔符分割每个元素</td><td><code>public static string Join(string separator, string[] value, int startIndex, int count)</code></td><td>连接一个字符串数组中从指定位置开始的元素，使用指定的分隔符分割每个元素</td></tr><tr><td><code>public int LastIndexOf(char value)</code></td><td>返回指定Unicode字符在当前string对象中最后一次出现的索引位置，索引从0开始</td><td><code>public int LastIndexOf(string value)</code></td><td>返回指定字符串在当前string对象中最后一次出现的索引位置，索引从0开始</td></tr><tr><td><code>public string Remove(int startIndex)</code></td><td>移除当前实例中的所有字符，从指定位置开始，一直到最后一个位置为止，并返回字符串</td><td><code>public string Remove(int startIndex, int count)</code></td><td>从当前字符串的指定位置开始移除指定数量的字符，并返回字符串</td></tr><tr><td><code>public string Replace(char oldChar, char newChar)</code></td><td>把当前string对象中，所有指定的Unicode字符替换为另一个Unicode字符，并返回新的字符串</td><td><code>public string Replace(string oldValue, string newValue)</code></td><td>把当前string对象中，所有指定的字符串替换为另一个指定的字符串，并返回新的字符串</td></tr><tr><td><code>public string[] Split(params char[] separator)</code></td><td>返回一个字符串数组，包含当前的string对象中的子字符串，子字符串是按照指定的Unicode字符数组中的元素进行分隔的</td><td><code>public string[] Split(char[] separator, int count)</code></td><td>返回一个字符串数组，包含当前的string对象中的子字符串，子字符串是按照指定的Unicode字符数组中的元素进行分隔的,count指定要返回的子字符串最大数目</td></tr><tr><td><code>public bool StartsWith(string value)</code></td><td>判断字符串实例的开头是否匹配指定的字符串</td><td><code>public char[] ToCharArray()</code></td><td>返回一个带有当前string对象中所有字符的Unicode字符数组</td></tr><tr><td><code>public char[] ToCharArray(int startIndex, int length)</code></td><td>返回一个带有当前string对象中所有字符的Unicode字符数组，从指定索引开始，直到到达指定的长度为止</td><td><code>public string ToLower()</code></td><td>把字符串转换为小写并返回</td></tr><tr><td><code>public string ToUpper()</code></td><td>把字符串转换为大写并返回</td><td><code>public string Trim()</code></td><td>移除当前string对象中前后所有的空白字符</td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">StringMethodsTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">string</span></span> str1 <span class="token operator">=</span> <span class="token string">"This is text"</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">string</span></span> str2 <span class="token operator">=</span> <span class="token string">"This is test"</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token function">Compare</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> str2<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>             <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>str1 <span class="token operator">+</span> <span class="token string">" and "</span> <span class="token operator">+</span> str2 <span class="token operator">+</span> <span class="token string">" are equal."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>str1 <span class="token operator">+</span> <span class="token string">" and "</span> <span class="token operator">+</span> str2 <span class="token operator">+</span> <span class="token string">" are not equal."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// This is text and This is test are not equal.</span>            <span class="token punctuation">}</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>str1<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"The sequence 'text' was found."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// The sequence 'text' was found.</span>            <span class="token punctuation">}</span>            <span class="token class-name"><span class="token keyword">string</span></span> substr <span class="token operator">=</span> str1<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>substr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// text</span>            <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> strarray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">{</span><span class="token string">"Hello world"</span><span class="token punctuation">,</span> <span class="token string">"Hello Csharp"</span><span class="token punctuation">,</span> <span class="token string">"Hello Sunday"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">string</span></span> str <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">,</span> strarray<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Hello world</span>            <span class="token comment">// Hello Csharp</span>            <span class="token comment">// Hello Sunday</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="10-命名空间">10. 命名空间</h2><p>命名空间的设计目的是提供一种让一组名称与其他名称分隔的方式，可以使一个命名空间中声明的类名与另一个命名空间中声明的同类名不冲突。举个例子，一个文件夹中可以包含多个文件夹，每一个文件夹中不能有相同的文件名，但是不同文件夹中的文件可以重名。</p><h3 id="10-1-定义">10.1 定义</h3><p>以关键字<code>namespace</code>开始，后跟命名空间的名字</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">FirstSpace</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ClassA</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MyFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Inside FirstSpace"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">namespace</span> <span class="token namespace">SecondSpace</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">ClassA</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MyFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Inside SecondSpace"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">TestClass</span><span class="token punctuation">{</span>    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name">FirstSpace<span class="token punctuation">.</span>ClassA</span> fc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FirstSpace<span class="token punctuation">.</span>ClassA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SecondSpace<span class="token punctuation">.</span>ClassA</span> sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SecondSpace<span class="token punctuation">.</span>ClassA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        fc<span class="token punctuation">.</span><span class="token function">MyFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Inside FirstSpace</span>        sc<span class="token punctuation">.</span><span class="token function">MyFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Inside SecondSpace</span>        Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="10-2-using的用法">10.2 using的用法</h3><ul><li><code>using指令</code>：可以引入命名空间，如：</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><code>using static指令</code>：无需指定类型名称即可访问其静态成员的类型。</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token keyword">static</span> <span class="token class-name">System<span class="token punctuation">.</span>Math</span><span class="token punctuation">;</span><span class="token keyword">var</span> <span class="token operator">=</span> PI<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>起别名</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token class-name">Project</span> <span class="token operator">=</span> <span class="token class-name">PC<span class="token punctuation">.</span>MyCompany<span class="token punctuation">.</span>Project</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>using语句</code>：将实例与代码绑定。</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name">Font</span> font3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Font</span><span class="token punctuation">(</span><span class="token string">"Arial"</span><span class="token punctuation">,</span> <span class="token number">10.0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>              font4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Font</span><span class="token punctuation">(</span><span class="token string">"Arial"</span><span class="token punctuation">,</span> <span class="token number">10.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// Use font3 and font4.</span><span class="token punctuation">}</span><span class="token comment">// 代码段结束时，自动调用font3和font4的Dispose方法，释放实例</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="10-3-嵌套命名空间">10.3 嵌套命名空间</h3><p>命名空间可以被嵌套，即可以在一个命名空间内部定义另一个命名空间，使用点运算符访问嵌套命名空间的成员。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">SomeNameSpace</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">SomeNameSpace<span class="token punctuation">.</span>Nested</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">SomeNameSpace</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassA</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Inside SomeNameSpace"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Inside SomeNameSpace</span>            Nested<span class="token punctuation">.</span>ClassB<span class="token punctuation">.</span><span class="token function">MyFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Inside Nested</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token comment">// 内嵌命名空间</span>    <span class="token keyword">namespace</span> <span class="token namespace">Nested</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassB</span>        <span class="token punctuation">{</span>            <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MyFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Inside Nested"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="11-类">11. 类</h2><p>类是对象的蓝图，对象是类的实例，构成类的方法和变量称为类的成员。</p><h3 id="11-1-定义">11.1 定义</h3><p>类的定义是以关键字<code>class</code>开始的，后跟类的名称，类的主体包含在一对花括号里面，主体的组成可能包括构造函数、析构函数、成员变量、成员函数，如：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>access</span> <span class="token attr-name">specifier</span><span class="token punctuation">&gt;</span></span> class class_name{    // member variables    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>access</span> <span class="token attr-name">specifier</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span> <span class="token attr-name">type</span><span class="token punctuation">&gt;</span></span> variable1;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>access</span> <span class="token attr-name">specifier</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span> <span class="token attr-name">type</span><span class="token punctuation">&gt;</span></span> variable2;    // member methods    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>access</span> <span class="token attr-name">specifier</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>return</span> <span class="token attr-name">type</span><span class="token punctuation">&gt;</span></span> method1(parameter_list)    {        // method body    }    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>access</span> <span class="token attr-name">specifier</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>return</span> <span class="token attr-name">type</span><span class="token punctuation">&gt;</span></span> method2(parameter_list)    {        // method body    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>访问标识符<code>&lt;access specifier&gt;</code>指定了对类及其成员的访问权限，如果没有指定，则使用默认的访问标志符，类的默认访问标识符是<code>internal</code>，成员的默认访问标识符是<code>private</code>。</li><li>数据类型<code>&lt;data type&gt;</code>指定了变量的类型，返回类型<code>&lt;return type&gt;</code>指定了方法返回的数据类型</li><li>如果要访问类的成员，使用<code>.</code>运算符，其链接了对象的名称和成员的名称。</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">BoxApplication</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Box</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">double</span></span> length<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">double</span></span> width<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">double</span></span> height<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> length <span class="token operator">*</span> width <span class="token operator">*</span> height<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Boxtest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Box</span> box1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Box</span> box2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">double</span></span> volume <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>            box1<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">5.0</span><span class="token punctuation">;</span>            box1<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">6.0</span><span class="token punctuation">;</span>            box1<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">7.0</span><span class="token punctuation">;</span>            box2<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">10.0</span><span class="token punctuation">;</span>            box2<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">11.0</span><span class="token punctuation">;</span>            box2<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">12.0</span><span class="token punctuation">;</span>            volume <span class="token operator">=</span> box1<span class="token punctuation">.</span><span class="token function">GetVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Box1的体积：{0}"</span><span class="token punctuation">,</span> volume<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Box1的体积：210</span>            volume <span class="token operator">=</span> box2<span class="token punctuation">.</span><span class="token function">GetVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Box2的体积：{0}"</span><span class="token punctuation">,</span> volume<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Box2的体积：1320</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-2-成员函数和封装">11.2 成员函数和封装</h3><p>类的成员函数是在类内部定义的函数，能在类的任何对象上操作，其能访问该对象的所有成员。</p><p>类的成员变量是对象的属性，且保持私有来实现封装，这些变量只能使用公共成员函数来访问。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">BoxApplication</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Box</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">double</span></span> length<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">double</span></span> width<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">double</span></span> height<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetLength</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            length <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetWidth</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            width <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetHeight</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            height <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> length <span class="token operator">*</span> width <span class="token operator">*</span> height<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Boxtest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Box</span> box1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Box</span> box2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">double</span></span> volume <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>            box1<span class="token punctuation">.</span><span class="token function">SetLength</span><span class="token punctuation">(</span><span class="token number">5.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            box1<span class="token punctuation">.</span><span class="token function">SetWidth</span><span class="token punctuation">(</span><span class="token number">6.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            box1<span class="token punctuation">.</span><span class="token function">SetHeight</span><span class="token punctuation">(</span><span class="token number">7.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            box2<span class="token punctuation">.</span><span class="token function">SetLength</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            box2<span class="token punctuation">.</span><span class="token function">SetWidth</span><span class="token punctuation">(</span><span class="token number">11.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            box2<span class="token punctuation">.</span><span class="token function">SetHeight</span><span class="token punctuation">(</span><span class="token number">12.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            volume <span class="token operator">=</span> box1<span class="token punctuation">.</span><span class="token function">GetVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Box1的体积：{0}"</span><span class="token punctuation">,</span> volume<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Box1的体积：210</span>            volume <span class="token operator">=</span> box2<span class="token punctuation">.</span><span class="token function">GetVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Box2的体积：{0}"</span><span class="token punctuation">,</span> volume<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Box2的体积：1320</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-3-构造函数">11.3 构造函数</h3><p>类的构造函数是类的一个特殊的成员函数，当创建类的新对象时执行。</p><p>构造函数的名称与类的名称完全相同，他没有任何返回类型。</p><p>默认的构造函数没有任何参数，但是可以定义一个带参数的构造函数来给对象赋初值。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">LineApplication</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Line</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">double</span></span> length<span class="token punctuation">;</span>        <span class="token comment">// 构造函数</span>        <span class="token keyword">public</span> <span class="token function">Line</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            length <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"对象已经创建，length = {0}"</span><span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetLength</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            length <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> length<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Line</span> line <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Line</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 对象已经创建，length = 10</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"线条的长度：{0}"</span><span class="token punctuation">,</span> line<span class="token punctuation">.</span><span class="token function">GetLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 线条的长度：10</span>            line<span class="token punctuation">.</span><span class="token function">SetLength</span><span class="token punctuation">(</span><span class="token number">6.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"线条的长度：{0}"</span><span class="token punctuation">,</span> line<span class="token punctuation">.</span><span class="token function">GetLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 线条的长度：6</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-4-析构函数">11.4 析构函数</h3><p>类的析构函数是类的一个特殊的成员函数，当类的对象超出范围时执行。</p><p>析构函数的名称是在类的名称前加一个<code>~</code>符号，没有返回值也不接收任何参数。</p><p>析构函数用于在结束程序（如关闭文件、释放内存等）之前释放资源。</p><p>析构函数不能继承或重载。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">LineApplication</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Line</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">double</span></span> length<span class="token punctuation">;</span>        <span class="token comment">// 构造函数</span>        <span class="token keyword">public</span> <span class="token function">Line</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"对象已创建"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token operator">~</span><span class="token function">Line</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"对象已删除"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetLength</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            length <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> length<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Line</span> line <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Line</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 对象已创建</span>            line<span class="token punctuation">.</span><span class="token function">SetLength</span><span class="token punctuation">(</span><span class="token number">6.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"线条的长度：{0}"</span><span class="token punctuation">,</span> line<span class="token punctuation">.</span><span class="token function">GetLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 线条的长度：6</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">// 对象已删除</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-5-静态成员">11.5 静态成员</h3><p>使用关键字<code>static</code>可以把类成员定义为静态的，当声明一个类成员为静态时，意味着只有一个该静态成员的副本。</p><p>关键字<code>static</code>意味着类中只有一个该成员的实例，静态变量用于定义常量，因为他们的值可以通过直接调用类而不需要创建类的实例来获取。</p><p>静态变量可在成员函数或类定义外部进行初始化，也可以在内部初始化。</p><p>将类成员函数声明为<code>public static</code>无需实例化类即可调用类成员函数。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">StaticApplication</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">StaticVar</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">int</span></span> num<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">GetNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> num<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">StaticTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">StaticVar</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StaticVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">StaticVar</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StaticVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            s1<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            s2<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            s1<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"变量num: {0}"</span><span class="token punctuation">,</span> StaticVar<span class="token punctuation">.</span><span class="token function">GetNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 变量num: 3</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="12-结构体">12. 结构体</h2><p>结构体是值类型的数据结构，用来代表一个记录，可为单一变量存储各种数据类型的相关数据。</p><h3 id="12-1-定义">12.1 定义</h3><p>使用<code>struct</code>关键字来创建结构体，<code>struct</code>语句为程序定义了一个带有多个成员的结构体。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Text</span><span class="token punctuation">;</span><span class="token comment">// 定义结构体</span><span class="token keyword">struct</span> <span class="token class-name">Books</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> title<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> author<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> subject<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">double</span></span> price<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StructureTest</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name">Books</span> book1<span class="token punctuation">;</span>        <span class="token class-name">Books</span> book2<span class="token punctuation">;</span>        book1<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">"C#"</span><span class="token punctuation">;</span>        book1<span class="token punctuation">.</span>author <span class="token operator">=</span> <span class="token string">"Microsoft"</span><span class="token punctuation">;</span>        book1<span class="token punctuation">.</span>subject <span class="token operator">=</span> <span class="token string">"C# Programing Guider"</span><span class="token punctuation">;</span>        book1<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">49.5</span><span class="token punctuation">;</span>                book2<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">"Harry Peter"</span><span class="token punctuation">;</span>        book2<span class="token punctuation">.</span>author <span class="token operator">=</span> <span class="token string">"Lolly"</span><span class="token punctuation">;</span>        book2<span class="token punctuation">.</span>subject <span class="token operator">=</span> <span class="token string">"Death Cup"</span><span class="token punctuation">;</span>        book2<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">88.9</span><span class="token punctuation">;</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"book1 title: {0}"</span><span class="token punctuation">,</span> book1<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// book1 title: C#</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"book1 price: {0}"</span><span class="token punctuation">,</span> book1<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// book1 price: 49.5</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"book2 author: {0}"</span><span class="token punctuation">,</span> book2<span class="token punctuation">.</span>author<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// book2 author: Lolly</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"book2 subject: {0}"</span><span class="token punctuation">,</span> book2<span class="token punctuation">.</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// book2 subject: Death Cup</span>        Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="12-2-特点">12.2 特点</h3><ul><li>结构体可带方法、字段、索引、属性、运算符方法和事件</li><li>结构体可定义带参数的构造函数，不能定义析构函数</li><li>结构体不能继承其他的结构或类</li><li>结构体不能作为其他结构或类的基础</li><li>结构可实现一个或多个接口</li><li>结构体成员不能指定为<code>abstract</code>、<code>virtual</code>或<code>protected</code></li><li>使用<code>New</code>操作符创建一个结构对象时，会调用适当的构造函数来创建结构体，结构体可以不使用<code>New</code>操作符即可被实例化</li><li>不使用<code>New</code>操作符，只有在所有的字段都被初始化之后，字段才能被赋值，对象才可用</li></ul><h3 id="12-3-类与结构体的区别">12.3 类与结构体的区别</h3><ul><li>类是引用类型，在堆中分配空间，栈中保存的只是引用，结构体是值类型，在栈中分配空间</li><li>结构体不支持继承</li><li>结构体不能声明默认的构造函数</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Text</span><span class="token punctuation">;</span><span class="token comment">// 定义结构体</span><span class="token keyword">struct</span> <span class="token class-name">Books</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> title<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> author<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> subject<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">double</span></span> price<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> SetValues <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> t<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> s<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> p<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        title <span class="token operator">=</span> t<span class="token punctuation">;</span>        author <span class="token operator">=</span> a<span class="token punctuation">;</span>        subject <span class="token operator">=</span> s<span class="token punctuation">;</span>        price <span class="token operator">=</span> p<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"title: {0}"</span><span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">;</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"author: {0}"</span><span class="token punctuation">,</span> author<span class="token punctuation">)</span><span class="token punctuation">;</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"subject: {0}"</span><span class="token punctuation">,</span> subject<span class="token punctuation">)</span><span class="token punctuation">;</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"price: {0}"</span><span class="token punctuation">,</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StructureTest</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name">Books</span> book1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Books</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Books</span> book2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Books</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        book1<span class="token punctuation">.</span><span class="token function">SetValues</span><span class="token punctuation">(</span><span class="token string">"C#"</span><span class="token punctuation">,</span> <span class="token string">"Microsoft"</span><span class="token punctuation">,</span> <span class="token string">"C# Programing Guider"</span><span class="token punctuation">,</span> <span class="token number">49.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        book2<span class="token punctuation">.</span><span class="token function">SetValues</span><span class="token punctuation">(</span><span class="token string">"Harry Peter"</span><span class="token punctuation">,</span> <span class="token string">"Lolly"</span><span class="token punctuation">,</span> <span class="token string">"Death Cup"</span><span class="token punctuation">,</span> <span class="token number">88.9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        book1<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// title: C#</span>        <span class="token comment">// author: Microsoft</span>        <span class="token comment">// subject: C# Programing Guider</span>        <span class="token comment">// price: 49.5</span>        book2<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// title: Harry Peter</span>        <span class="token comment">// author: Lolly</span>        <span class="token comment">// subject: Death Cup</span>        <span class="token comment">// price: 88.9</span>        Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="13-接口">13. 接口</h2><p>接口定义了所有类继承接口时应该遵循的语法合同，接口定义了语法合同“是什么”部分，派生类定义了语法合同”怎么做“部分。</p><p>接口定义了属性、方法和事件成员，接口只包含成员的声明，成员的定义是派生类的责任。</p><p>接口使得实现接口的类或结构在形式上保持一致。</p><p>抽象类在某种程度上与接口类似，但是他们只是用在当只有少数方法由基类声明，由派生类实现时。</p><p>抽象类不能直接实例化，但允许派生出具体的、具有实际功能的类。接口本身是不实现任何功能。</p><p>注意：</p><ul><li>接口方法不能用<code>public</code>、<code>private</code>、<code>abstarct</code>等访问修饰符修饰，接口内不能有字段变量、构造函数</li><li>接口内可以定义属性</li><li>实现接口时，必须和接口的格式一致</li><li>必须实现接口的所有方法</li><li>接口是解决C#的单继承问题，使类可以同时继承多个基类</li></ul><h3 id="13-1-定义">13.1 定义</h3><p>使用关键字<code>interface</code>声明，默认是<code>public</code>的，接口名通常以<code>I</code>字母开头，如：</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token comment">// 定义接口</span><span class="token keyword">interface</span> <span class="token class-name">IMyInterface</span><span class="token punctuation">{</span>    <span class="token comment">// 接口成员，只有声明，无具体实现</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MethodImplement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">InterfaceImplementer</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IMyIterface</span></span><span class="token punctuation">{</span>    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name">InterfaceImplementer</span> iImp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">InterfaceImplementer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        iImp<span class="token punctuation">.</span><span class="token function">MethodImplement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Hello My Iterface</span>        Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MethodImplement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Hello My Iterface"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="13-2-继承">13.2 继承</h3><p>如果一个接口继承其他接口，那么实现类或结构需要实现所有接口的成员。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">IParentInterface</span><span class="token punctuation">{</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ParentInterfaceMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">IMyInterface</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IParentInterface</span></span><span class="token punctuation">{</span>    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MethodToImplement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">InterfaceImplementer</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IMyInterface</span></span><span class="token punctuation">{</span>    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name">InterfaceImplementer</span> iImp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">InterfaceImplementer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        iImp<span class="token punctuation">.</span><span class="token function">MethodToImplement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// MethodToImplement() called</span>        iImp<span class="token punctuation">.</span><span class="token function">ParentInterfaceMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ParentInterfaceMethod() called</span>        Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MethodToImplement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"MethodToImplement() called"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ParentInterfaceMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"ParentInterfaceMethod() called"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="14-方法">14. 方法</h2><p>C#中的方法（也称为函数）是一段具有签名（由函数名、参数类型和参数修饰符组成的函数信息）的代码块，用来实现特定的功能，一般组成：</p><ul><li>访问权限修饰符：用于指定函数对一个类的可见性</li><li>返回值类型：用于指定函数返回值的数据类型</li><li>函数名称：用于进行函数调用的唯一名称</li><li>参数列表：在调用函数时需要传递给函数的参数，参数列表是可选的，可为空</li><li>函数主体：其中包含了实现函数功能的若干代码</li></ul><h3 id="14-1-方法声明">14.1 方法声明</h3><p>方法声明语法如下：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>access_specifier</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>return_type</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>method_name</span><span class="token punctuation">&gt;</span></span>(parameter_list){    method_body;    return statement;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其中，<code>&lt;access_specifier&gt;</code>为访问修饰符，<code>&lt;return_type&gt;</code>为返回值类型，<code>&lt;method_name&gt;</code>为方法名称，<code>paramater_list</code>为参数列表，<code>method_body</code>为方法主体，<code>return statement</code>为返回语句。访问权限修饰符、参数列表和返回语句是可选的。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">class</span> <span class="token class-name">MethodTest</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">GetMax</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> num1<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> num2<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name"><span class="token keyword">int</span></span> result<span class="token punctuation">;</span>        result <span class="token operator">=</span> num1 <span class="token operator">&gt;</span> <span class="token class-name">num2 <span class="token punctuation">?</span></span> num1 <span class="token punctuation">:</span> num2<span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="14-2-方法调用">14.2 方法调用</h3><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">MethodTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">GetMax</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> num1<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> num2<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> result<span class="token punctuation">;</span>            result <span class="token operator">=</span> num1 <span class="token operator">&gt;</span> <span class="token class-name">num2 <span class="token punctuation">?</span></span> num1 <span class="token punctuation">:</span> num2<span class="token punctuation">;</span>            <span class="token keyword">return</span> result<span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> res<span class="token punctuation">;</span>            <span class="token class-name">MethodTest</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MethodTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            res <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">GetMax</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"最大值是: {0}"</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 最大值是: 200</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="14-3-递归调用">14.3 递归调用</h3><p>递归调用是方法自己调用自己。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">NumberManipulator</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> num<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> res<span class="token punctuation">;</span>            res <span class="token operator">=</span> num <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token function">factorial</span><span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> num<span class="token punctuation">;</span>            <span class="token keyword">return</span> res<span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">var</span></span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberManipulator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"5! = {0}"</span><span class="token punctuation">,</span> m<span class="token punctuation">.</span><span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 5! = 120</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"7! = {0}"</span><span class="token punctuation">,</span> m<span class="token punctuation">.</span><span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 7! = 5040</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="14-4-参数传递">14.4 参数传递</h3><p>不带参数的方法声明时<code>return_type</code>为<code>void</code>，当调用带有参数的方法时，需要向方法传递参数。C#有三种参数传递方式：</p><table><thead><tr><th>方式</th><th>描述</th></tr></thead><tbody><tr><td>值参数</td><td>这种方式复制参数的实际值给函数的形式参数，实参和形参使用的是两个不同内存中的值。形参的值改变不会影响到实参的值，可以保证实参数据安全</td></tr><tr><td>引用参数</td><td>这种方法复制参数的内存位置引用给形式参数，意味着形参值的改变也会改变实参的值，使用<code>ref</code>关键字声明引用参数</td></tr><tr><td>输出参数</td><td>这个方式可以返回多个值，使用<code>out</code>关键字声明输出参数，可以不用return语句从函数中返回多个值</td></tr></tbody></table><h3 id="14-5-按值传递参数">14.5 按值传递参数</h3><p>参数默认的传递参数，这种方式实参和形参使用的是两个不同内存中的值。形参的值改变不会影响到实参的值，可以保证实参数据安全。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">NumberManipulator</span>    <span class="token punctuation">{</span>        <span class="token comment">// 交换两个参数的值</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> num1<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> num2<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num1 <span class="token operator">=</span> num1 <span class="token operator">^</span> num2<span class="token punctuation">;</span>            num2 <span class="token operator">=</span> num1 <span class="token operator">^</span> num2<span class="token punctuation">;</span>            num1 <span class="token operator">=</span> num1 <span class="token operator">^</span> num2<span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">var</span></span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberManipulator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"调用方法之前，a = {0}, b = {1}"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>            m<span class="token punctuation">.</span><span class="token function">Swap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"调用方法之后，a = {0}, b = {1}"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 调用方法之前，a = 100, b = 200</span>            <span class="token comment">// 调用方法之后，a = 100, b = 200</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="14-6-按引用传递参数">14.6 按引用传递参数</h3><p>引用参数是一个对变量的内存位置的引用，引用参数表示与提供给方法的实际参数具有相同的内存位置，因此，引用参数值的改变也会改变实际参数的值，需要使用<code>ref</code>关键字声明引用参数。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">NumberManipulator</span>    <span class="token punctuation">{</span>        <span class="token comment">// 交换两个参数的值</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">ref</span> <span class="token class-name"><span class="token keyword">int</span></span> num1<span class="token punctuation">,</span> <span class="token keyword">ref</span> <span class="token class-name"><span class="token keyword">int</span></span> num2<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            num1 <span class="token operator">=</span> num1 <span class="token operator">^</span> num2<span class="token punctuation">;</span>            num2 <span class="token operator">=</span> num1 <span class="token operator">^</span> num2<span class="token punctuation">;</span>            num1 <span class="token operator">=</span> num1 <span class="token operator">^</span> num2<span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">var</span></span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberManipulator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"调用方法之前，a = {0}, b = {1}"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>            m<span class="token punctuation">.</span><span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">ref</span> a<span class="token punctuation">,</span> <span class="token keyword">ref</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"调用方法之后，a = {0}, b = {1}"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 调用方法之前，a = 100, b = 200</span>            <span class="token comment">// 调用方法之后，a = 200, b = 100</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="14-7-按输出传递参数">14.7 按输出传递参数</h3><p><code>return</code>语句可用于只从函数中返回一个值，但是，可以使用输出参数来从函数中返回多个值，输出参数会把方法输出的数据赋给自己，提供给输出参数的变量不需要赋值。当需要从一个参数没有指定初始值的方法中返回值时，输出参数特别有用，需要使用<code>out</code>关键字声明引用参数。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">NumberManipulator</span>    <span class="token punctuation">{</span>        <span class="token comment">// 交换两个参数的值</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">GetValues</span><span class="token punctuation">(</span><span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">int</span></span> x<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">int</span></span> y<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            x <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>            y <span class="token operator">=</span> <span class="token number">14</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">var</span></span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberManipulator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            m<span class="token punctuation">.</span><span class="token function">GetValues</span><span class="token punctuation">(</span><span class="token keyword">out</span> a<span class="token punctuation">,</span> <span class="token keyword">out</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"a = {0}, b = {1}"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// a = 13, b = 14</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="15-封装">15. 封装</h2><p>封装指把一个或多个项目封装在一个物理或逻辑的包中，封装是为了防止对实现细节的访问。</p><p>根据封装的具体需要，可以通过<strong>访问修饰符</strong>来设置使用者的访问权限。</p><ul><li><code>public</code> : 任何公有成员都可以被外部的类访问</li><li><code>private</code> : 只有同一个类中的函数可以访问他的私有成员</li><li><code>protected</code>：该类内部和继承类中可以访问</li><li><code>internal</code> : 同一个程序集的对象可以访问</li><li><code>protected internal</code> : <code>protected</code>和<code>internal</code>的并集，符合任意一条都可以访问</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">RectangelApplication</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Rectangle</span>    <span class="token punctuation">{</span>        <span class="token comment">// 成员变量</span>        <span class="token keyword">internal</span> <span class="token class-name"><span class="token keyword">double</span></span> length<span class="token punctuation">;</span>        <span class="token keyword">internal</span> <span class="token class-name"><span class="token keyword">double</span></span> width<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> length <span class="token operator">*</span> width<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"面积：{0}"</span><span class="token punctuation">,</span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">ExecuteRectangle</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Rectangle</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            r<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">4.0</span><span class="token punctuation">;</span>            r<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">5.0</span><span class="token punctuation">;</span>            r<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 面积：20</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="16-继承">16. 继承</h2><p>继承是面向对象程序的特征之一，继承允许根据一个类来定义另一个类，有助于维护和创建程序，从而利于重用代码节省开发时间。</p><p>创建一个新类时，新类允许继承一个已有的类，通过继承可以创建新类时重用、扩展和修改被继承类中定义的成员，被继承的类称为“基类”，继承基类的类称为“派生类”。</p><p>注意，C#只支持单继承，派生类只能继承一个基类，但是继承是可以传递的。</p><h3 id="16-1-基类与派生类">16.1 基类与派生类</h3><p>派生类继承了基类的成员变量和成员方法。因此父类对象应在子类对象创建之前被创建。您可以在成员初始化列表中进行父类的初始化。</p><p>创建派生类的语法：</p><pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;访问修饰符&gt; class &lt;基类&gt;{    ...}class &lt;派生类&gt; : &lt;基类&gt;{    ...}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>举个例子</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Rectangle</span>    <span class="token punctuation">{</span>        <span class="token keyword">protected</span> <span class="token class-name"><span class="token keyword">double</span></span> length<span class="token punctuation">;</span>        <span class="token keyword">protected</span> <span class="token class-name"><span class="token keyword">double</span></span> width<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> l<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> w<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            length <span class="token operator">=</span> l<span class="token punctuation">;</span>            width <span class="token operator">=</span> w<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> length <span class="token operator">*</span> width<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"长度：{0}"</span><span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"宽度：{0}"</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"面积：{0}"</span><span class="token punctuation">,</span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">TableTop</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Rectangle</span></span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">double</span></span> price <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">TableTop</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> l<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> w<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span> <span class="token punctuation">(</span>l<span class="token punctuation">,</span> w<span class="token punctuation">)</span>        <span class="token punctuation">{</span>                    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">double</span></span> cost<span class="token punctuation">;</span>            cost <span class="token operator">=</span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> price<span class="token punctuation">;</span>            <span class="token keyword">return</span> cost<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"成本：{0}"</span><span class="token punctuation">,</span> <span class="token function">GetCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">ExecuteRectangle</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">TableTop</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TableTop</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            t<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">// 长度：4</span>        <span class="token comment">// 宽度：5</span>        <span class="token comment">// 面积：20</span>        <span class="token comment">// 成本：140</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="16-2-接口多重继承">16.2 接口多重继承</h3><p>多重继承指的是一个类别可以同时从多于一个父类继承行为与特征的功能。与单一继承相对，单一继承指一个类别只可以继承自一个父类。</p><p>C# 不支持多重继承，但可以使用接口来实现多重继承。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"> <span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token comment">// 基类</span>    <span class="token punctuation">{</span>        <span class="token keyword">protected</span> <span class="token class-name"><span class="token keyword">double</span></span> length<span class="token punctuation">;</span>        <span class="token keyword">protected</span> <span class="token class-name"><span class="token keyword">double</span></span> width<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetLength</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> l<span class="token punctuation">)</span> <span class="token punctuation">{</span>            length <span class="token operator">=</span> l<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetWidth</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> w<span class="token punctuation">)</span> <span class="token punctuation">{</span>            width <span class="token operator">=</span> w<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Area</span>  <span class="token comment">// 接口</span>    <span class="token punctuation">{</span>        <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Shape</span><span class="token punctuation">,</span> <span class="token class-name">Area</span></span>  <span class="token comment">// 派生类</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> length <span class="token operator">*</span> width<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"长度：{0}"</span><span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"宽度：{0}"</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"面积：{0}"</span><span class="token punctuation">,</span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">ExecuteRectangle</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Rectangle</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            t<span class="token punctuation">.</span><span class="token function">SetLength</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            t<span class="token punctuation">.</span><span class="token function">SetWidth</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            t<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">// 长度：4</span>        <span class="token comment">// 宽度：5</span>        <span class="token comment">// 面积：20</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="16-3-抽象类与接口区别">16.3 抽象类与接口区别</h3><ul><li>接口支持多继承，抽象类不能实现多继承</li><li>接口只能定义抽象规则，抽象类既能定义规则，还能提供已实现的成员</li><li>接口是一组行为规范，抽象类是一个不完全的类</li><li>接口可以用于支持回调，抽象类不能实现回调，因为继承不支持</li><li>接口只包含方法、属性、索引器、事件的签名，但不能定义字段和包含实现的方法，抽象类可以定义字段、属性、包含有实现的方法</li><li>接口可以作用于值类型和引用类型，抽象类只能作用于引用类型。例如<code>struct</code>就可以继承接口，而不能继承类。</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">A</span>  <span class="token comment">// 抽象类</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">abstract</span> <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 抽象方法</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">B</span>  <span class="token comment">// 接口</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">;</span>  <span class="token comment">// 不能给字段赋值，写成public int a = 0;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 接口方法，继承接口的派生类必须实现此方法</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="17-多态性">17. 多态性</h2><p>多态性是指同一个行为具有多个不同表现形式或形态的能力，在面向对象编程中表现为"一个接口，多个功能"。</p><p>多态性可以分为<strong>编译时多态</strong>或者<strong>运行时多态</strong>，编译时多态（也称静态多态性）是编译时发生的函数响应，C# 提供了两种技术来实现编译时多态，分为函数重载和运算符重载。而运行时多态（也称动态多态性）是运行时发生的函数响应。</p><p>多态就是同一个接口使用不同实例而执行不同的操作。</p><h3 id="17-1-编译时多态">17.1 编译时多态</h3><p><strong>函数重载</strong></p><p>在同一范围内对相同函数名有多个定义，可以是参数类型或参数个数的不同，返回值类型除外。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReloadTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> b<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> c<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> b<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"输出整型：{0}"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> f<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"输出浮点型型：{0}"</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">ReloadTest</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ReloadTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> add1 <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">int</span></span> add2 <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"add1 = {0}"</span><span class="token punctuation">,</span> add1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// add1 = 3</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"add2 = {0}"</span><span class="token punctuation">,</span> add2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// add2 = 6</span>            data<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出整型：1</span>            data<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token number">1.23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出浮点型：1.23</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运算符重载</strong></p><p>见18. 运算符重载</p><h3 id="17-2-运行时多态">17.2 运行时多态</h3><p><strong>抽象类</strong></p><p>C#允许使用关键字<code>abstract</code>创建抽象类，用于提供接口的部分类的实现，当一个派生类继承自该抽象类时，实现即完成。抽象类包含抽象方法，抽象方法可由派生类实现。</p><p>注意：</p><ul><li>不能创建一个抽象类的实例</li><li>不能在一个抽象类外部声明一个抽象方法</li><li>通过关键字<code>sealed</code>可将类声明为密封类，该类不能被继承，抽象类不能被声明为密封类</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token comment">// 抽象类</span>    <span class="token punctuation">{</span>        <span class="token keyword">abstract</span> <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 抽象方法</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Shape</span></span>  <span class="token comment">// 派生类</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">double</span></span> length<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">double</span></span> width<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> l <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> w <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">)</span>  <span class="token comment">// 构造函数</span>        <span class="token punctuation">{</span>            length <span class="token operator">=</span> l<span class="token punctuation">;</span>            width <span class="token operator">=</span> w<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 重写抽象方法</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> length <span class="token operator">*</span> width<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Test</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Rectangle</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rectangle</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">,</span> <span class="token number">7.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name"><span class="token keyword">double</span></span> area <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"面积：{0}"</span><span class="token punctuation">,</span> area<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 面积：70</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>虚方法</strong></p><p>当有一个定义在类中的方法需要在继承类中实现时，可以使用关键字<code>virtual</code>声明虚方法，虚方法可以在不同的基础类中有不同的实现。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token comment">// 抽象类</span>    <span class="token punctuation">{</span>        <span class="token keyword">protected</span> <span class="token class-name"><span class="token keyword">double</span></span> length<span class="token punctuation">,</span> width<span class="token punctuation">;</span>  <span class="token comment">// 成员变量</span>        <span class="token keyword">public</span> <span class="token function">Shape</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> l <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> w <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">)</span>  <span class="token comment">// 构造函数</span>        <span class="token punctuation">{</span>            length <span class="token operator">=</span> l<span class="token punctuation">;</span>            width <span class="token operator">=</span> w<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>  <span class="token comment">// 纯虚方法</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Shape</span></span>  <span class="token comment">// 派生类</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> w <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> w<span class="token punctuation">)</span>        <span class="token punctuation">{</span>                    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 具体实现</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"Rectangle类的"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> width <span class="token operator">*</span> length<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Triangle</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Shape</span></span>  <span class="token comment">// 派生类</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token function">Triangle</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> w <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> w<span class="token punctuation">)</span>        <span class="token punctuation">{</span>                    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 具体实现</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"Triangle类的"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> width <span class="token operator">*</span> length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Caller</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CallArea</span><span class="token punctuation">(</span><span class="token class-name">Shape</span> s<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name"><span class="token keyword">double</span></span> area <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">GetArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"面积：{0}"</span><span class="token punctuation">,</span> area<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Test</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Caller</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Caller</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Rectangle</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rectangle</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Triangle</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Triangle</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            c<span class="token punctuation">.</span><span class="token function">CallArea</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Rectangle类的面积：20</span>            c<span class="token punctuation">.</span><span class="token function">CallArea</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Triangle类的面积：25</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="18-运算符重载">18. 运算符重载</h2><h3 id="18-1-定义">18.1 定义</h3><p>C#内置的运算符可以被重定义或重载，因此可以使用用户自定义类型的运算符。重载运算符是具有特殊名称的函数，是通过关键字<code>operator</code>后跟运算符符号来定义的，其余跟其他函数一样，有返回类型和参数列表。如定义一个实现Box类加法运算符重载方法，实现两个Box对象对应属性相加，并返回。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> Box <span class="token keyword">operator</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token class-name">Box</span> b<span class="token punctuation">,</span> <span class="token class-name">Box</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">Box</span> box <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    box<span class="token punctuation">.</span>length <span class="token operator">=</span> b<span class="token punctuation">.</span>length <span class="token operator">+</span> c<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    box<span class="token punctuation">.</span>width <span class="token operator">=</span> b<span class="token punctuation">.</span>width <span class="token operator">+</span> c<span class="token punctuation">.</span>width<span class="token punctuation">;</span>    box<span class="token punctuation">.</span>height <span class="token operator">=</span> b<span class="token punctuation">.</span>height <span class="token operator">+</span> c<span class="token punctuation">.</span>height<span class="token punctuation">;</span>    <span class="token keyword">return</span> box<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="18-2-实现">18.2 实现</h3><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>   <span class="token keyword">class</span> <span class="token class-name">Box</span>   <span class="token punctuation">{</span>      <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">double</span></span> length<span class="token punctuation">;</span>  <span class="token comment">// 长度</span>      <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">double</span></span> width<span class="token punctuation">;</span>  <span class="token comment">// 宽度</span>      <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">double</span></span> height<span class="token punctuation">;</span>  <span class="token comment">// 高度</span>      <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">GetVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>         <span class="token keyword">return</span> length <span class="token operator">*</span> width <span class="token operator">*</span> height<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetLength</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> l<span class="token punctuation">)</span>      <span class="token punctuation">{</span>         length <span class="token operator">=</span> l<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetWidth</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> w<span class="token punctuation">)</span>      <span class="token punctuation">{</span>         width <span class="token operator">=</span> w<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetHeight</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> h<span class="token punctuation">)</span>      <span class="token punctuation">{</span>         height <span class="token operator">=</span> h<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token comment">// 重载 + 运算符来把两个 Box 对象相加</span>      <span class="token keyword">public</span> <span class="token keyword">static</span> Box <span class="token keyword">operator</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token class-name">Box</span> b<span class="token punctuation">,</span> <span class="token class-name">Box</span> c<span class="token punctuation">)</span>      <span class="token punctuation">{</span>         <span class="token class-name">Box</span> box <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         box<span class="token punctuation">.</span>length <span class="token operator">=</span> b<span class="token punctuation">.</span>length <span class="token operator">+</span> c<span class="token punctuation">.</span>length<span class="token punctuation">;</span>         box<span class="token punctuation">.</span>width <span class="token operator">=</span> b<span class="token punctuation">.</span>width <span class="token operator">+</span> c<span class="token punctuation">.</span>width<span class="token punctuation">;</span>         box<span class="token punctuation">.</span>height <span class="token operator">=</span> b<span class="token punctuation">.</span>height <span class="token operator">+</span> c<span class="token punctuation">.</span>height<span class="token punctuation">;</span>         <span class="token keyword">return</span> box<span class="token punctuation">;</span>      <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">class</span> <span class="token class-name">Test</span>   <span class="token punctuation">{</span>      <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>      <span class="token punctuation">{</span>         <span class="token class-name">Box</span> Box1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 声明 Box1，类型为 Box</span>         <span class="token class-name">Box</span> Box2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 声明 Box2，类型为 Box</span>         <span class="token class-name">Box</span> Box3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 声明 Box3，类型为 Box</span>         <span class="token class-name"><span class="token keyword">double</span></span> volume <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>          <span class="token comment">// 体积</span>         <span class="token comment">// Box1 详述</span>         Box1<span class="token punctuation">.</span><span class="token function">SetLength</span><span class="token punctuation">(</span><span class="token number">6.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         Box1<span class="token punctuation">.</span><span class="token function">SetWidth</span><span class="token punctuation">(</span><span class="token number">7.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         Box1<span class="token punctuation">.</span><span class="token function">SetHeight</span><span class="token punctuation">(</span><span class="token number">5.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// Box2 详述</span>         Box2<span class="token punctuation">.</span><span class="token function">SetLength</span><span class="token punctuation">(</span><span class="token number">12.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         Box2<span class="token punctuation">.</span><span class="token function">SetWidth</span><span class="token punctuation">(</span><span class="token number">13.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         Box2<span class="token punctuation">.</span><span class="token function">SetHeight</span><span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// Box1 的体积</span>         volume <span class="token operator">=</span> Box1<span class="token punctuation">.</span><span class="token function">GetVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Box1 的体积：{0}"</span><span class="token punctuation">,</span> volume<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Box1的体积：210</span>         <span class="token comment">// Box2 的体积</span>         volume <span class="token operator">=</span> Box2<span class="token punctuation">.</span><span class="token function">GetVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Box2 的体积：{0}"</span><span class="token punctuation">,</span> volume<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Box2的体积：1560</span>         <span class="token comment">// 把两个对象相加</span>         Box3 <span class="token operator">=</span> Box1 <span class="token operator">+</span> Box2<span class="token punctuation">;</span>         <span class="token comment">// Box3 的体积</span>         volume <span class="token operator">=</span> Box3<span class="token punctuation">.</span><span class="token function">GetVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Box3 的体积：{0}"</span><span class="token punctuation">,</span> volume<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Box3的体积：5400</span>         Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="18-3-可重载与不可重载运算符">18.3 可重载与不可重载运算符</h3><table><thead><tr><th>运算符</th><th>描述</th></tr></thead><tbody><tr><td><code>+</code>, <code>-</code>, <code>!</code>, <code>~</code>, <code>++</code>, <code>--</code></td><td>一元运算符只有一个操作数，且可以被重载</td></tr><tr><td><code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code></td><td>二元运算符带有两个操作数，且可以被重载</td></tr><tr><td><code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code></td><td>比较运算符可以被重载</td></tr><tr><td><code>&amp;&amp;</code>, <code>||</code></td><td>条件运算符不能被直接重载</td></tr><tr><td><code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>%=</code></td><td>赋值运算符不能被重载</td></tr><tr><td><code>=</code>, <code>.</code>, <code>?:</code>, <code>-&gt;</code>, <code>new</code>, <code>is</code>, <code>sizeof</code>, <code>typeof</code></td><td>这些运算符不能被重载</td></tr></tbody></table><h2 id="19-文件读写">19. 文件读写</h2><p>文件是存储在磁盘中的具有特定名称和目录路径的数据集合，当使用程序对文件进行读写时，程序会将文件以数据流的形式读入内存中。因此流可以看作是通过通信路径传递的字节序列。</p><p>流分为输入流和输出流，输入流主要用来从文件读取数据，输出流主要用于向文件写入数据。</p><h3 id="19-1-I-O类">19.1 I/O类</h3><p><code>System.IO</code>命名空间中包含了各种作用于文件操作的类，例如文件创建、删除、读取、写入等。</p><table><thead><tr><th>I/O类</th><th>描述</th><th>I/O类</th><th>描述</th></tr></thead><tbody><tr><td><code>BinaryReader</code></td><td>从二进制流中读取原始数据</td><td><code>BinaryWriter</code></td><td>以二进制格式写入原始数据</td></tr><tr><td><code>BufferedStream</code></td><td>临时存储字节流</td><td><code>Directory</code></td><td>对目录进行复制、移动、重命名、创建和删除等</td></tr><tr><td><code>DirectoryInfo</code></td><td>用于对目录执行操作</td><td><code>DriveInfo</code></td><td>获取驱动器信息</td></tr><tr><td><code>File</code></td><td>对文件进行操作</td><td><code>FileInfo</code></td><td>用于对文件执行操作</td></tr><tr><td><code>FileStream</code></td><td>用于文件中任何位置的读写</td><td><code>MomoryStream</code></td><td>用于随机访问存储在内存中的数据流</td></tr><tr><td><code>Path</code></td><td>对路径信息执行操作</td><td><code>StreamReader</code></td><td>用于从字节流中读取字符</td></tr><tr><td><code>StringReader</code></td><td>用于从字符串缓冲区读取数据</td><td><code>StringWriter</code></td><td>用于向字符串缓冲区写入数据</td></tr></tbody></table><h3 id="19-2-FileStream类">19.2 FileStream类</h3><p><code>FileStream</code>类在<code>System.IO</code>命名空间下，使用它可读取、写入和关闭文件。创建<code>FileStream</code>类对象的语法格式如下：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">FileStream <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object_name</span><span class="token punctuation">&gt;</span></span> = new FileStram(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file_name</span><span class="token punctuation">&gt;</span></span>, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FileMode</span> <span class="token attr-name">Enumerator</span><span class="token punctuation">&gt;</span></span>, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FileAccess</span> <span class="token attr-name">Enumerator</span><span class="token punctuation">&gt;</span></span>, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FileShare</span> <span class="token attr-name">Enumerator</span><span class="token punctuation">&gt;</span></span>);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>FileStream</code>类中常用方法如下：</p><table><thead><tr><th>方法</th><th>描述</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td><code>Close()</code></td><td>释放内存，关闭文件</td><td><code>CopyTo(Stream)</code></td><td>当前流读取字节并写入另一个流</td></tr><tr><td><code>Dispose()</code></td><td>是否流使用的所有资源</td><td><code>Equals(Object)</code></td><td>判断指定对象是否等于当前对象</td></tr><tr><td><code>Finalize()</code></td><td>确保资源回收和清理完成</td><td><code>Flush()</code></td><td>清除流的缓冲区，所有数据写入文件</td></tr><tr><td><code>GetHashCode()</code></td><td>获取哈希函数</td><td><code>GetType()</code></td><td>获取当前实例的Type</td></tr><tr><td><code>Lock(Int64, Int64)</code></td><td>防止其他进程读取或写入FileStream</td><td><code>Read(Byte[], Int32, Int32)</code></td><td>读取字节块并写入缓冲区</td></tr><tr><td><code>ReadByte()</code></td><td>读取单个字节</td><td><code>ToString()</code></td><td>返回当前对象的字符串</td></tr><tr><td><code>Unlock(Int64, Int64)</code></td><td>允许其他进程访问FileStream</td><td><code>Write(Byte[], Int32, Int32)</code></td><td>将字节块写入文件流</td></tr><tr><td><code>WriteByte(Byte)</code></td><td>写入单个字节到文件流当前位置</td><td></td><td></td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>IO</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">Application</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Test</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">FileStream</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FileStream</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">,</span> FileMode<span class="token punctuation">.</span>OpenOrCreate<span class="token punctuation">,</span> FileAccess<span class="token punctuation">.</span>ReadWrite<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 定义文件流</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                file<span class="token punctuation">.</span><span class="token function">WriteByte</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 写入字节</span>            <span class="token punctuation">}</span>            file<span class="token punctuation">.</span>Position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// 将读取位置重设为文件开头</span>               <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 读取字节</span>            <span class="token punctuation">}</span>            <span class="token comment">// 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 </span>            file<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 关闭文件流</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="19-3-高级文件操作">19.3 高级文件操作</h3><p>其他高级的I/O文件操作，如文本文件的读写，二进制文件的读写，Windows文件系统的操作等详见<a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.io.streamwriter?view=net-6.0">官方文档</a>。</p><h2 id="20-预处理器">20. 预处理器</h2><p>预处理器指令指导编译器在实际编译开始之前对信息进行预处理。</p><p>所有的预处理器指令都是以<code>#</code>开始的，一个预处理器指令必须是该行上唯一的指令。</p><table><thead><tr><th>预处理器指令</th><th>描述</th><th>预处理器指令</th><th>描述</th></tr></thead><tbody><tr><td><code>#define</code></td><td>定义一系列称为符号的字符</td><td><code>#undef</code></td><td>取消定义的字符</td></tr><tr><td><code>#if</code></td><td>测试符号是否为真</td><td><code>#else</code></td><td>创建符合条件指令，与#if一起使用</td></tr><tr><td><code>#elif</code></td><td>创建符合条件指令，与#if一起使用</td><td><code>#endif</code></td><td>指定一个条件指令的结束</td></tr><tr><td><code>#line</code></td><td>可修改编辑器的行数以及删除错误和警告的文件名</td><td><code>#error</code></td><td>从代码指定位置生成一个错误</td></tr><tr><td><code>#warning</code></td><td>从代码指定位置生成一个警告</td><td><code>#region</code></td><td>指定可折叠代码块的起始</td></tr><tr><td><code>#endregion</code></td><td>#region块的结束</td><td><code>#pragma</code></td><td>抑制或还原指定的编译警告</td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token preprocessor property">#<span class="token directive keyword">define</span> DEBUG</span><span class="token preprocessor property">#<span class="token directive keyword">define</span> RELEASE</span><span class="token preprocessor property">#<span class="token directive keyword">pragma</span> warning disable 168 </span><span class="token comment">// 取消编号168的警告</span><span class="token preprocessor property">#<span class="token directive keyword">pragma</span> warning restore 168 </span><span class="token comment">// 还原编号168的警告 </span><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestClass</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token preprocessor property">#<span class="token directive keyword">if</span> (DEBUG &amp;&amp; !RELEASE)</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"DEBUG is defined"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token preprocessor property">#<span class="token directive keyword">elif</span> (!DEBUG &amp;&amp; RELEASE)</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"RELEASE is defined"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token preprocessor property">#<span class="token directive keyword">elif</span> (DEBUG &amp;&amp; RELEASE)</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"DEBUG and RELEASE are defined"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// DEBUG and RELEASE are defined</span>        <span class="token preprocessor property">#<span class="token directive keyword">else</span> </span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"DEBUG and RELEASE are not defined"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token preprocessor property">#</span><span class="token return-type class-name">endif</span>        Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="21-异常处理">21. 异常处理</h2><p>异常是在程序执行期间出现的问题，C#中的异常是对程序运行时出现的特殊情况的一种响应，比如尝试除以零。</p><p>异常提供了一种把程序控制权从某个部分转移到另一个部分的方式。</p><h3 id="21-1-语法">21.1 语法</h3><p>C#异常处理是建立在<code>try</code>、<code>catch</code>、<code>finally</code>、<code>throw</code>四个关键词之上的。</p><ul><li><code>try</code>：一个try块标识了一个将被激活的特定的异常代码块，后跟一个或多个<code>catch</code>块</li><li><code>catch</code>：程序通过异常处理程序捕获异常，<code>catch</code>关键字表示异常的捕获</li><li><code>finally</code>：用于执行给定的语句，不管异常是否被抛出都会执行</li><li><code>throw</code>：当出现问题时，程序抛出一个异常，使用该关键字来完成</li></ul><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">try</span><span class="token punctuation">{</span>    <span class="token comment">// 可能引起异常的语句</span><span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExceptionName</span> e1<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// 错误处理代码</span><span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExceptionName</span> e2<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// 错误处理代码</span><span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>    <span class="token comment">// 无论是否抛出异常，都会执行的语句</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="21-2-异常类">21.2 异常类</h3><p>C#异常是用类来表示的，异常类主要是直接或间接派生自<code>System.Exception</code>类。<code>System.ApplicationException</code>类支持由应用程序生成的异常，自定义类都应派生自该类。</p><p><code>System.SystemException</code>类是所有预定义的系统异常的基类。</p><table><thead><tr><th>异常类</th><th>描述</th><th>异常类</th><th>描述</th></tr></thead><tbody><tr><td><code>System.IO.IOException</code></td><td>处理I/O错误</td><td><code>System.IndexOutOfRangeException</code></td><td>处理数组索引超范围错误</td></tr><tr><td><code>System.ArrayTypeMismatchException</code></td><td>处理数组类型不匹配错误</td><td><code>System.NullReferenceException</code></td><td>处理当依次空对象时错误</td></tr><tr><td><code>System.DivideByZeroException</code></td><td>处理当除以零时错误</td><td><code>System.InvalidCastException</code></td><td>处理类型转换期间错误</td></tr><tr><td><code>System.OutOfMemoryException</code></td><td>处理空间内存不足错误</td><td><code>System.StackOverflowException</code></td><td>处理栈溢出错误</td></tr></tbody></table><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">ErrorHandleApplication</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">DivNumbers</span>    <span class="token punctuation">{</span>        <span class="token class-name"><span class="token keyword">int</span></span> result<span class="token punctuation">;</span>        <span class="token function">DivNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">division</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> num1<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> num2<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">try</span>            <span class="token punctuation">{</span>                result <span class="token operator">=</span> num1 <span class="token operator">/</span> num2<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">DivideByZeroException</span> e<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Exception caugth: {0}"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">finally</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Result: {0}"</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">DivNumbers</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DivNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            d<span class="token punctuation">.</span><span class="token function">division</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">/* Exception caugth: System.DivideByZeroException: Attempted to divide by zero.  at ErrorHandleApplication.DivNumbers.division (System.Int32 num1, System.Int32 num2) [0x00000] in &lt;c41f6dc696cc46ac9b099084f035765f&gt;:0 Result: 0*/</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="21-3-自定义异常">21.3 自定义异常</h3><p>用户可以创建自定义异常，派生自<code>ApplicationException</code>类。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token comment">// 自定义异常</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TempIsZeroException</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ApplicationException</span></span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token function">TempIsZeroException</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> message<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span>    <span class="token punctuation">{</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Temperature</span><span class="token punctuation">{</span>    <span class="token class-name"><span class="token keyword">int</span></span> temperature <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ShowTemp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>temperature <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment">// 抛出异常</span>            <span class="token keyword">throw</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">TempIsZeroException</span><span class="token punctuation">(</span><span class="token string">"Zero temperature"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Temperature: {0}"</span><span class="token punctuation">,</span> temperature<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">namespace</span> <span class="token namespace">UserDefineExecption</span><span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">TempTest</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> arg<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">Temperature</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Temperature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span>            <span class="token punctuation">{</span>                temp<span class="token punctuation">.</span><span class="token function">ShowTemp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">TempIsZeroException</span> e<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"TempIsZeroException: {0}"</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// TempIsZeroException：Zero temperature</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="参考文章">参考文章</h2><p>本文是笔者通过下列网站教程学习C#基础的记录，有部分修改和补充，转载请注明出处，并附带下面链接。</p><p>1.<a href="https://www.runoob.com/csharp/csharp-tutorial.html">【菜鸟教程C#教程】</a></p><p>2.<a href="http://c.biancheng.net/csharp/">【C语言中文网C#教程】</a></p><p>3.<a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/">【微软C#官方文档】</a></p>]]></content>
      
      
      <categories>
          
          <category> C# </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
            <tag> Unity开发基础 </tag>
            
            <tag> C#基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python虚拟环境的使用</title>
      <link href="/posts/19904.html"/>
      <url>/posts/19904.html</url>
      
        <content type="html"><![CDATA[<p>python虚拟环境的主要目的是为Python项目创建一个隔离的环境，意味着每个环境都可以拥有自己的依赖项。</p><h2 id="1-安装virtualenv">1.安装virtualenv</h2><p><code>pip install virtualenv</code></p><h2 id="2-创建虚拟环境并指定Python版本">2.创建虚拟环境并指定Python版本</h2><p><code>virtualenv venv --python=python3.8</code></p><h2 id="3-进入虚拟环境">3.进入虚拟环境</h2><p><code>source bin/active</code></p><h2 id="4-退出虚拟环境">4.退出虚拟环境</h2><p><code>deactive</code></p><h2 id="5-删除虚拟环境">5.删除虚拟环境</h2><p><code>rm -r venv</code></p><h2 id="6-生成requirements-txt文件">6.生成requirements.txt文件</h2><p><strong>方法一:</strong></p><p><code>pip freeze &gt; requirements.txt</code></p><p><strong>方法二:</strong></p><p><code>pip install pipreqs</code></p><p><code>pipreqs ./ --encoding=utf-8 --force</code></p><h2 id="7-使用requirements-txt文件">7.使用requirements.txt文件</h2><p><code>pip install -r requirements.txt</code></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 虚拟环境 </tag>
            
            <tag> 使用记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lua语言学习笔记</title>
      <link href="/posts/5067.html"/>
      <url>/posts/5067.html</url>
      
        <content type="html"><![CDATA[<h2 id="0-环境准备-2">0. 环境准备</h2><h3 id="0-1-简介-2">0.1 简介</h3><p><strong>Lua</strong>是由标准C编写而成的脚本语言，诞生于1993年，具有<strong>高效性</strong>、<strong>可移植性</strong>、<strong>可嵌入性</strong>、<strong>简单强大</strong>、<strong>小巧轻便</strong>、<strong>免费开源</strong>等诸多优点，主要应用场景包括做为嵌入脚本、做为独立脚本、用于应用程序的动态配置、游戏开发以及Web应用脚本等。</p><h3 id="0-2-Windows下载与安装Lua">0.2 Windows下载与安装Lua</h3><ol><li>选择合适版本的Lua语言开发包<a href="http://joedf.ahkscript.org/LuaBuilds/">下载</a></li><li>解压下载好的Lua压缩包到合适的路径</li><li>将Lua的解压路径添加到环境变量<code>Path</code>中</li><li>打开Windows命令行工具，输入指令<code>lua</code>，命令行输出Lua版本信息，安装成功</li></ol><h3 id="0-3-CentOS下载与安装Lua">0.3 CentOS下载与安装Lua</h3><pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">curl -R -O http://www.lua.org/ftp/lua-5.4.4.tar.gz  # 拉取合适的Lua包tar -C /usr/local -zxvf lua-5.4.4.tar.gz  # 解压到合适的目录下cd /usr/local/lua-5.4.4/  # 进入Lua包解压路径make all test  # 开始安装ln -s /usr/local/lua-5.4.4/src/lua /usr/bin/lua  # 建立连接（可选步骤）lua -v  # 查看版本，输出Lua版本信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="0-4-推荐IDE">0.4 推荐IDE</h3><ol><li>VSCode(微软出品) + Lua扩展插件(Tencent出品)</li><li>在线IDE  <a href="https://replit.com/languages/lua">https://replit.com/languages/lua</a></li></ol><h2 id="1-基本数据类型">1. 基本数据类型</h2><h3 id="1-1-table">1.1 table</h3><p><strong>table类型</strong>是一个"关联数组"，需要注意：</p><ol><li>table的索引可以是数字或者是字符串，所有索引值都需要用<code>[</code>和<code>]</code>括起来，如果是字符串，还可以去掉引号和中括号</li><li>table的默认初始索引一般以1开始，如果不写索引，则索引会被认为是数字，并按顺序自动从1往后排</li><li>table变量只是一个地址引用，对table操作不会产生数据影响</li><li>table不固定长度大小，有新数据插入时长度会自动增长</li><li>table里保存数据可以是任何类型，包括<code>function</code>和<code>table</code></li><li>table所有元素之间用逗号<code>,</code>隔开</li></ol><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- 初始化</span>mytable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment">-- 指定值</span>mytable<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"lua"</span>mytable<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"table"</span><span class="token comment">-- 修改值</span>mytable<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Lua"</span><span class="token comment">-- 获取值</span><span class="token function">print</span><span class="token punctuation">(</span>mytable<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">-- 输出：Lua</span><span class="token function">print</span><span class="token punctuation">(</span>mytable<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">-- 输出：table</span><span class="token comment">-- 移除引用</span>mytable <span class="token operator">=</span> <span class="token keyword">nil</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-2-string">1.2 string</h3><p><strong>string类型</strong>可以使用双引号<code>""</code>或单引号<code>''</code>声明，如果是块字符串，可以以<code>[[</code>开始，以<code>]]</code>结尾。<br>字符串不可修改值，可以通过<code>string.gsub</code>函数来替换字符串中的子串。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">a <span class="token operator">=</span> <span class="token string">'1024'</span>b <span class="token operator">=</span> <span class="token string">'3.14159'</span>c <span class="token operator">=</span> <span class="token string">"Hello"</span>d <span class="token operator">=</span> <span class="token string">"2022"</span>e <span class="token operator">=</span> <span class="token string">[[&lt;html&gt;&lt;head /&gt;&lt;body&gt;&lt;a href="https://www.lua.org/"&gt;Lua&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;]]</span><span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">)</span> <span class="token comment">-- 输出：1024   3.14159 Hello  2022</span><span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token comment">--[[ 输出：&lt;html&gt;&lt;head /&gt;&lt;body&gt;&lt;a href="https://www.lua.org/"&gt;Lua&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-3-number">1.3 number</h3><p><strong>number类型</strong>只有一种，即<strong>双精度浮点double类型</strong></p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">a <span class="token operator">=</span> <span class="token number">1024</span>b <span class="token operator">=</span> <span class="token number">3.14159</span><span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token function">type</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：1024    number</span><span class="token function">print</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token function">type</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：3.14159 number</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-4-boolean">1.4 boolean</h3><p><strong>boolean类型</strong>只有两个可选值：<strong>true</strong>（真）和 <strong>false</strong>（假）。<strong>判断时false和nil都是假，其他都为真</strong>。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">a <span class="token operator">=</span> <span class="token keyword">true</span>b <span class="token operator">=</span> <span class="token keyword">false</span><span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token function">type</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：true    boolean</span><span class="token function">print</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token function">type</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：false   boolean</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-5-nil">1.5 nil</h3><p><strong>nil类型</strong>表示一个无效值，只有值<code>nil</code>，如果打印没有赋值的变量，则会输出nil。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"first: "</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token comment">-- 输出：first:  nil</span>a <span class="token operator">=</span> <span class="token number">1024</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"second: "</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token comment">-- 输出：second:   1024</span>a <span class="token operator">=</span> <span class="token keyword">nil</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"third: "</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token comment">-- 输出：third:  nil</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"nil"</span><span class="token punctuation">)</span> <span class="token keyword">then</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a is nil"</span><span class="token punctuation">)</span><span class="token keyword">else</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a is not nil"</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">-- 输出：a is nil</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>注意</strong>：要判断变量是否为 nil 的时候，需要使用 type 获取变量的类型，然后与字符串的 nil 进行比较</p><h3 id="1-6-function">1.6 function</h3><p><strong>function类型</strong>是由C或Lua编写的完成某一功能的程序指令的集合，称为函数，可分为<strong>自定义函数</strong>和<strong>系统函数</strong>。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span><span class="token keyword">end</span>result1 <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>result2 <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"result1 = %d, result2 = %d"</span><span class="token punctuation">,</span> result1<span class="token punctuation">,</span> result2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：result1 = 300, result2 = 1123</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-7-thread">1.7 thread</h3><p><strong>thread类型</strong>表示执行的独立线路，用于执行协同程序。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token keyword">end</span>cor <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>fun<span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>cor<span class="token punctuation">,</span> <span class="token function">type</span><span class="token punctuation">(</span>cor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：thread: 0x13691f0   thread--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-8-userdata">1.8 userdata</h3><p><strong>userdata类型</strong>是一种用户自定义数据，用于表示一种由应用程序或C/C++语言库所创建的类型，可以将任意C/C++的任意数据类型的数据存储在Lua变量中调用。</p><p>userdata可分为<strong>full userdata</strong>和<strong>light userdata</strong>。</p><table><thead><tr><th></th><th>full userdata</th><th>light userdata</th></tr></thead><tbody><tr><td>定义</td><td>用户自定义数据</td><td>一种表示C指针的值，不用创建</td></tr><tr><td>使用</td><td>需要显示的创建一块内存，该段内存有Lua垃圾回收器管理，不需要使用者关心</td><td>存储在栈上，使用者需要关心内存使用</td></tr><tr><td>创建</td><td>没有进行参数合法性检查<br><code>void *lua_newuserdata(lua State *L, size_t size);</code><br>有进行参数合法性检查<br><code>void *lua_checkudata(lua State *L, int arg, const char *tname);</code></td><td><code>void lua_pushlightuserdata(lua_State *L, void *p);</code></td></tr><tr><td>其他</td><td>可以指定其<strong>metatable</strong>和<strong>metamethods</strong></td><td>不可以指定其<strong>metatable</strong>和<strong>metamethods</strong></td></tr></tbody></table><h2 id="2-注释">2. 注释</h2><h3 id="2-1-单行注释">2.1 单行注释</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- 这是行注释</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Hello Lua"</span><span class="token punctuation">)</span><span class="token comment">-- 这是行注释</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="2-2-多行注释">2.2 多行注释</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">--[[这是块注释，块注释可以注释多行内容--]]</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Hello Lua"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-变量">3. 变量</h2><p>变量相当于内存中一个数据存储空间的表示，通过变量名可以访问到变量的具体的值。</p><p>Lua的变量在定义时不需要指定明确的类型，而是会根据赋的默认值来断定变量的类型。</p><h3 id="3-1-变量赋值">3.1 变量赋值</h3><p>赋值是给已经定义的变量重新设置值的过程。</p><p>同时为多个变量赋值时：</p><ul><li><p>当变量个数 &gt; 值的个数时，按变量个数补足nil</p></li><li><p>当变量个数 &lt; 值的个数时，多余的值会被忽略</p></li></ul><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">a <span class="token operator">=</span> <span class="token number">1</span>b <span class="token operator">=</span> <span class="token keyword">true</span>c<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span> <span class="token number">2022</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> address <span class="token operator">=</span> <span class="token string">"Xiaoming"</span><span class="token punctuation">,</span> <span class="token number">18</span>day<span class="token punctuation">,</span> week <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">"星期四"</span><span class="token punctuation">,</span> <span class="token number">2022</span><span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token comment">-- 输出：1   true</span><span class="token function">print</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token comment">-- 输出：Hello  2022</span><span class="token function">print</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> address<span class="token punctuation">)</span><span class="token comment">-- 输出：XiaoMing   18   nil</span><span class="token function">print</span><span class="token punctuation">(</span>day<span class="token punctuation">,</span> week<span class="token punctuation">)</span><span class="token comment">-- 输出：30  星期四</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-2-全局变量和局部变量">3.2 全局变量和局部变量</h3><p>变量根据作用域可分为全局变量和局部变量，且用<code>local</code>显式声明的变量为局部变量，其余全部为全局变量。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> a <span class="token operator">=</span> <span class="token number">1024</span><span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    pi <span class="token operator">=</span> <span class="token number">3.14159</span>    <span class="token keyword">local</span> name <span class="token operator">=</span> <span class="token string">"Lua"</span><span class="token keyword">end</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a = "</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token string">"pi = "</span><span class="token punctuation">,</span> pi<span class="token punctuation">)</span><span class="token comment">-- 输出：a =    1024   pi =   3.14159</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"name = "</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token comment">-- 输出：name =  nil</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-3-类型转换">3.3 类型转换</h3><p>Lua中，除了table类型，其他任何类型的变量都可以通过<code>tostring</code>函数转化为字符串类型。</p><p>能表示数字的字符串类型的变量可以通过<code>tonumber</code>函数转化为数字类型。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">a <span class="token operator">=</span> <span class="token number">100</span>b <span class="token operator">=</span> <span class="token keyword">true</span>sa <span class="token operator">=</span> <span class="token function">tostring</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>sb <span class="token operator">=</span> <span class="token function">tostring</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"sa = "</span><span class="token punctuation">,</span> sa<span class="token punctuation">,</span> <span class="token string">"type(sa) = "</span><span class="token punctuation">,</span> <span class="token function">type</span><span class="token punctuation">(</span>sa<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：sa =    100 type(sa) =  string</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"sb = "</span><span class="token punctuation">,</span> sb<span class="token punctuation">,</span> <span class="token string">"type(sb) = "</span><span class="token punctuation">,</span> <span class="token function">type</span><span class="token punctuation">(</span>sb<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：sb =    true    type(sb) =  string</span>sc <span class="token operator">=</span> <span class="token string">"3.14"</span>sd <span class="token operator">=</span> <span class="token string">"0XA"</span>c <span class="token operator">=</span> <span class="token function">tonumber</span><span class="token punctuation">(</span>sc<span class="token punctuation">)</span>d <span class="token operator">=</span> <span class="token function">tonumber</span><span class="token punctuation">(</span>sd<span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"c = "</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token string">"type(c) = "</span><span class="token punctuation">,</span> <span class="token function">type</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：c =    3.14    type(c) =  number</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"d = "</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> <span class="token string">"type(d) = "</span><span class="token punctuation">,</span> <span class="token function">type</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：d =    10    type(d) =  number</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-4-获取输入">3.4 获取输入</h3><p>使用<code>io.read</code>函数获取用户输入。</p><p>可选参数：</p><table><thead><tr><th>格式</th><th>描述</th></tr></thead><tbody><tr><td>“*n”</td><td>读取一个数字</td></tr><tr><td>“*a”</td><td>从当前位置读取剩余的全部内容</td></tr><tr><td>"*l”</td><td>读取下一行内容</td></tr><tr><td>10</td><td>读取指定数字的长度</td></tr></tbody></table><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> name <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"name = "</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">"type(name) = "</span><span class="token punctuation">,</span> <span class="token function">type</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 用户输入：Lua</span><span class="token comment">-- 输出：name =   lua type(name) =   string</span><span class="token keyword">local</span> num <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"*n"</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"num = "</span><span class="token punctuation">,</span> num<span class="token punctuation">,</span> <span class="token string">"type(num) = "</span><span class="token punctuation">,</span> <span class="token function">type</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 用户输入：1024</span><span class="token comment">-- 输出：name =   1024 type(name) =   number</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-5-格式化输出">3.5 格式化输出</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">name <span class="token operator">=</span> <span class="token string">"lua"</span>age <span class="token operator">=</span> <span class="token number">18</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"name = %s, age = %d"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：name = lua, age = 18</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-循环控制">4. 循环控制</h2><p>循环控制就是让程序满足一定的条件就一直循环的去执行，直到条件不满足，则跳出循环继续执行循环以外的语句。</p><h3 id="4-1-while">4.1 while</h3><p><strong>while循环</strong>，<strong>当型循环</strong>，先判断条件，满足则执行循环，否则不进入循环。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- 求和</span><span class="token keyword">local</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">local</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">while</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">do</span>    sum <span class="token operator">=</span> sum <span class="token operator">+</span> num    num <span class="token operator">=</span> num <span class="token operator">+</span> <span class="token number">1</span><span class="token keyword">end</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"sum = %d"</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：sum = 5050</span><span class="token comment">-- 打印乘法表</span><span class="token keyword">local</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token keyword">do</span>    <span class="token keyword">local</span> j <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;=</span> i<span class="token punctuation">)</span> <span class="token keyword">do</span>        io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"%d * %d = % -6d"</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j <span class="token operator">*</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span>        j <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">1</span>    <span class="token keyword">end</span>    i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：1 * 1 =  1    1 * 2 =  2    2 * 2 =  4    1 * 3 =  3    2 * 3 =  6    3 * 3 =  9    1 * 4 =  4    2 * 4 =  8    3 * 4 =  12   4 * 4 =  16   1 * 5 =  5    2 * 5 =  10   3 * 5 =  15   4 * 5 =  20   5 * 5 =  25   1 * 6 =  6    2 * 6 =  12   3 * 6 =  18   4 * 6 =  24   5 * 6 =  30   6 * 6 =  36   1 * 7 =  7    2 * 7 =  14   3 * 7 =  21   4 * 7 =  28   5 * 7 =  35   6 * 7 =  42   7 * 7 =  49   1 * 8 =  8    2 * 8 =  16   3 * 8 =  24   4 * 8 =  32   5 * 8 =  40   6 * 8 =  48   7 * 8 =  56   8 * 8 =  64   1 * 9 =  9    2 * 9 =  18   3 * 9 =  27   4 * 9 =  36   5 * 9 =  45   6 * 9 =  54   7 * 9 =  63   8 * 9 =  72   9 * 9 =  81--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-2-repeat-…-until">4.2 repeat … until</h3><p><strong>repeat until循环</strong>，<strong>直到型循环</strong>，后判断条件，满足则跳出循环，不满足则进入循环，<strong>循环至少会执行1次</strong>。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- 求和</span><span class="token keyword">local</span> num <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">local</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">repeat</span>    sum <span class="token operator">=</span> sum <span class="token operator">+</span> num    num <span class="token operator">=</span> num <span class="token operator">+</span> <span class="token number">1</span><span class="token keyword">until</span> <span class="token punctuation">(</span>num <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"sum = %d"</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：sum = 5050</span><span class="token comment">-- 打印乘法表</span><span class="token keyword">local</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">repeat</span>    <span class="token keyword">local</span> j <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">repeat</span>        io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"%d * %d = %-6d"</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j <span class="token operator">*</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span>        j <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">1</span>    <span class="token keyword">until</span> j <span class="token operator">&gt;</span> i  i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">until</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：1 * 1 =  1    1 * 2 =  2    2 * 2 =  4    1 * 3 =  3    2 * 3 =  6    3 * 3 =  9    1 * 4 =  4    2 * 4 =  8    3 * 4 =  12   4 * 4 =  16   1 * 5 =  5    2 * 5 =  10   3 * 5 =  15   4 * 5 =  20   5 * 5 =  25   1 * 6 =  6    2 * 6 =  12   3 * 6 =  18   4 * 6 =  24   5 * 6 =  30   6 * 6 =  36   1 * 7 =  7    2 * 7 =  14   3 * 7 =  21   4 * 7 =  28   5 * 7 =  35   6 * 7 =  42   7 * 7 =  49   1 * 8 =  8    2 * 8 =  16   3 * 8 =  24   4 * 8 =  32   5 * 8 =  40   6 * 8 =  48   7 * 8 =  56   8 * 8 =  64   1 * 9 =  9    2 * 9 =  18   3 * 9 =  27   4 * 9 =  36   5 * 9 =  45   6 * 9 =  54   7 * 9 =  63   8 * 9 =  72   9 * 9 =  81--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-3-for">4.3 for</h3><p>如果循环的语句是<code>for i = 1, 9, 1 do ...</code>，表示从1开始，大于9结束，每次步进1。如果是步进1，最后1可以省略，变为<code>for i = 1, 9 do ...</code>。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- 求和</span><span class="token keyword">local</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">do</span>sum <span class="token operator">=</span> sum <span class="token operator">+</span> num<span class="token keyword">end</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"sum = %d"</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：sum = 5050</span><span class="token comment">-- 打印乘法表</span><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span> <span class="token keyword">do</span>  <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> i <span class="token keyword">do</span>    io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"%d * %d = %-6d"</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j <span class="token operator">*</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">end</span>  <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：1 * 1 =  1    1 * 2 =  2    2 * 2 =  4    1 * 3 =  3    2 * 3 =  6    3 * 3 =  9    1 * 4 =  4    2 * 4 =  8    3 * 4 =  12   4 * 4 =  16   1 * 5 =  5    2 * 5 =  10   3 * 5 =  15   4 * 5 =  20   5 * 5 =  25   1 * 6 =  6    2 * 6 =  12   3 * 6 =  18   4 * 6 =  24   5 * 6 =  30   6 * 6 =  36   1 * 7 =  7    2 * 7 =  14   3 * 7 =  21   4 * 7 =  28   5 * 7 =  35   6 * 7 =  42   7 * 7 =  49   1 * 8 =  8    2 * 8 =  16   3 * 8 =  24   4 * 8 =  32   5 * 8 =  40   6 * 8 =  48   7 * 8 =  56   8 * 8 =  64   1 * 9 =  9    2 * 9 =  18   3 * 9 =  27   4 * 9 =  36   5 * 9 =  45   6 * 9 =  54   7 * 9 =  63   8 * 9 =  72   9 * 9 =  81--]]</span><span class="token comment">-- 遍历table</span>weekdays <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"Sunday"</span><span class="token punctuation">,</span><span class="token string">"Monday"</span><span class="token punctuation">,</span><span class="token string">"Tuesday"</span><span class="token punctuation">,</span><span class="token string">"Wednesday"</span><span class="token punctuation">,</span><span class="token string">"Thursday"</span><span class="token punctuation">,</span><span class="token string">"Friday"</span><span class="token punctuation">,</span><span class="token string">"Saturday"</span><span class="token punctuation">}</span><span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>weekdays<span class="token punctuation">)</span> <span class="token keyword">do</span>    <span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"%s --&gt; %s"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：1 --&gt; Sunday2 --&gt; Monday3 --&gt; Tuesday4 --&gt; Wednesday5 --&gt; Thursday6 --&gt; Friday7 --&gt; Saturday--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-4-break">4.4 break</h3><p>终止循环的继续运行，如果有多层循环，只能终止当层循环，无法终止外层循环。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">do</span>    <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token keyword">do</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">then</span>            <span class="token keyword">break</span>        <span class="token keyword">end</span>        <span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"i = %d, j = %d"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">end</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：i = 0, j = 0i = 0, j = 1i = 1, j = 0i = 1, j = 1--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Lua中没有continue语句</strong>，但是可以借助for循环以及repeat until循环实现continue功能。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token keyword">do</span>    <span class="token keyword">repeat</span>        <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">2</span> <span class="token keyword">then</span>            <span class="token keyword">break</span>        <span class="token keyword">end</span>        <span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"i = %d"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">until</span> <span class="token keyword">true</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：i = 0i = 1i = 3i = 4--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-5-return">4.5 return</h3><p>使用<strong>return语句</strong>，终止循环、函数的执行。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">do</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">then</span>        <span class="token keyword">return</span>    <span class="token keyword">end</span>    <span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"i = %d"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：i = 0i = 1i = 2--]]</span><span class="token keyword">function</span> <span class="token function">check</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">then</span>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"value &lt;= 0"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span>    <span class="token keyword">end</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"value &gt; 0"</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：value &gt; 0value &lt;= 0--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-6-goto">4.6 goto</h3><p>允许将控制流程无条件地转到被标记的语句处，<strong>仅lua5.2以上版本支持</strong>。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">::</span>label<span class="token punctuation">::</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"-- goto label --"</span><span class="token punctuation">)</span>a <span class="token operator">=</span> a<span class="token operator">+</span><span class="token number">1</span><span class="token keyword">if</span> a <span class="token operator">&lt;</span> <span class="token number">3</span> <span class="token keyword">then</span>    <span class="token keyword">goto</span> label<span class="token keyword">end</span><span class="token comment">--[[ 输出：-- goto label ---- goto label ----]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-7-pairs和ipairs">4.7 pairs和ipairs</h3><p><strong>pairs和iparis</strong>都是能遍历集合（表、数组），但是<strong>iparis</strong>仅仅遍历值，按照索引升序遍历，索引中断停止遍历，即不能返回nil，只能返回数字0，如果遇到nil则退出。只能遍历到集合中出现的第一个不是整数的key。<strong>pairs</strong>能遍历集合的所有元素。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> table <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"yes"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"t"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"no"</span><span class="token punctuation">}</span><span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span> <span class="token keyword">do</span>    <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> table<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span> <span class="token keyword">do</span>    <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> table<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：1   A2   B5   yest   no1   A2   B--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-分支控制">5. 分支控制</h2><p>分支控制就是让程序有选择的执行，主要分为：<strong>单分支</strong>、<strong>双分支</strong>和<strong>多分支</strong>形式。</p><h3 id="5-1-if">5.1 if</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token keyword">local</span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token keyword">then</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a &gt; b"</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Out If"</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出:a &gt; bOut If--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-2-else">5.2 else</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token keyword">local</span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token keyword">then</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a &gt; b"</span><span class="token punctuation">)</span><span class="token keyword">else</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a &lt;= b"</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Out If"</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出:Out If--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-3-elseif">5.3 elseif</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token keyword">local</span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token keyword">then</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a &gt; b"</span><span class="token punctuation">)</span><span class="token keyword">elseif</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span> <span class="token keyword">then</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a == b"</span><span class="token punctuation">)</span><span class="token keyword">else</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a &lt;= b"</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Out If"</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出:a == bOut If--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-4-条件嵌套">5.4 条件嵌套</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token keyword">local</span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token keyword">then</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a &gt; b"</span><span class="token punctuation">)</span><span class="token keyword">else</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span> <span class="token keyword">then</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a == b"</span><span class="token punctuation">)</span>    <span class="token keyword">else</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a &lt;= b"</span><span class="token punctuation">)</span>    <span class="token keyword">end</span><span class="token keyword">end</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Out If"</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出:a == bOut If--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6-函数">6. 函数</h2><p>在程序中，编写函数的<strong>主要目的</strong>是将一个需要很多行代码的复杂问题分解为一系列简单的任务来解决，而且，同一个函数可以被多次调用，有助于代码重用。</p><h3 id="6-1-function">6.1 function</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span><span class="token keyword">end</span>result1 <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>result2 <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"result1 = %d, result2 = %d"</span><span class="token punctuation">,</span> result1<span class="token punctuation">,</span> result2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--输出：result1 = 300, result2 = 100</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="6-2-多返回值">6.2 多返回值</h3><p>Lua中的函数可以不返回任何值，也可以返回一个值，也支持返回多个值。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">check_user</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span>    <span class="token keyword">if</span> score <span class="token operator">&gt;</span> <span class="token number">85</span> <span class="token keyword">then</span>        <span class="token keyword">return</span> <span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token keyword">true</span>    <span class="token keyword">elseif</span> score <span class="token operator">&gt;</span> <span class="token number">60</span> <span class="token keyword">then</span>        <span class="token keyword">return</span> <span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token keyword">true</span>    <span class="token keyword">else</span>        <span class="token keyword">return</span> <span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token keyword">false</span>    <span class="token keyword">end</span><span class="token keyword">end</span><span class="token keyword">local</span> level1<span class="token punctuation">,</span> isOk <span class="token operator">=</span> <span class="token function">check_user</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token keyword">local</span> level2<span class="token punctuation">,</span> _ <span class="token operator">=</span> <span class="token function">check_user</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"level1 = %s, level2 = %s"</span><span class="token punctuation">,</span> level1<span class="token punctuation">,</span> level2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：level1 = A, level2 = C</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="6-3-可变参数">6.3 可变参数</h3><p>函数参数的个数可以是任意的，可变参数使用<code>...</code>来表示，若想要获取用户传入的所有的参数，可以使用<code>arg</code>变量。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span>    <span class="token keyword">local</span> result <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">local</span> arg <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token punctuation">}</span>    <span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">iparis</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token keyword">do</span>        result <span class="token operator">=</span> result <span class="token operator">+</span> v    <span class="token keyword">end</span>    <span class="token keyword">return</span> result<span class="token keyword">end</span>result <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"result = %d"</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：result = 25</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="6-4-匿名函数">6.4 匿名函数</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">test_func</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> fun<span class="token punctuation">)</span>    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span> <span class="token keyword">do</span>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">fun</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">end</span><span class="token keyword">end</span>tab <span class="token operator">=</span> <span class="token punctuation">{</span>key1 <span class="token operator">=</span> <span class="token string">"val1"</span><span class="token punctuation">,</span> key2 <span class="token operator">=</span> <span class="token string">"val2"</span><span class="token punctuation">}</span><span class="token function">test_func</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span> <span class="token keyword">return</span> key <span class="token operator">..</span> <span class="token string">" = "</span> <span class="token operator">..</span> val <span class="token keyword">end</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：key1 = val1key2 = val2--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="6-5-闭包">6.5 闭包</h3><p>闭包的主要作用：</p><ul><li>简洁，不需要在不使用时生成对象，也不需要函数名</li><li>可以捕获外部变量形成不同的调用环境</li></ul><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">local</span> index <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>        index <span class="token operator">=</span> index <span class="token operator">+</span> <span class="token number">1</span>        <span class="token keyword">return</span> index    <span class="token keyword">end</span><span class="token keyword">end</span><span class="token keyword">local</span> inner1 <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">inner1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">inner1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：1   2</span><span class="token keyword">local</span> inner2 <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">inner2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">inner2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：1   2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="7-运算符">7. 运算符</h2><h3 id="7-1-算术运算符">7.1 算术运算符</h3><p><strong>算术运算符</strong>是对数值类型的变量进行运算的。</p><table><thead><tr><th>运算符</th><th>说明</th><th>范例</th><th>结果</th></tr></thead><tbody><tr><td>+</td><td>正号</td><td>+3</td><td>3</td></tr><tr><td>-</td><td>负号</td><td>-4</td><td>-3</td></tr><tr><td>+</td><td>加法运算</td><td>5 + 5</td><td>10</td></tr><tr><td>-</td><td>减法运算</td><td>10 - 5</td><td>5</td></tr><tr><td>*</td><td>乘法运算</td><td>5 * 2</td><td>10</td></tr><tr><td>/</td><td>除法运算</td><td>10  / 3</td><td>3.3</td></tr><tr><td>%</td><td>取余运算</td><td>10 % 3</td><td>1</td></tr><tr><td>^</td><td>幂运算</td><td>2^3</td><td>8</td></tr></tbody></table><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token keyword">local</span> c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token keyword">local</span> d <span class="token operator">=</span> a <span class="token operator">-</span> b<span class="token keyword">local</span> e <span class="token operator">=</span> a <span class="token operator">*</span> b<span class="token keyword">local</span> f <span class="token operator">=</span> a <span class="token operator">/</span> b<span class="token keyword">local</span> g <span class="token operator">=</span> a <span class="token operator">%</span> b<span class="token keyword">local</span> h <span class="token operator">=</span> a <span class="token operator">^</span> b<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"c = %d, d = %d, e = %d, f = %f, g = %d, h = %d"</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">,</span> g<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：c = -17, d = -23, e = -60, f = -6.666667, g = 1, h = -8000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-2-关系运算符">7.2 关系运算符</h3><p><strong>关系运算符</strong>结果要么是真，要么是假。</p><table><thead><tr><th>运算符</th><th>说明</th><th>范例</th><th>结果</th></tr></thead><tbody><tr><td>==</td><td>相等</td><td>4 == 3</td><td>false</td></tr><tr><td>~=</td><td>不等于</td><td>4 ~= 3</td><td>true</td></tr><tr><td>&lt;</td><td>小于</td><td>4 &lt; 3</td><td>false</td></tr><tr><td>&gt;</td><td>大于</td><td>4 &gt; 3</td><td>true</td></tr><tr><td>&lt;=</td><td>小于等于</td><td>4 &lt;= 3</td><td>false</td></tr><tr><td>&gt;=</td><td>大于等于</td><td>4 &gt;= 3</td><td>true</td></tr></tbody></table><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">a <span class="token operator">=</span> <span class="token number">100</span>b <span class="token operator">=</span> <span class="token number">99</span><span class="token keyword">local</span> c <span class="token operator">=</span> a <span class="token operator">==</span> b<span class="token keyword">local</span> d <span class="token operator">=</span> a <span class="token operator">~=</span> b<span class="token keyword">local</span> e <span class="token operator">=</span> a <span class="token operator">&gt;</span> b<span class="token keyword">local</span> f <span class="token operator">=</span> a <span class="token operator">&lt;</span> b<span class="token keyword">local</span> g <span class="token operator">=</span> a <span class="token operator">&gt;=</span> b<span class="token keyword">local</span> h <span class="token operator">=</span> a <span class="token operator">&lt;=</span> b<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"c = "</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token string">"d = "</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> <span class="token string">"e = "</span><span class="token punctuation">,</span> e<span class="token punctuation">,</span> <span class="token string">"f = "</span><span class="token punctuation">,</span> f<span class="token punctuation">,</span> <span class="token string">"g = "</span><span class="token punctuation">,</span> g<span class="token punctuation">,</span> <span class="token string">"h = "</span><span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token comment">-- 输出：c =     false   d =     true    e =     true    f =     false   g =     true    h =     false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-3-逻辑运算符">7.3 逻辑运算符</h3><p><strong>逻辑运算符</strong>用来连接多个条件，最终返回是true或false，使用逻辑运算符可以模拟三目运算符。</p><table><thead><tr><th>运算符</th><th>说明</th><th>范例</th></tr></thead><tbody><tr><td>and</td><td>逻辑与</td><td>A and B，如果A的值为假，则不会再计算B的值</td></tr><tr><td>or</td><td>逻辑或</td><td>A or B，如果A的值为真，则不会再计算B的值</td></tr><tr><td>not</td><td>逻辑非</td><td>not A</td></tr></tbody></table><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> age <span class="token operator">=</span> <span class="token number">40</span><span class="token keyword">local</span> b <span class="token operator">=</span> age <span class="token operator">&gt;</span> <span class="token number">30</span> <span class="token keyword">and</span> age <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token keyword">local</span> c <span class="token operator">=</span> age <span class="token operator">&gt;</span> <span class="token number">40</span> <span class="token keyword">or</span> age <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token keyword">local</span> d <span class="token operator">=</span> <span class="token keyword">not</span> age<span class="token keyword">local</span> e <span class="token operator">=</span> <span class="token keyword">not</span> <span class="token keyword">nil</span><span class="token keyword">local</span> f <span class="token operator">=</span> <span class="token keyword">not</span> <span class="token number">0</span><span class="token keyword">local</span> g <span class="token operator">=</span> age <span class="token operator">&gt;</span> <span class="token number">30</span> <span class="token keyword">and</span> age <span class="token keyword">or</span> <span class="token number">30</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"b = "</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token string">"c = "</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token string">"d = "</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> <span class="token string">"e = "</span><span class="token punctuation">,</span> e<span class="token punctuation">,</span> <span class="token string">"f = "</span><span class="token punctuation">,</span> f<span class="token punctuation">,</span> <span class="token string">"g = "</span><span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token comment">-- 输出：b =     true    c =     false   d =     false   e =     true   f =     false   g = 40</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-4-其他运算符">7.4 其他运算符</h3><table><thead><tr><th>运算符</th><th>说明</th><th>范例</th></tr></thead><tbody><tr><td>…</td><td>连接运算符</td><td>str1…str2</td></tr><tr><td>#</td><td>获取字符串长度</td><td>#str1</td></tr></tbody></table><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> str1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token keyword">local</span> str2 <span class="token operator">=</span> <span class="token string">"lua"</span><span class="token keyword">local</span> str3 <span class="token operator">=</span> str1<span class="token operator">..</span>str2<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"str3 = %s, #str3 = %d"</span><span class="token punctuation">,</span> str3<span class="token punctuation">,</span> <span class="token operator">#</span>str3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：str3 = hellolua, #str3 = 8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="8-字符串">8. 字符串</h2><h3 id="8-1-字符串函数">8.1 字符串函数</h3><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td>upper(arg)</td><td>字符串全部转为大写字母</td></tr><tr><td>lower(arg)</td><td>字符串全部转为小写字母</td></tr><tr><td>sub(s, i, [,j])</td><td>截取字符串</td></tr><tr><td>gsub(mainString, findString, replaceString, num)</td><td>在字符串中替换</td></tr><tr><td>dump(function)</td><td>把函数序列化为字符串来保存</td></tr><tr><td>find(str, substr, [init, [end]])</td><td>在字符串中查找，存在返回具体位置，不存在返回nil</td></tr><tr><td>reverse(arg)</td><td>字符串反转</td></tr><tr><td>format(…)</td><td>返回一个格式化字符串</td></tr><tr><td>char(arg)</td><td>将整型数字转化为字符并连接</td></tr><tr><td>byte[arg[int,]]</td><td>byte转换字符为整数值</td></tr><tr><td>len(arg)</td><td>计算字符串长度</td></tr><tr><td>rep(string, n)</td><td>返回字符串string的n个拷贝</td></tr><tr><td>…</td><td>连接两个字符串</td></tr><tr><td>gmatch(str, pattern)</td><td>迭代器函数，每次调用返回一个查找到的子串</td></tr><tr><td>match(str, pattern, init)</td><td>查找第一个配对的子串</td></tr></tbody></table><h3 id="8-1-大小写转换">8.1 大小写转换</h3><p><code>string.upper(s)</code> 用于将字符串中所有字母转化为大写。</p><p><code>string.lower(s)</code> 用于将字符串中所有字母转化为小写。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">str1 <span class="token operator">=</span> <span class="token string">"Hello Lua"</span>str2 <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">upper</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>str3 <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">lower</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"str1 = %s, str2 = %s, str3 = %s"</span><span class="token punctuation">,</span> str1<span class="token punctuation">,</span> str2<span class="token punctuation">,</span> str3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：str1 = Hello Lua, str2 = HELLO LUA, str3 = hello lua</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-2-字符串截取">8.2 字符串截取</h3><p><code>string.sub(s, i [, j])</code> 用于字符串截取，返回字符串s从第i个字符到第j个字符的子串。注意，字符串的第1个字符索引是1。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">str1 <span class="token operator">=</span> <span class="token string">"Hello Lua"</span>str2 <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">sub</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>str3 <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">sub</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"str1 = %s, str2 = %s, str3 = %s"</span><span class="token punctuation">,</span> str1<span class="token punctuation">,</span> str2<span class="token punctuation">,</span> str3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：str1 = Hello Lua, str2 = Hello, str3 = Lua</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-3-字符串替换">8.3 字符串替换</h3><p><code>string.gsub(mainString, findString, replaceString, num)</code> 用于字符串替换，num指定替换字符串的次数，默认全部替换。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">str1 <span class="token operator">=</span> <span class="token string">"Hello world, Hello Lua"</span>str2 <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">gsub</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span> <span class="token string">"Nihao"</span><span class="token punctuation">)</span>str3 <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">gsub</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span> <span class="token string">"Nihao"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"str1 = %s, str2 = %s, str3 = %s"</span><span class="token punctuation">,</span> str1<span class="token punctuation">,</span> str2<span class="token punctuation">,</span> str3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：str1 = Hello world, Hello Lua, str2 = Nihao world, Nihao Lua, str3 = Nihao world, Hello Lua</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-4-序列化与加载">8.4 序列化与加载</h3><p><code>string.dump(function)</code> 用于将函数序列化为字符串，便于函数的保存与传输<code>loadstring(str)</code> 用于将序列化后的函数字符串反序列化加载为函数。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token keyword">end</span>str <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">dump</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>res <span class="token operator">=</span> <span class="token function">loadstring</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token function">res</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：uaQ 3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-5-字符串查找">8.5 字符串查找</h3><p><code>string.find(str, substr, [init, [end]])</code> 用于在一个指定的目标字符串中搜素指定的内容，返回其具体位置，不存在返回nil，也支持使用正则匹配查找。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">str1 <span class="token operator">=</span> <span class="token string">"Hello Lua"</span>index1 <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"Hello Lua"</span><span class="token punctuation">,</span> <span class="token string">"Lua"</span><span class="token punctuation">)</span>index2 <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"Hello Lua"</span><span class="token punctuation">,</span> <span class="token string">"Lua"</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>index3 <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"Hello Lua"</span><span class="token punctuation">,</span> <span class="token string">"%s%u%a."</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"index1 = "</span><span class="token punctuation">,</span> index1<span class="token punctuation">,</span> <span class="token string">"index2 = "</span><span class="token punctuation">,</span> index2<span class="token punctuation">,</span> <span class="token string">"index3 = "</span><span class="token punctuation">,</span> index3<span class="token punctuation">)</span><span class="token comment">-- 输出：index1 =   7   index2 =   nil   index3 =   6</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-6-字符串反转">8.6 字符串反转</h3><p><code>string.reverse(arg)</code> 用于反转字符串。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">str <span class="token operator">=</span> <span class="token string">"Hello Lua"</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"str = %s, res = %s"</span><span class="token punctuation">,</span> str<span class="token punctuation">,</span> string<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：str = Hello Lua, res = auL olleH</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="8-7-格式化字符串">8.7 格式化字符串</h3><table><thead><tr><th>格式</th><th>描述</th><th>格式</th><th>描述</th></tr></thead><tbody><tr><td>%c</td><td>接收数字，转化为字符</td><td>%d,%i</td><td>接收数字，转化为有符号整数</td></tr><tr><td>%o</td><td>接收数字，转化为八进制数</td><td>%u</td><td>接收数字，转化为无符号整数</td></tr><tr><td>%x</td><td>接收数字，转化为十六进制数，使用小写字母</td><td>%X</td><td>接收数字，转化为十六进制数，使用大写字母</td></tr><tr><td>%e</td><td>接收数字，转化为科学计数法，使用小写字母e</td><td>%E</td><td>接收数字，转化为科学计数法，使用大写字母E</td></tr><tr><td>%f</td><td>接收数字，转化为浮点数</td><td>%g,%G</td><td>接收数字，转化为%e,%f中较短格式</td></tr><tr><td>%q</td><td>接收字符串，转化为可安全被Lua编译器读入的格式</td><td>%s</td><td>接收字符串，按给定参数格式化字符串</td></tr><tr><td>%+</td><td>表示其后的数字转义符将让正数显示正号</td><td>%占位符</td><td>在后面指定了字串宽度时占位用</td></tr><tr><td>%对齐标识</td><td>在指定了字串宽度时, 默认为右对齐, 增加 - 号改为左对齐</td><td>%宽度数值</td><td>占位宽度</td></tr><tr><td>%小数位数/字串裁切</td><td>数字保留位数，字符串做裁切</td><td></td><td></td></tr></tbody></table><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"%c"</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"%+d"</span><span class="token punctuation">,</span> <span class="token number">17.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"%05d"</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：A+1700017--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-8-数字与字符的转换">8.8 数字与字符的转换</h3><p><code>string.char(arg)</code> 用于将整数转化为字符并连接。</p><p><code>string.byte(arg[,int])</code> 用于将字符转化为整数并连接，int表示要转换的字符。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">char</span><span class="token punctuation">(</span><span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"ABCD"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：abc67--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-9-字符串长度">8.9 字符串长度</h3><p><code>string.len()</code>用于获取字符串长度，另外<code>#</code>也可以获取字符串长度。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">str1 <span class="token operator">=</span> <span class="token string">"ABC"</span>str2 <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"str1's len = %d, str2's len = %d"</span><span class="token punctuation">,</span> string<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">#</span>str2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：str1's len = 3, str2's len = 5</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-10-字符串拷贝">8.10 字符串拷贝</h3><p><code>string.rep(string, n)</code> 用于将字符串拷贝n次。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">str <span class="token operator">=</span> <span class="token string">"ABCD"</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"str = %s"</span><span class="token punctuation">,</span> string<span class="token punctuation">.</span><span class="token function">rep</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：str = ABCDABCD</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="8-11-字符串连接">8.11 字符串连接</h3><p>字符串可以使用<code>..</code>连接。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">str1 <span class="token operator">=</span> <span class="token string">"hello"</span>str2 <span class="token operator">=</span> <span class="token string">"lua"</span>res <span class="token operator">=</span> str1 <span class="token operator">..</span> <span class="token string">" "</span> <span class="token operator">..</span> str2<span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"res = %s"</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：hello lua</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-12-字符串匹配">8.12 字符串匹配</h3><p><code>string.gmatch(str, pattern)</code> 是一个迭代器函数，每调用一次，返回一个在字符串str查找到的符合pattern描述的子串，如果没找到返回nil，也支持正则匹配。</p><p><code>string.match(str, pattern, init)</code> 只找寻str中第一个配对，搜索起点可配置，也支持正则匹配。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">for</span> word <span class="token keyword">in</span> string<span class="token punctuation">.</span><span class="token function">gmatch</span><span class="token punctuation">(</span><span class="token string">"Hello Lua"</span><span class="token punctuation">,</span> <span class="token string">"%a+"</span><span class="token punctuation">)</span> <span class="token keyword">do</span>    <span class="token function">print</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token keyword">end</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">"I have 2 questions for you."</span><span class="token punctuation">,</span> <span class="token string">"%d+ %a+"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：HelloLua2 questions--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-13-转义字符">8.13 转义字符</h3><table><thead><tr><th>转义字符</th><th>意义</th><th>转义字符</th><th>意义</th></tr></thead><tbody><tr><td>\a</td><td>响铃</td><td>\b</td><td>退格，将当前位置移到前一列</td></tr><tr><td>\f</td><td>换页，将当前位置移到下页开头</td><td>\n</td><td>换行，将当前位置移到下一行开头</td></tr><tr><td>\r</td><td>回车，将当前位置移到本行开头</td><td>\t</td><td>水平制表，跳到下一个Tab位置</td></tr><tr><td>\v</td><td>垂直制表</td><td>\</td><td>代表一个反斜线字符</td></tr><tr><td>’</td><td>代表一个单引号字符</td><td>"</td><td>代表一个双引号字符</td></tr><tr><td>\0</td><td>空字符</td><td>\ddd</td><td>1到3位八进制数所代表的任意字符</td></tr><tr><td>\xhh</td><td>1到2位十六进制数所代表的任意字符</td><td></td><td></td></tr></tbody></table><h2 id="9-Table">9. Table</h2><p><strong>数组与表的类型都为table</strong>。</p><p>数组的语法为<code>arrName = {element1, element2, ....}</code>，数组保存的一组数据类型可以不一致，数组的索引值是以1为起始的，也可以人为指定为0开始，如<code>arrName = {[0]=element1, element2, ....}</code>。</p><p>表是一个 “关联数组”，表的索引可以是数字或者是字符串，所有索引值都需要用 <code>[</code> 和 <code>]</code> 括起来；如果没有 [] 括起，则认为是字符串索引，可以认为，数组是索引为以0或1开始的连续数字的一种特殊的表，因此，表的一些增删改查行为函数也适用于数组。</p><table><thead><tr><th>操作</th><th>描述</th></tr></thead><tbody><tr><td>concat</td><td>连接</td></tr><tr><td>insert</td><td>插入</td></tr><tr><td>maxn</td><td>最大key</td></tr><tr><td>remove</td><td>移除</td></tr><tr><td>sort</td><td>升序排序</td></tr></tbody></table><h3 id="9-1-定义">9.1 定义</h3><p><code>#</code>后面直接加数组名可以获取数组的长度，如果设置了索引从0开始，则获取到的数组长度会比实际的长度少1。</p><p><code>#</code>后面直接加表名无法准确获取数组的长度，会在索引中断的地方停止计数，应该用循环遍历来获取正确长度。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- 数组</span>letters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>letters<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"A"</span>letters<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"B"</span>letters<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"C"</span>letters<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"D"</span>letters<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"E"</span>days <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"Monday"</span><span class="token punctuation">,</span> <span class="token string">"Tuesday"</span><span class="token punctuation">,</span> <span class="token string">"Wednesday"</span><span class="token punctuation">,</span> <span class="token string">"Thursday"</span><span class="token punctuation">,</span> <span class="token string">"Friday"</span><span class="token punctuation">,</span> <span class="token string">"Saturday"</span><span class="token punctuation">,</span> <span class="token string">"Sunday"</span><span class="token punctuation">}</span>numbers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">nil</span><span class="token punctuation">}</span>all <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token keyword">nil</span><span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">}</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"Len: letters = %d, days = %d, numbers = %d, all = %d"</span><span class="token punctuation">,</span> <span class="token operator">#</span>letters<span class="token punctuation">,</span> <span class="token operator">#</span>days<span class="token punctuation">,</span> <span class="token operator">#</span>numbers<span class="token punctuation">,</span> <span class="token operator">#</span>all<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：Len: letters = 5, days = 6, numbers = 3, all = 4</span><span class="token comment">-- 表</span>mytable1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Lua"</span><span class="token punctuation">,</span> greet <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Count"</span><span class="token punctuation">}</span>mytable2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"Len: mytable1 = %d, mytable2 = %d"</span><span class="token punctuation">,</span> <span class="token operator">#</span>mytable1<span class="token punctuation">,</span> <span class="token operator">#</span>mytable2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：Len: mytable1 = 1, mytable2 = 0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="9-2-遍历">9.2 遍历</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- 数组</span>days <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"Monday"</span><span class="token punctuation">,</span> <span class="token string">"Tuesday"</span><span class="token punctuation">,</span> <span class="token string">"Wednesday"</span><span class="token punctuation">,</span> <span class="token string">"Thursday"</span><span class="token punctuation">,</span> <span class="token string">"Friday"</span><span class="token punctuation">,</span> <span class="token string">"Saturday"</span><span class="token punctuation">,</span> <span class="token string">"Sunday"</span><span class="token punctuation">}</span><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">#</span>days <span class="token keyword">do</span>    <span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"days[%d] = %s"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> days<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：days[0] = Mondaydays[1] = Tuesdaydays[2] = Wednesdaydays[3] = Thursdaydays[4] = Fridaydays[5] = Saturdaydays[6] = Sunday--]]</span>letters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token string">"E"</span><span class="token punctuation">}</span><span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>letters<span class="token punctuation">)</span> <span class="token keyword">do</span>  <span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"letters[%d] = %s"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：letters[1] = Aletters[2] = Bletters[3] = Cletters[4] = Dletters[5] = E--]]</span><span class="token comment">-- 表</span>mytable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Lua"</span><span class="token punctuation">,</span> greet <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Count"</span><span class="token punctuation">}</span><span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span> <span class="token keyword">do</span>  <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：1   Lua3   Countgreet   Hello--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="9-3-连接">9.3 连接</h3><p><code>table.concat(table [, sep [, start [, end]]])</code> 函数列出参数中指定table的数组部分从start位置到end位置的所有元素，元素键以指定分隔符sep隔开，start默认为1。注：该函数只处理table下标为数字的数据，且下标是连续的才能被处理，断开就结束了。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">fruits <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"orange"</span><span class="token punctuation">,</span> <span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"banana"</span><span class="token punctuation">}</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"str = %s"</span><span class="token punctuation">,</span> table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>fruits<span class="token punctuation">,</span> <span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：orange, apple, banana</span>letters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token string">"E"</span><span class="token punctuation">}</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"str = %s"</span><span class="token punctuation">,</span> table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>letters<span class="token punctuation">,</span> <span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：B, C, D, E</span>mytable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Lua"</span><span class="token punctuation">,</span> greet <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Count"</span><span class="token punctuation">}</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"str = %s"</span><span class="token punctuation">,</span> table<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> <span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：Lua</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="9-4-插入">9.4 插入</h3><p><code>table.insert(table [pos,] value)</code> 函数在table指定位置pos插入一个value元素，pos默认为数组部分末尾，即连续下标元素的最后。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">fruits <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"orange"</span><span class="token punctuation">,</span> <span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"banana"</span><span class="token punctuation">}</span>table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>fruits<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"watermelon"</span><span class="token punctuation">)</span><span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span> <span class="token keyword">do</span>    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：1   orange2   apple3   watermelon4   banana--]]</span>letters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token string">"E"</span><span class="token punctuation">}</span>table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>letters<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"W"</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">0</span>， <span class="token operator">#</span>letters <span class="token keyword">do</span>    <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> letters<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：0   A1   B2   C3   W4   D5   E--]]</span>mytable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Lua"</span><span class="token punctuation">,</span> greet <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Count"</span><span class="token punctuation">}</span>table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"Table"</span><span class="token punctuation">)</span><span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span> <span class="token keyword">do</span>    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token keyword">end</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token operator">#</span>mytable<span class="token punctuation">)</span><span class="token comment">--[[ 输出：1   Lua2   Table3   Countgreet   Hello3--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="9-5-最大值">9.5 最大值</h3><p><code>table.maxn(table)</code> 函数返回table的最大正数索引，如果没有正数索引返回0。Lua5.2之后的版本已移除该函数。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">fruits <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"orange"</span><span class="token punctuation">,</span> <span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"banana"</span><span class="token punctuation">}</span><span class="token function">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">maxn</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token punctuation">)</span>letters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token string">"E"</span><span class="token punctuation">}</span><span class="token function">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">maxn</span><span class="token punctuation">(</span>letters<span class="token punctuation">)</span><span class="token punctuation">)</span>mytable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Lua"</span><span class="token punctuation">,</span> greet <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Count"</span><span class="token punctuation">}</span><span class="token function">print</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">maxn</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：343--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="9-6-删除">9.6 删除</h3><p><code>table.remove(table [,pos])</code> 函数删除指定pos位置的元素，pos默认为table长度。即连续索引的最大值。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">fruits <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"orange"</span><span class="token punctuation">,</span> <span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"banana"</span><span class="token punctuation">}</span>remove1 <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span>remove2 <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>fruits<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"remove1 = %s, remove2 = %s"</span><span class="token punctuation">,</span> remove1<span class="token punctuation">,</span> remove2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：remove1 = banana, remove2 = orange</span>mytable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Lua"</span><span class="token punctuation">,</span> greet <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Count"</span><span class="token punctuation">}</span>remove <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"remove = %s"</span><span class="token punctuation">,</span> remove<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：remove = Lua</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="9-7-排序">9.7 排序</h3><p><code>table.sort(table [,comp])</code> 函数用于对给定的table进行升序排序，还支持传入排序规则。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> test0 <span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">}</span>table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>test0<span class="token punctuation">)</span><span class="token keyword">for</span> i<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>test0<span class="token punctuation">)</span> <span class="token keyword">do</span>    io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>v<span class="token operator">..</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">local</span> test1 <span class="token operator">=</span><span class="token punctuation">{</span>                <span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"deng"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"luo"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"yang"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"ma"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"wu"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span>table<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>test1<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token keyword">return</span> a<span class="token punctuation">.</span>id <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>id <span class="token keyword">end</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>test1<span class="token punctuation">)</span> <span class="token keyword">do</span>   <span class="token function">print</span><span class="token punctuation">(</span>test1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span> test1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：1 2 3 4 6 7 8 91   deng2   yang5   wu8   ma9   luo--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="10-元素metatable">10. 元素metatable</h2><h3 id="10-1-定义-2">10.1 定义</h3><p>Lua的table中可以访问对应的key来得到value值，但是却无法对两个table进行操作。元表允许改变table的行为，每个行为关联了对应的元方法。如两个table相加操作<code>a+b</code>，当Lua尝试对两个表相加时，先检查两者之一是否有元表，之后检查<code>__add</code>字段是否存在，如果操作，则调用相应的值。<code>__add</code>等即时字段其对应的值就是元方法。</p><p>有两个重要的函数处理元表：</p><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td>setmetatable(table, metatable)</td><td>对指定的table设置元表，如果元表中存在<code>__metatable</code>键值，则setmetatable会失败</td></tr><tr><td>getmetatable(table)</td><td>返回对象的元表</td></tr></tbody></table><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">mytable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>      <span class="token comment">-- 普通表</span>mymetatable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">-- 元表</span><span class="token function">setmetatable</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> mymetatable<span class="token punctuation">)</span> <span class="token comment">-- 设置元表</span><span class="token function">getmetatable</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span> <span class="token comment">-- 返回元表</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="10-2-index元方法">10.2 __index元方法</h3><p><code>__index</code>元方法用来对表访问。</p><p>Lua查找一个表元素时的规则：</p><p>1 在表中查找，如果找到，返回该元素，找不到继续</p><p>2 判断该表是否有元表，如果没有元表，返回nil，有元表则继续</p><p>3 判断该表有没有<code>__index</code>方法，如果<code>__index</code>方法为nil，则返回nil，如果<code>__index</code>方法是一个表，则重复1、2、3步；如果<code>__index</code>方法是一个函数，则返回该函数的返回值</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">mytable <span class="token operator">=</span> <span class="token function">setmetatable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>key1 <span class="token operator">=</span> <span class="token string">"value1"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>__index <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> key<span class="token punctuation">)</span>    <span class="token keyword">if</span> key <span class="token operator">==</span> <span class="token string">"key2"</span> <span class="token keyword">then</span>        <span class="token keyword">return</span> <span class="token string">"metatablevalue"</span>        <span class="token keyword">else</span>           <span class="token keyword">return</span> <span class="token keyword">nil</span>        <span class="token keyword">end</span>     <span class="token keyword">end</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"key1 = %s, key2 = %s"</span><span class="token punctuation">,</span> mytable<span class="token punctuation">.</span>key1<span class="token punctuation">,</span> mytable<span class="token punctuation">.</span>key2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：key1 = value1, key2 = metatablevalue</span><span class="token comment">-- 等价于</span>mytable <span class="token operator">=</span> <span class="token function">setmetatable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>key1 <span class="token operator">=</span> <span class="token string">"value1"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>__index <span class="token operator">=</span> <span class="token punctuation">{</span>key2 <span class="token operator">=</span> <span class="token string">"metatablevalue"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>mytable<span class="token punctuation">.</span>key1<span class="token punctuation">,</span> mytable<span class="token punctuation">.</span>key2<span class="token punctuation">)</span><span class="token comment">-- 输出：value1    metatablevalue</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="10-3-newindex元方法">10.3 __newindex元方法</h3><p><code>__newindex</code>元方法用来对表更新。</p><p>当给表的一个缺少的索引赋值，解释器会查找<code>__newindex</code>元方法，如果存在，则调用这个函数而不进行赋值操作。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">mytable <span class="token operator">=</span> <span class="token function">setmetatable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>key1 <span class="token operator">=</span> <span class="token string">"value1"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    __newindex <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>        <span class="token function">rawset</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token string">"\""</span><span class="token operator">..</span>value<span class="token operator">..</span><span class="token string">"\""</span><span class="token punctuation">)</span>    <span class="token keyword">end</span><span class="token punctuation">}</span><span class="token punctuation">)</span>mytable<span class="token punctuation">.</span>key1 <span class="token operator">=</span> <span class="token string">"new value"</span>mytable<span class="token punctuation">.</span>key2 <span class="token operator">=</span> <span class="token number">4</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">foramt</span><span class="token punctuation">(</span><span class="token string">"key1 = %s, key2 = %s"</span><span class="token punctuation">,</span> mytable<span class="token punctuation">.</span>key1<span class="token punctuation">,</span> mytable<span class="token punctuation">.</span>key2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 输出：key1 = new value, key2 = "4"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="10-4-call元方法">10.4 __call元方法</h3><p><code>__call</code>元方法可以让table当做一个函数来使用。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> mt <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>mt<span class="token punctuation">.</span>__call <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span><span class="token punctuation">...</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> _<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token punctuation">}</span> <span class="token keyword">do</span>        <span class="token function">print</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>    <span class="token keyword">end</span><span class="token keyword">end</span>t <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token function">setmetatable</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> mt<span class="token punctuation">)</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：123--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="10-5-tostring元方法">10.5 __tostring元方法</h3><p><code>__tostring</code>元方法用于修改表的输出行为。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">mytable <span class="token operator">=</span> <span class="token function">setmetatable</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>__tostring <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span>        sum <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span> <span class="token keyword">do</span>            sum <span class="token operator">=</span> sum <span class="token operator">+</span> v        <span class="token keyword">end</span>    <span class="token keyword">return</span> <span class="token string">"sum = "</span> <span class="token operator">..</span>sum    <span class="token keyword">end</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span><span class="token comment">-- 输出：sum = 60</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="10-6-为表添加操作符">10.6 为表添加操作符</h3><table><thead><tr><th>模式</th><th>等价于运算符</th><th>模式</th><th>等价于运算符</th></tr></thead><tbody><tr><td>__add</td><td>+</td><td>__sub</td><td>-</td></tr><tr><td>__mul</td><td>*</td><td>__div</td><td>/</td></tr><tr><td>__mod</td><td>%</td><td>__unm</td><td>-</td></tr><tr><td>__concat</td><td>…</td><td>__eq</td><td>==</td></tr><tr><td>__lt</td><td>&lt;</td><td>__le</td><td>&lt;=</td></tr></tbody></table><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">table_maxn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>    <span class="token keyword">local</span> mn <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">do</span>        <span class="token keyword">if</span> mn <span class="token operator">&lt;</span> k <span class="token keyword">then</span>            mn <span class="token operator">=</span> k        <span class="token keyword">end</span>    <span class="token keyword">end</span>    <span class="token keyword">return</span> mn<span class="token keyword">end</span><span class="token comment">-- 两表相加</span>mytable <span class="token operator">=</span> <span class="token function">setmetatable</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    __add <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> newtable<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token function">table_maxn</span><span class="token punctuation">(</span>newtable<span class="token punctuation">)</span> <span class="token keyword">do</span>            table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> <span class="token function">table_maxn</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> newtable<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">end</span>        <span class="token keyword">return</span> mytable   <span class="token keyword">end</span><span class="token punctuation">}</span><span class="token punctuation">)</span>secondtable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span>mytable <span class="token operator">=</span> mytable <span class="token operator">+</span> secondtable<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span> <span class="token keyword">do</span>    <span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">--[[ 输出：1   12   23   34   45   56   6--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="11-模块与包">11. 模块与包</h2><h3 id="11-1-模块定义">11.1 模块定义</h3><p>模块类似于一个封装库，是由变量、函数等已知元素组成的table，因此创建模块就是创建一个table，然后把需要导出的常量、函数放入其中，最后返回这个table即可。如下创建自定义模块module。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- 文件名 module.lua</span><span class="token comment">-- 定义一个名为module的模块</span>module <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment">-- 定义一个常量</span>module<span class="token punctuation">.</span>constant <span class="token operator">=</span> <span class="token string">"this is constant"</span><span class="token comment">-- 定义一个函数</span><span class="token keyword">function</span> module<span class="token punctuation">.</span><span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"This is a public function\n"</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"This is a private function"</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token keyword">function</span> module<span class="token punctuation">.</span><span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token keyword">return</span> module<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-2-require函数">11.2 require函数</h3><p><code>require("模块名")</code>用来加载模块，执行require后会返回一个由模块常量或函数组成的table，并且还会定义一个包含该table的全局变量。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"module"</span><span class="token punctuation">)</span><span class="token comment">-- 别名变量 m</span><span class="token keyword">local</span> m <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"module"</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>constant<span class="token punctuation">)</span>m<span class="token punctuation">.</span><span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：this is constantThis is a private function--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>require函数会尝试从Lua文件或C程序中加载模块，require用于搜索Lua文件的路径存放在全局变量package_path中，当Lua启动后，会以环境变量LUA_PATH的值来初始化这个环境变量，如果找不到该环境变量，则使用一个编译时定义的默认路径来初始化。</p><p>可以自定义设置路况，在当前用户跟目录下打开.profile文件（没有则创建，打开.bashrc文件也可以），例如把"~/lua/"路径加入LUA_PATH环境变量里。</p><pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">#LUA_PATHexport LAU_PATH="~/lua/?.lua;;"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>文件路径以";“号分割，最后两个”;;"表示新加的路径后面加上原来的默认路径。</p><p>接着执行指令<code>source ~/.profile</code>更新变量参数使之生效。</p><p>如果找到目标文件，则会调用<code>package.loadfile</code>来加载模块，否则就会找C程序库。</p><p>搜索的文件路径是从全局变量 package.cpath 获取，而这个变量则是通过环境变量 LUA_CPATH 来初始。</p><p>搜索的策略跟上面的一样，只不过现在换成搜索的是 so 或 dll 类型的文件。如果找得到，那么 require 就会通过 package.loadlib 来加载它。</p><h3 id="11-3-module函数">11.3 module函数</h3><p><code>module()</code>函数调用时会创建表并将其赋予给全局变量和loaded table，最后还会将这个表设置为主程序块的环境。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- 在模块文件在使用module函数</span>module <span class="token string">"module_name"</span><span class="token comment">--[[等同语法--]]</span><span class="token comment">-- 定义模块名</span><span class="token keyword">local</span> moduleName <span class="token operator">=</span> <span class="token string">"module_name"</span><span class="token comment">-- 定义用于返回的模块表</span><span class="token keyword">local</span> M <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment">-- 将模块表加入到全局变量</span>_G<span class="token punctuation">[</span>moduleName<span class="token punctuation">]</span> <span class="token operator">=</span> M<span class="token comment">-- 将模块表加入到package.loaded中防止多次加载</span>package<span class="token punctuation">.</span>loaded<span class="token punctuation">[</span>moduleName<span class="token punctuation">]</span> <span class="token operator">=</span> M<span class="token comment">-- 将模块表设置为函数的环境表，使得模块中的所有操作都是在模块表中，这样定义函数就直接定义在模块表中</span><span class="token function">setfenv</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> M<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-4-调用C语言包">11.4 调用C语言包</h3><p>Lua和C语言很容易结合，可以使用C语言为Lua写包，C语言包使用前必须先加载并连接，大多数系统是通过动态连接库机制。</p><p>Lua在一个加loadlib的函数内提供了所有的动态连接功能。这个函数的两个参数：库的绝对路径和初始化函数，如：</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> path <span class="token operator">=</span> <span class="token string">"/usr/local/lua/lib/libluasocket.so"</span><span class="token keyword">local</span> f <span class="token operator">=</span> <span class="token function">loadlib</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"luaopen_socket"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>loadlib函数加载指定的库并连接到Lua，然而并没有调用初始化函数，而是返回初始化函数作为Lua的一个函数。</p><p>如果加载动态库或者查找初始化函数出错，loadlib将返回nil和错误信息。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> path <span class="token operator">=</span> <span class="token string">"C:\\windows\\luasocket.dll"</span><span class="token keyword">local</span> f <span class="token operator">=</span> <span class="token function">loadlib</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"luaopen_socket"</span><span class="token punctuation">)</span><span class="token comment">-- 真正打开库</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>一般情况下我们期望二进制的发布库包含一个与前面代码段相似的 stub 文件，安装二进制库的时候可以随便放在某个目录，只需要修改 stub 文件对应二进制库的实际路径即可。</p><p>将 stub 文件所在的目录加入到 LUA_PATH，这样设定后就可以使用 require 函数加载 C 库了。</p><h2 id="12-协程">12. 协程</h2><h3 id="12-1-定义-2">12.1 定义</h3><p>协程与线程比较类似，拥有独立的堆栈、独立的局部变量、独立的指令，同时又与其他协同程序共享全局变量和其他大部分东西。</p><p>一个具有多线程的程序可以同时运行几个线程，而协程却需要彼此写作运行，在任一指定时刻只有一个协程在运行，并且这个正在运行的协同程序只有在明确的被要求挂起时才会被挂起。</p><p>协程有点类似同步的多线程，在等待同一个线程锁的几个线程有点类似协程。</p><h3 id="12-2-用法">12.2 用法</h3><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>coroutine.create()</td><td>创建coroutine，返回coroutine，参数是一个函数，当和resume配合使用时唤醒函数调用</td></tr><tr><td>coroutine.resume()</td><td>重启coroutine，和create配合使用</td></tr><tr><td>coroutine.yield()</td><td>挂起coroutine，将coroutine设置为挂起状态，和resume配合使用能够有很多效果</td></tr><tr><td>coroutine.status()</td><td>查看coroutine的状态，有dead、suspened、running三种状态</td></tr><tr><td>coroutine.wrap()</td><td>创建coroutine，返回一个函数，一旦调用这个函数，就进入croutine，和create功能重复</td></tr><tr><td>coroutine.running()</td><td>返回正在运行的coroutine，一个coroutine就是一个新村，返回一个coroutine的线程号</td></tr></tbody></table><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"foo函数输出"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>    <span class="token keyword">return</span> coroutine<span class="token punctuation">.</span><span class="token function">yield</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> a<span class="token punctuation">)</span><span class="token keyword">end</span>co <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>     <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"第一次协同程序执行输出"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>        <span class="token keyword">local</span> r <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span>a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"第二次协同程序执行输出"</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>        <span class="token keyword">local</span> r<span class="token punctuation">,</span> s <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">yield</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">,</span> a <span class="token operator">-</span> b<span class="token punctuation">)</span>                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"第三次协同程序执行输出"</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> s<span class="token punctuation">)</span>        <span class="token keyword">return</span> b<span class="token punctuation">,</span> <span class="token string">"结束协同程序"</span>   <span class="token keyword">end</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"main"</span><span class="token punctuation">,</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>co<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"--分割线--"</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"main"</span><span class="token punctuation">,</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>co<span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"--分割线--"</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"main"</span><span class="token punctuation">,</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>co<span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token string">"y"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"--分割线--"</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"main"</span><span class="token punctuation">,</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>co<span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token string">"y"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"--分割线--"</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：第一次协同程序执行输出 1 10foo 函数输出 2main true 4--分割线--第二次协同程序执行输出 rmain true 11 -9--分割线--第三次协同程序执行输出 x ymain true 10 结束协同程序--分割线--main false 10 cannot resume dead coroutine--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="12-3-生产者-消费者问题">12.3 生产者-消费者问题</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">local</span> newProductor<span class="token keyword">function</span> <span class="token function">productor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">local</span> i <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">while</span> <span class="token keyword">true</span> <span class="token keyword">do</span>        i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>        <span class="token function">send</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>    <span class="token keyword">end</span><span class="token keyword">end</span><span class="token keyword">function</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">while</span> <span class="token keyword">true</span> <span class="token keyword">do</span>        <span class="token keyword">local</span> i <span class="token operator">=</span> <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>    <span class="token keyword">end</span><span class="token keyword">end</span><span class="token keyword">function</span> <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">local</span> status<span class="token punctuation">,</span> value <span class="token operator">=</span> coroutine<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>newProductor<span class="token punctuation">)</span>    <span class="token keyword">return</span> value<span class="token keyword">end</span><span class="token keyword">function</span> <span class="token function">send</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>    coroutine<span class="token punctuation">.</span><span class="token function">yield</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">end</span>newProductor <span class="token operator">=</span> coutine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>productor<span class="token punctuation">)</span><span class="token function">cosumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：1234567...--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="13-文件IO">13. 文件IO</h2><p>Lua文件IO库用于读取和处理文件，分为<strong>简单模式</strong>和<strong>完全模式</strong>：</p><ul><li>简单模式：拥有一个当前输入文件和一个当前输出文件，并且提供针对这些文件相关的操作，适合做一些简单的文件操作</li><li>完全模式：使用外部的文件句柄来实现，以一种面向对象的形式，将所有的文件操作定义为文件句柄的方法，适合做一些高级的文件操作，如同时读取多个文件</li></ul><h3 id="13-1-简单模式">13.1 简单模式</h3><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td>io.input([file])</td><td>设置默认的输入文件，file为文件名，返回文件句柄</td></tr><tr><td>io.output([file])</td><td>设置默认的输出文件，file为文件名</td></tr><tr><td>io.close([file])</td><td>关闭文件，不带参数的默认文件</td></tr><tr><td>io.read(formats)</td><td>读取默认文件，formats取值为<code>a*</code>-全读、<code>*n</code>-按数字读入、<code>*l</code>-按行读入，<code>n</code>-读取n个字符</td></tr><tr><td>io.lines([fn])</td><td>fn文件名，如无文件，取默认文件，返回一个迭代器</td></tr><tr><td>io.write(value)</td><td>向默认文件写入内容</td></tr><tr><td>io.flush()</td><td>把文件缓存里的操作立即作用到默认输出文件</td></tr></tbody></table><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- 以只读方式打开文件</span>file <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"test.lua"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token comment">-- 设置默认输入文件</span>io<span class="token punctuation">.</span><span class="token function">input</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token comment">-- 输出文件第一行</span><span class="token function">print</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"read file: [%s]"</span><span class="token punctuation">,</span> io<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 关闭文件</span>io<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token comment">-- 以附加的方式打开只写文件</span>file <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"test.lua"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">)</span><span class="token comment">-- 设置默认输出文件</span>io<span class="token punctuation">.</span><span class="token function">output</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token comment">-- 在文件最后一行写入</span>io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"File content in test.lua"</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"file write success"</span><span class="token punctuation">)</span><span class="token comment">-- 关闭文件</span>io<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="13-2-完全模式">13.2 完全模式</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- 以只读方式打开文件</span>file <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"test.lua"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token comment">-- 输出文件第一行</span><span class="token function">print</span><span class="token punctuation">(</span>file<span class="token punctuation">:</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 关闭打开的文件</span>file<span class="token punctuation">::</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">-- 以附加的方式打开只写文件</span>file <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"test.lua"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">)</span><span class="token comment">-- 在文件最后一行写入</span>file<span class="token punctuation">::</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"--test"</span><span class="token punctuation">)</span><span class="token comment">-- 关闭打开的文件</span>file<span class="token punctuation">::</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">-- 以只读方式打开文件</span>file <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"test.lua"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token comment">-- 定位到文件倒数第25个位置</span>file<span class="token punctuation">::</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token string">"end"</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token comment">-- 从当前（倒数第25个位置）读取整个文件</span><span class="token function">print</span><span class="token punctuation">(</span>file<span class="token punctuation">::</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"*a"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">-- 关闭打开的文件</span>file<span class="token punctuation">::</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="14-错误处理">14. 错误处理</h2><p>错误类型分为<strong>语法错误</strong>和<strong>运行错误</strong>。</p><p>语法错误通常是对程序的组件使用不当引起，如：</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">for</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">-- 输出：lua: main.lua:2: 'do' expected near 'print'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>运行错误时程序可以正常运行，但是会输出报错信息，如：</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token keyword">end</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：lua: main.lua:2: attempt to perform arithmetic on local 'b' (a nil value)stack traceback:    main.lua:2: in function 'add'    main.lua:4: in main chunk--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="14-1-assert">14.1 assert</h3><p><code>assert(express, message)</code> 断言函数会判断给定express表达式是否成立，成立的话不做任何事情，不成立则以message作为错误信息抛出。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>    <span class="token function">assert</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"number"</span><span class="token punctuation">,</span> <span class="token string">"a not a number"</span><span class="token punctuation">)</span>    <span class="token function">assert</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"number"</span><span class="token punctuation">,</span> <span class="token string">"b not a number"</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token keyword">end</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：lua: main.lua:3: b not a numberstack traceback:    [C]: in function 'assert'    main.lua:3: in function 'add'    main.lua:6: in main chunk--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="14-2-error">14.2 error</h3><p><code>error(message [,level])</code> 函数终止正在执行的函数，并返回message的内容作为错误信息，level参数指示获得错误的位置，level=1指出调用error位置，level=2指出调用error函数的函数吗，level=0不添加错误位置信息。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">~=</span> <span class="token string">"number"</span><span class="token punctuation">)</span> <span class="token keyword">then</span>        <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"a not a number"</span><span class="token punctuation">)</span>    <span class="token keyword">end</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">~=</span> <span class="token string">"number"</span><span class="token punctuation">)</span> <span class="token keyword">then</span>        <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"b not a number"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">end</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token keyword">end</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：lua: main.lua:10: b not a numberstack traceback:    [C]: in function 'error'    main.lua:6: in function 'add'    main.lua:10: in main chunk--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="14-3-pcall">14.3 pcall</h3><p>可以使用<code>pcall</code>函数包装需要执行的代码，<code>pcall</code>函数接收一个函数和要传递给后者的参数，并执行该函数，无错误返回true，有错误返回false和错误信息。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">a<span class="token punctuation">,</span> errorinfo <span class="token operator">=</span> <span class="token function">pcall</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">end</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> errorinfo<span class="token punctuation">)</span><span class="token comment">--[[ 输出：27true nil--]]</span>b<span class="token punctuation">,</span> errorinfo <span class="token operator">=</span> <span class="token function">pcall</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'error..'</span><span class="token punctuation">)</span> <span class="token keyword">end</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> errorinfo<span class="token punctuation">)</span><span class="token comment">--[[ 输出：27false main.lua1: error..--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="14-4-xpcall">14.4 xpcall</h3><p><code>xpcall</code>函数相比<code>pcall</code>函数会返回更多的错误调试信息，并执行该函数，无错误返回true，有错误返回false和错误信息。</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token keyword">function</span> <span class="token function">myfunction</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>   n <span class="token operator">=</span> n <span class="token operator">/</span> <span class="token keyword">nil</span><span class="token keyword">end</span><span class="token keyword">function</span> <span class="token function">myerrorhandler</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"ERROR:"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token keyword">end</span>status <span class="token operator">=</span> <span class="token function">xpcall</span><span class="token punctuation">(</span>myfunction<span class="token punctuation">,</span> myerrorhandler<span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token comment">--[[ 输出：ERROR:  main.lua:2: attempt to perform arithmetic on global 'n' (a nil value)false--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="15-垃圾回收">15. 垃圾回收</h2><h3 id="15-1-机制">15.1 机制</h3><p>Lua运行了一个垃圾收集器收集所有死对象来完成自动内存管理的工作。</p><p>Lua实现了一个增量标记-扫描收集器，使用垃圾收集器间歇率和垃圾收集器步进倍率来控制垃圾收集循环。</p><p>垃圾收集器间歇率控制着收集器需要在开启新的循环前要等待多久。</p><p>垃圾收集器步进倍率控制收集器运作速度相对与内存分配速度的倍率，默认值是200%，即运作速度2倍于内存分配速率。</p><h3 id="15-2-垃圾回收器函数">15.2 垃圾回收器函数</h3><p>Lua提供一下函数<code>collectgarbage([opt [,arg]])</code>来控制自动内存管理。</p><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>collectgarbage(“collect”)</td><td>做一次完整的垃圾收集循环</td></tr><tr><td>collectgarbage(“count”)</td><td>以K字节数为单位返回Lua使用的总内存数</td></tr><tr><td>collectgarbage(“restart”)</td><td>重启垃圾收集器的自动运行</td></tr><tr><td>collectgarbage(“setpause”)</td><td>将arg设为收集器的间歇率，返回间歇率的前一个值</td></tr><tr><td>collectgarbage(“setstepmul”)</td><td>返回步进倍率的前一个值</td></tr><tr><td>collectgarbage(“step”)</td><td>单步运行垃圾收集器，步长由arg控制</td></tr><tr><td>collectgarbage(“stop”)</td><td>停止垃圾收集器的运行</td></tr></tbody></table><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">mytable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"orange"</span><span class="token punctuation">,</span> <span class="token string">"banana"</span><span class="token punctuation">}</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">collectgarbage</span><span class="token punctuation">(</span><span class="token string">"count"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>mytable <span class="token operator">=</span> <span class="token keyword">nil</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">collectgarbage</span><span class="token punctuation">(</span><span class="token string">"count"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">collectgarbage</span><span class="token punctuation">(</span><span class="token string">"collect"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">collectgarbage</span><span class="token punctuation">(</span><span class="token string">"count"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">--[[ 输出：27.639648437527.6767578125026.623046875--]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="16-面向对象">16. 面向对象</h2><h3 id="16-1-面向对象特征">16.1 面向对象特征</h3><ul><li><p>封装：能够把一个实体的信息、功能、响应都装入一个单独的对象中的特征。</p></li><li><p>继承：基础的方法允许在不改动原程序的基础上对其进行扩充，使得原功能得以保存，新功能也得以扩展，有利于减少重复代码，提高开发效率。</p></li><li><p>多态：同一操作作用于不同的对象，产生不同的执行结果，可以通过指向基类的指针，来调用实现派生类的方法。</p></li><li><p>抽象：简化复杂问题的方法，可以为具体问题找到最恰当的类定义，并且可以在最恰当的继承级别解释问题。</p></li></ul><h3 id="16-2-类封装">16.2 类封装</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- 元类</span>Shape <span class="token operator">=</span> <span class="token punctuation">{</span> area <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token comment">-- 基础类方法 new</span><span class="token keyword">function</span> Shape<span class="token punctuation">:</span><span class="token function">new</span> <span class="token punctuation">(</span>o<span class="token punctuation">,</span> size<span class="token punctuation">)</span>    o <span class="token operator">=</span> o <span class="token keyword">or</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token function">setmetatable</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> self<span class="token punctuation">)</span>    self<span class="token punctuation">.</span>__index <span class="token operator">=</span> self    size <span class="token operator">=</span> size <span class="token keyword">or</span> <span class="token number">0</span>    self<span class="token punctuation">.</span>area <span class="token operator">=</span> size <span class="token operator">*</span> size    <span class="token keyword">return</span> o<span class="token keyword">end</span><span class="token comment">-- 基础类方法 printArea</span><span class="token keyword">function</span> Shape<span class="token punctuation">:</span><span class="token function">pirntArea</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"The area = "</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>area<span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">-- 创建对象</span>myshape <span class="token operator">=</span> Shape<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">nil</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>myshape<span class="token punctuation">:</span><span class="token function">printArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">-- 输出：The area = 100</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="16-3-继承与多态">16.3 继承与多态</h3><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua"><span class="token comment">-- 元类</span>Shape <span class="token operator">=</span> <span class="token punctuation">{</span> area <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token comment">-- 基础类方法 new</span><span class="token keyword">function</span> Shape<span class="token punctuation">:</span><span class="token function">new</span> <span class="token punctuation">(</span>o<span class="token punctuation">,</span> size<span class="token punctuation">)</span>    o <span class="token operator">=</span> o <span class="token keyword">or</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token function">setmetatable</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> self<span class="token punctuation">)</span>    self<span class="token punctuation">.</span>__index <span class="token operator">=</span> self    size <span class="token operator">=</span> size <span class="token keyword">or</span> <span class="token number">0</span>    self<span class="token punctuation">.</span>area <span class="token operator">=</span> size <span class="token operator">*</span> size    <span class="token keyword">return</span> o<span class="token keyword">end</span><span class="token comment">-- 基础类方法 printArea</span><span class="token keyword">function</span> Shape<span class="token punctuation">:</span><span class="token function">pirntArea</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"The area = "</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>area<span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">-- 创建对象</span>myshape <span class="token operator">=</span> Shape<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">nil</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>myshape<span class="token punctuation">:</span><span class="token function">printArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">-- 输出：The area = 100</span><span class="token comment">-- 继承1</span>Square <span class="token operator">=</span> Shape<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">-- 派生类方法 new</span><span class="token keyword">function</span> Square<span class="token punctuation">:</span><span class="token function">new</span> <span class="token punctuation">(</span>o<span class="token punctuation">,</span> size<span class="token punctuation">)</span>    o <span class="token operator">=</span> o <span class="token keyword">or</span> Shape<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> size<span class="token punctuation">)</span>    <span class="token function">setmetatable</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> self<span class="token punctuation">)</span>    self<span class="token punctuation">.</span>__index <span class="token operator">=</span> self    <span class="token keyword">return</span> o<span class="token keyword">end</span><span class="token comment">-- 派生类方法 printArea</span><span class="token keyword">function</span> Square<span class="token punctuation">:</span><span class="token function">printArea</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"The Square area = "</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>area<span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">-- 创建对象</span>mysquare <span class="token operator">=</span> Square<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">nil</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>mysquare<span class="token punctuation">:</span><span class="token function">printArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">-- 输出：The Square area = 100</span><span class="token comment">-- 继承2</span>Rectangle <span class="token operator">=</span> Shape<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">-- 派生类方法 new</span><span class="token keyword">function</span> Rectangle<span class="token punctuation">:</span><span class="token function">new</span> <span class="token punctuation">(</span>o<span class="token punctuation">,</span> length<span class="token punctuation">,</span> breadth<span class="token punctuation">)</span>    o <span class="token operator">=</span> o <span class="token keyword">or</span> Shape<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> size<span class="token punctuation">)</span>    <span class="token function">setmetatable</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> self<span class="token punctuation">)</span>    self<span class="token punctuation">.</span>__index <span class="token operator">=</span> self    self<span class="token punctuation">.</span>area <span class="token operator">=</span> length <span class="token operator">*</span> breadth    <span class="token keyword">return</span> o<span class="token keyword">end</span><span class="token comment">-- 派生类方法 printArea</span><span class="token keyword">function</span> Rectangle<span class="token punctuation">:</span><span class="token function">printArea</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"The Rectangle area = "</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>area<span class="token punctuation">)</span><span class="token keyword">end</span><span class="token comment">-- 创建对象</span>myrectangle <span class="token operator">=</span> Rectangle<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">nil</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>myrectangle<span class="token punctuation">:</span><span class="token function">printArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">-- 输出：The Rectangle area = 200</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="参考文章-3">参考文章</h2><p>本文是笔者通过下列网站教程学习Lua的记录，有部分修改和补充，转载请注明出处，并附带下面链接。</p><p>1.<a href="https://www.runoob.com/lua/lua-tutorial.html">【菜鸟教程Lua教程】</a></p><p>2.<a href="https://haicoder.net/lua/lua-tutorial.html">【嗨客网Lua教程】</a></p>]]></content>
      
      
      <categories>
          
          <category> Lua </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
            <tag> Unity开发基础 </tag>
            
            <tag> Lua基础 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
